// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`access 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "obj = {1: \\"a\\", x: \\"b\\"}",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "arr = [1]": Object {
      "Next": "return {a: obj.x, b: obj.x, d: obj[\\"1\\"], e: arr[0]}",
      "Result": Array [
        1,
      ],
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "obj = {1: \\"a\\", x: \\"b\\"}": Object {
      "Next": "arr = [1]",
      "Result": Object {
        "1": "a",
        "x": "b",
      },
      "ResultPath": "$.obj",
      "Type": "Pass",
    },
    "return {a: obj.x, b: obj.x, d: obj[\\"1\\"], e: arr[0]}": Object {
      "End": true,
      "Parameters": Object {
        "a.$": "$.obj.x",
        "b.$": "$.obj.x",
        "d.$": "$.obj['1']",
        "e.$": "$.arr[0]",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`assignment 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "a = \\"2\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"2\\"": Object {
      "Next": "b = a",
      "Result": "2",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = 1": Object {
      "Next": "d = a",
      "Result": 1,
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = [1, 2]": Object {
      "Next": "e = a",
      "Result": Array [
        1,
        2,
      ],
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "c = a",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = {1: \\"val2\\"}": Object {
      "Next": "return {a: a, b: b, c: c, d: d, e: e, f: f}",
      "Result": Object {
        "1": "val2",
      },
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = {x: \\"val\\"}": Object {
      "Next": "f = a",
      "Result": Object {
        "x": "val",
      },
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "b = a": Object {
      "InputPath": "$.a",
      "Next": "a = null",
      "ResultPath": "$.b",
      "Type": "Pass",
    },
    "c = a": Object {
      "InputPath": "$.a",
      "Next": "a = 1",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "d = a": Object {
      "InputPath": "$.a",
      "Next": "a = [1, 2]",
      "ResultPath": "$.d",
      "Type": "Pass",
    },
    "e = a": Object {
      "InputPath": "$.a",
      "Next": "a = {x: \\"val\\"}",
      "ResultPath": "$.e",
      "Type": "Pass",
    },
    "f = a": Object {
      "InputPath": "$.a",
      "Next": "a = {1: \\"val2\\"}",
      "ResultPath": "$.f",
      "Type": "Pass",
    },
    "return {a: a, b: b, c: c, d: d, e: e, f: f}": Object {
      "End": true,
      "Parameters": Object {
        "a.$": "$.a",
        "b.$": "$.b",
        "c.$": "$.c",
        "d.$": "$.d",
        "e.$": "$.e",
        "f.$": "$.f",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`binary and unary comparison 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "!false": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__!false",
          "Not": Object {
            "IsNull": true,
            "Variable": "$$.Execution.Id",
          },
        },
      ],
      "Default": "assignFalse__!false",
      "Type": "Choice",
    },
    "!input.a": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__!input.a",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.a",
              },
              Object {
                "IsNull": false,
                "Variable": "$.input.a",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsString": true,
                              "Variable": "$.input.a",
                            },
                            Object {
                              "StringEquals": "",
                              "Variable": "$.input.a",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsNumeric": true,
                              "Variable": "$.input.a",
                            },
                            Object {
                              "NumericEquals": 0,
                              "Variable": "$.input.a",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "BooleanEquals": true,
                        "Variable": "$.input.a",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__!input.a",
      "Type": "Choice",
    },
    "!input.n": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__!input.n",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.n",
              },
              Object {
                "IsNull": false,
                "Variable": "$.input.n",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsString": true,
                              "Variable": "$.input.n",
                            },
                            Object {
                              "StringEquals": "",
                              "Variable": "$.input.n",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsNumeric": true,
                              "Variable": "$.input.n",
                            },
                            Object {
                              "NumericEquals": 0,
                              "Variable": "$.input.n",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "BooleanEquals": true,
                        "Variable": "$.input.n",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__!input.n",
      "Type": "Choice",
    },
    "!input.nv": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__!input.nv",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.nv",
              },
              Object {
                "IsNull": false,
                "Variable": "$.input.nv",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsString": true,
                              "Variable": "$.input.nv",
                            },
                            Object {
                              "StringEquals": "",
                              "Variable": "$.input.nv",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsNumeric": true,
                              "Variable": "$.input.nv",
                            },
                            Object {
                              "NumericEquals": 0,
                              "Variable": "$.input.nv",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "BooleanEquals": true,
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__!input.nv",
      "Type": "Choice",
    },
    "!input.x": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__!input.x",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.x",
              },
              Object {
                "IsNull": false,
                "Variable": "$.input.x",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.x",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsString": true,
                              "Variable": "$.input.x",
                            },
                            Object {
                              "StringEquals": "",
                              "Variable": "$.input.x",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.x",
                      },
                      Object {
                        "Not": Object {
                          "And": Array [
                            Object {
                              "IsNumeric": true,
                              "Variable": "$.input.x",
                            },
                            Object {
                              "NumericEquals": 0,
                              "Variable": "$.input.x",
                            },
                          ],
                        },
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.x",
                      },
                      Object {
                        "BooleanEquals": true,
                        "Variable": "$.input.x",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__!input.x",
      "Type": "Choice",
    },
    "\\"a\\" !== \\"a\\"": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__\\"a\\" !== \\"a\\"",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" !== \\"a\\"",
      "Type": "Choice",
    },
    "\\"a\\" < \\"a\\"": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__\\"a\\" < \\"a\\"",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" < \\"a\\"",
      "Type": "Choice",
    },
    "\\"a\\" <= \\"a\\"": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__\\"a\\" <= \\"a\\"",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" <= \\"a\\"",
      "Type": "Choice",
    },
    "\\"a\\" > \\"a\\"": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__\\"a\\" > \\"a\\"",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" > \\"a\\"",
      "Type": "Choice",
    },
    "\\"a\\" >= \\"a\\"": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__\\"a\\" >= \\"a\\"",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" >= \\"a\\"",
      "Type": "Choice",
    },
    "\\"a\\" in input.obj": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "assignTrue__\\"a\\" in input.obj",
          "Variable": "$.input.obj['a']",
        },
      ],
      "Default": "assignFalse__\\"a\\" in input.obj",
      "Type": "Choice",
    },
    "\\"a\\" in {a: \\"val\\"}": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__\\"a\\" in {a: \\"val\\"}",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__\\"a\\" in {a: \\"val\\"}",
      "Type": "Choice",
    },
    "\\"b\\" in input.obj": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "assignTrue__\\"b\\" in input.obj",
          "Variable": "$.input.obj['b']",
        },
      ],
      "Default": "assignFalse__\\"b\\" in input.obj",
      "Type": "Choice",
    },
    "\\"val2\\" !== input.v": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__\\"val2\\" !== input.v",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.v",
              },
              Object {
                "And": Array [
                  Object {
                    "IsString": true,
                    "Variable": "$.input.v",
                  },
                  Object {
                    "StringEquals": "val2",
                    "Variable": "$.input.v",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__\\"val2\\" !== input.v",
      "Type": "Choice",
    },
    "\\"val2\\" < input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringGreaterThan": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__\\"val2\\" < input.v",
        },
      ],
      "Default": "assignFalse__\\"val2\\" < input.v",
      "Type": "Choice",
    },
    "\\"val2\\" <= input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringGreaterThanEquals": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__\\"val2\\" <= input.v",
        },
      ],
      "Default": "assignFalse__\\"val2\\" <= input.v",
      "Type": "Choice",
    },
    "\\"val2\\" === input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringEquals": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__\\"val2\\" === input.v",
        },
      ],
      "Default": "assignFalse__\\"val2\\" === input.v",
      "Type": "Choice",
    },
    "\\"val2\\" > input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringLessThan": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__\\"val2\\" > input.v",
        },
      ],
      "Default": "assignFalse__\\"val2\\" > input.v",
      "Type": "Choice",
    },
    "\\"val2\\" >= input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringLessThanEquals": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__\\"val2\\" >= input.v",
        },
      ],
      "Default": "assignFalse__\\"val2\\" >= input.v",
      "Type": "Choice",
    },
    "1 !== 1": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__1 !== 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 !== 1",
      "Type": "Choice",
    },
    "1 < 1": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__1 < 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 < 1",
      "Type": "Choice",
    },
    "1 <= 1": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__1 <= 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 <= 1",
      "Type": "Choice",
    },
    "1 === 1": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__1 === 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 === 1",
      "Type": "Choice",
    },
    "1 > 1": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__1 > 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 > 1",
      "Type": "Choice",
    },
    "1 >= 1": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__1 >= 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__1 >= 1",
      "Type": "Choice",
    },
    "1__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringEquals: in": Object {
      "End": true,
      "Parameters": Object {
        "constantBooleanEquals.$": "$.heap48",
        "constantBooleanNotEquals.$": "$.heap52",
        "constantInConstant.$": "$.heap64",
        "constantInVar.$": "$.heap65",
        "constantNot.$": "$.heap67",
        "constantNotInVar.$": "$.heap66",
        "constantNullEquals.$": "$.heap56",
        "constantNullNotEquals.$": "$.heap60",
        "constantNumberEquals.$": "$.heap24",
        "constantNumberGreater.$": "$.heap40",
        "constantNumberGreaterEquals.$": "$.heap44",
        "constantNumberLess.$": "$.heap32",
        "constantNumberLessEquals.$": "$.heap36",
        "constantNumberNotEquals.$": "$.heap28",
        "constantStringEquals.$": "$.heap0",
        "constantStringGreater.$": "$.heap16",
        "constantStringGreaterEquals.$": "$.heap20",
        "constantStringLess.$": "$.heap8",
        "constantStringLessEquals.$": "$.heap12",
        "constantStringNotEquals.$": "$.heap4",
        "constantToVarBooleanEquals.$": "$.heap49",
        "constantToVarBooleanNotEquals.$": "$.heap53",
        "constantToVarNullEquals.$": "$.heap57",
        "constantToVarNullNotEquals.$": "$.heap61",
        "constantToVarNumberEquals.$": "$.heap25",
        "constantToVarNumberGreater.$": "$.heap41",
        "constantToVarNumberGreaterEquals.$": "$.heap45",
        "constantToVarNumberLess.$": "$.heap33",
        "constantToVarNumberLessEquals.$": "$.heap37",
        "constantToVarNumberNotEquals.$": "$.heap29",
        "constantToVarStringEquals.$": "$.heap1",
        "constantToVarStringGreater.$": "$.heap17",
        "constantToVarStringGreaterEquals.$": "$.heap21",
        "constantToVarStringLess.$": "$.heap9",
        "constantToVarStringLessEquals.$": "$.heap13",
        "constantToVarStringNotEquals.$": "$.heap5",
        "varNot.$": "$.heap68",
        "varNotNullFalse.$": "$.heap70",
        "varNotPresentFalse.$": "$.heap71",
        "varNotPresentTrue.$": "$.heap69",
        "varToConstantBooleanEquals.$": "$.heap50",
        "varToConstantBooleanNotEquals.$": "$.heap54",
        "varToConstantNullEquals.$": "$.heap58",
        "varToConstantNullNotEquals.$": "$.heap62",
        "varToConstantNumberEquals.$": "$.heap26",
        "varToConstantNumberGreater.$": "$.heap42",
        "varToConstantNumberGreaterEquals.$": "$.heap46",
        "varToConstantNumberLess.$": "$.heap34",
        "varToConstantNumberLessEquals.$": "$.heap38",
        "varToConstantNumberNotEquals.$": "$.heap30",
        "varToConstantStringEquals.$": "$.heap2",
        "varToConstantStringGreater.$": "$.heap18",
        "varToConstantStringGreaterEquals.$": "$.heap22",
        "varToConstantStringLess.$": "$.heap10",
        "varToConstantStringLessEquals.$": "$.heap14",
        "varToConstantStringNotEquals.$": "$.heap6",
        "varToVarBooleanEquals.$": "$.heap51",
        "varToVarBooleanNotEquals.$": "$.heap55",
        "varToVarNullEquals.$": "$.heap59",
        "varToVarNullNotEquals.$": "$.heap63",
        "varToVarNumberEquals.$": "$.heap27",
        "varToVarNumberGreaterE.$": "$.heap43",
        "varToVarNumberGreaterEquals.$": "$.heap47",
        "varToVarNumberLess.$": "$.heap35",
        "varToVarNumberLessEquals.$": "$.heap39",
        "varToVarNumberNotEquals.$": "$.heap31",
        "varToVarStringEquals.$": "$.heap3",
        "varToVarStringGreaterE.$": "$.heap19",
        "varToVarStringGreaterEquals.$": "$.heap23",
        "varToVarStringLess.$": "$.heap11",
        "varToVarStringLessEquals.$": "$.heap15",
        "varToVarStringNotEquals.$": "$.heap7",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "3 !== input.n": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__3 !== input.n",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.n",
              },
              Object {
                "And": Array [
                  Object {
                    "IsNumeric": true,
                    "Variable": "$.input.n",
                  },
                  Object {
                    "NumericEquals": 3,
                    "Variable": "$.input.n",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__3 !== input.n",
      "Type": "Choice",
    },
    "3 < input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericGreaterThan": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__3 < input.n",
        },
      ],
      "Default": "assignFalse__3 < input.n",
      "Type": "Choice",
    },
    "3 <= input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericGreaterThanEquals": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__3 <= input.n",
        },
      ],
      "Default": "assignFalse__3 <= input.n",
      "Type": "Choice",
    },
    "3 === input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__3 === input.n",
        },
      ],
      "Default": "assignFalse__3 === input.n",
      "Type": "Choice",
    },
    "3 > input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericLessThan": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__3 > input.n",
        },
      ],
      "Default": "assignFalse__3 > input.n",
      "Type": "Choice",
    },
    "3 >= input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericLessThanEquals": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__3 >= input.n",
        },
      ],
      "Default": "assignFalse__3 >= input.n",
      "Type": "Choice",
    },
    "Initialize Functionless Context": Object {
      "Next": "return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringEquals: input",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "assignFalse__!false": Object {
      "Next": "!input.a",
      "Result": false,
      "ResultPath": "$.heap67",
      "Type": "Pass",
    },
    "assignFalse__!input.a": Object {
      "Next": "!input.nv",
      "Result": false,
      "ResultPath": "$.heap68",
      "Type": "Pass",
    },
    "assignFalse__!input.n": Object {
      "Next": "!input.x",
      "Result": false,
      "ResultPath": "$.heap70",
      "Type": "Pass",
    },
    "assignFalse__!input.nv": Object {
      "Next": "!input.n",
      "Result": false,
      "ResultPath": "$.heap69",
      "Type": "Pass",
    },
    "assignFalse__!input.x": Object {
      "Next": "1__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringEquals: in",
      "Result": false,
      "ResultPath": "$.heap71",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" !== \\"a\\"": Object {
      "Next": "input.v !== \\"val\\"",
      "Result": false,
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" < \\"a\\"": Object {
      "Next": "input.v < \\"val2\\"",
      "Result": false,
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" <= \\"a\\"": Object {
      "Next": "input.v <= \\"val2\\"",
      "Result": false,
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" > \\"a\\"": Object {
      "Next": "input.v > \\"val2\\"",
      "Result": false,
      "ResultPath": "$.heap16",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" >= \\"a\\"": Object {
      "Next": "input.v >= \\"val2\\"",
      "Result": false,
      "ResultPath": "$.heap20",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" in input.obj": Object {
      "Next": "\\"b\\" in input.obj",
      "Result": false,
      "ResultPath": "$.heap65",
      "Type": "Pass",
    },
    "assignFalse__\\"a\\" in {a: \\"val\\"}": Object {
      "Next": "\\"a\\" in input.obj",
      "Result": false,
      "ResultPath": "$.heap64",
      "Type": "Pass",
    },
    "assignFalse__\\"b\\" in input.obj": Object {
      "Next": "!false",
      "Result": false,
      "ResultPath": "$.heap66",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" !== input.v": Object {
      "Next": "input.v !== input.v",
      "Result": false,
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" < input.v": Object {
      "Next": "input.v < input.v",
      "Result": false,
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" <= input.v": Object {
      "Next": "input.v <= input.v",
      "Result": false,
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" === input.v": Object {
      "Next": "input.v === input.v",
      "Result": false,
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" > input.v": Object {
      "Next": "input.v > input.v",
      "Result": false,
      "ResultPath": "$.heap18",
      "Type": "Pass",
    },
    "assignFalse__\\"val2\\" >= input.v": Object {
      "Next": "input.v >= input.v",
      "Result": false,
      "ResultPath": "$.heap22",
      "Type": "Pass",
    },
    "assignFalse__1 !== 1": Object {
      "Next": "input.n !== 2",
      "Result": false,
      "ResultPath": "$.heap28",
      "Type": "Pass",
    },
    "assignFalse__1 < 1": Object {
      "Next": "input.n < 3",
      "Result": false,
      "ResultPath": "$.heap32",
      "Type": "Pass",
    },
    "assignFalse__1 <= 1": Object {
      "Next": "input.n <= 3",
      "Result": false,
      "ResultPath": "$.heap36",
      "Type": "Pass",
    },
    "assignFalse__1 === 1": Object {
      "Next": "input.n === 2",
      "Result": false,
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "assignFalse__1 > 1": Object {
      "Next": "input.n > 3",
      "Result": false,
      "ResultPath": "$.heap40",
      "Type": "Pass",
    },
    "assignFalse__1 >= 1": Object {
      "Next": "input.n >= 3",
      "Result": false,
      "ResultPath": "$.heap44",
      "Type": "Pass",
    },
    "assignFalse__3 !== input.n": Object {
      "Next": "input.n !== input.n",
      "Result": false,
      "ResultPath": "$.heap30",
      "Type": "Pass",
    },
    "assignFalse__3 < input.n": Object {
      "Next": "input.n < input.n",
      "Result": false,
      "ResultPath": "$.heap34",
      "Type": "Pass",
    },
    "assignFalse__3 <= input.n": Object {
      "Next": "input.n <= input.n",
      "Result": false,
      "ResultPath": "$.heap38",
      "Type": "Pass",
    },
    "assignFalse__3 === input.n": Object {
      "Next": "input.n === input.n",
      "Result": false,
      "ResultPath": "$.heap26",
      "Type": "Pass",
    },
    "assignFalse__3 > input.n": Object {
      "Next": "input.n > input.n",
      "Result": false,
      "ResultPath": "$.heap42",
      "Type": "Pass",
    },
    "assignFalse__3 >= input.n": Object {
      "Next": "input.n >= input.n",
      "Result": false,
      "ResultPath": "$.heap46",
      "Type": "Pass",
    },
    "assignFalse__false !== input.a": Object {
      "Next": "input.a !== input.a",
      "Result": false,
      "ResultPath": "$.heap54",
      "Type": "Pass",
    },
    "assignFalse__false === input.a": Object {
      "Next": "input.a === input.a",
      "Result": false,
      "ResultPath": "$.heap50",
      "Type": "Pass",
    },
    "assignFalse__input.a !== input.a": Object {
      "Next": "null === null",
      "Result": false,
      "ResultPath": "$.heap55",
      "Type": "Pass",
    },
    "assignFalse__input.a !== true": Object {
      "Next": "false !== input.a",
      "Result": false,
      "ResultPath": "$.heap53",
      "Type": "Pass",
    },
    "assignFalse__input.a === input.a": Object {
      "Next": "true !== true",
      "Result": false,
      "ResultPath": "$.heap51",
      "Type": "Pass",
    },
    "assignFalse__input.a === true": Object {
      "Next": "false === input.a",
      "Result": false,
      "ResultPath": "$.heap49",
      "Type": "Pass",
    },
    "assignFalse__input.n !== 2": Object {
      "Next": "3 !== input.n",
      "Result": false,
      "ResultPath": "$.heap29",
      "Type": "Pass",
    },
    "assignFalse__input.n !== input.n": Object {
      "Next": "1 < 1",
      "Result": false,
      "ResultPath": "$.heap31",
      "Type": "Pass",
    },
    "assignFalse__input.n < 3": Object {
      "Next": "3 < input.n",
      "Result": false,
      "ResultPath": "$.heap33",
      "Type": "Pass",
    },
    "assignFalse__input.n < input.n": Object {
      "Next": "1 <= 1",
      "Result": false,
      "ResultPath": "$.heap35",
      "Type": "Pass",
    },
    "assignFalse__input.n <= 3": Object {
      "Next": "3 <= input.n",
      "Result": false,
      "ResultPath": "$.heap37",
      "Type": "Pass",
    },
    "assignFalse__input.n <= input.n": Object {
      "Next": "1 > 1",
      "Result": false,
      "ResultPath": "$.heap39",
      "Type": "Pass",
    },
    "assignFalse__input.n === 2": Object {
      "Next": "3 === input.n",
      "Result": false,
      "ResultPath": "$.heap25",
      "Type": "Pass",
    },
    "assignFalse__input.n === input.n": Object {
      "Next": "1 !== 1",
      "Result": false,
      "ResultPath": "$.heap27",
      "Type": "Pass",
    },
    "assignFalse__input.n > 3": Object {
      "Next": "3 > input.n",
      "Result": false,
      "ResultPath": "$.heap41",
      "Type": "Pass",
    },
    "assignFalse__input.n > input.n": Object {
      "Next": "1 >= 1",
      "Result": false,
      "ResultPath": "$.heap43",
      "Type": "Pass",
    },
    "assignFalse__input.n >= 3": Object {
      "Next": "3 >= input.n",
      "Result": false,
      "ResultPath": "$.heap45",
      "Type": "Pass",
    },
    "assignFalse__input.n >= input.n": Object {
      "Next": "true === true",
      "Result": false,
      "ResultPath": "$.heap47",
      "Type": "Pass",
    },
    "assignFalse__input.nv !== input.nv": Object {
      "Next": "\\"a\\" in {a: \\"val\\"}",
      "Result": false,
      "ResultPath": "$.heap63",
      "Type": "Pass",
    },
    "assignFalse__input.nv !== null": Object {
      "Next": "input.v !== input.nv",
      "Result": false,
      "ResultPath": "$.heap61",
      "Type": "Pass",
    },
    "assignFalse__input.nv === input.nv": Object {
      "Next": "null !== null",
      "Result": false,
      "ResultPath": "$.heap59",
      "Type": "Pass",
    },
    "assignFalse__input.nv === null": Object {
      "Next": "input.v === input.nv",
      "Result": false,
      "ResultPath": "$.heap57",
      "Type": "Pass",
    },
    "assignFalse__input.v !== \\"val\\"": Object {
      "Next": "\\"val2\\" !== input.v",
      "Result": false,
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "assignFalse__input.v !== input.nv": Object {
      "Next": "input.nv !== input.nv",
      "Result": false,
      "ResultPath": "$.heap62",
      "Type": "Pass",
    },
    "assignFalse__input.v !== input.v": Object {
      "Next": "\\"a\\" < \\"a\\"",
      "Result": false,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignFalse__input.v < \\"val2\\"": Object {
      "Next": "\\"val2\\" < input.v",
      "Result": false,
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "assignFalse__input.v < input.v": Object {
      "Next": "\\"a\\" <= \\"a\\"",
      "Result": false,
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "assignFalse__input.v <= \\"val2\\"": Object {
      "Next": "\\"val2\\" <= input.v",
      "Result": false,
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "assignFalse__input.v <= input.v": Object {
      "Next": "\\"a\\" > \\"a\\"",
      "Result": false,
      "ResultPath": "$.heap15",
      "Type": "Pass",
    },
    "assignFalse__input.v === \\"val\\"": Object {
      "Next": "\\"val2\\" === input.v",
      "Result": false,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignFalse__input.v === input.nv": Object {
      "Next": "input.nv === input.nv",
      "Result": false,
      "ResultPath": "$.heap58",
      "Type": "Pass",
    },
    "assignFalse__input.v === input.v": Object {
      "Next": "\\"a\\" !== \\"a\\"",
      "Result": false,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignFalse__input.v > \\"val2\\"": Object {
      "Next": "\\"val2\\" > input.v",
      "Result": false,
      "ResultPath": "$.heap17",
      "Type": "Pass",
    },
    "assignFalse__input.v > input.v": Object {
      "Next": "\\"a\\" >= \\"a\\"",
      "Result": false,
      "ResultPath": "$.heap19",
      "Type": "Pass",
    },
    "assignFalse__input.v >= \\"val2\\"": Object {
      "Next": "\\"val2\\" >= input.v",
      "Result": false,
      "ResultPath": "$.heap21",
      "Type": "Pass",
    },
    "assignFalse__input.v >= input.v": Object {
      "Next": "1 === 1",
      "Result": false,
      "ResultPath": "$.heap23",
      "Type": "Pass",
    },
    "assignFalse__null !== null": Object {
      "Next": "input.nv !== null",
      "Result": false,
      "ResultPath": "$.heap60",
      "Type": "Pass",
    },
    "assignFalse__null === null": Object {
      "Next": "input.nv === null",
      "Result": false,
      "ResultPath": "$.heap56",
      "Type": "Pass",
    },
    "assignFalse__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarString": Object {
      "Next": "input.v === \\"val\\"",
      "Result": false,
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "assignFalse__true !== true": Object {
      "Next": "input.a !== true",
      "Result": false,
      "ResultPath": "$.heap52",
      "Type": "Pass",
    },
    "assignFalse__true === true": Object {
      "Next": "input.a === true",
      "Result": false,
      "ResultPath": "$.heap48",
      "Type": "Pass",
    },
    "assignTrue__!false": Object {
      "Next": "!input.a",
      "Result": true,
      "ResultPath": "$.heap67",
      "Type": "Pass",
    },
    "assignTrue__!input.a": Object {
      "Next": "!input.nv",
      "Result": true,
      "ResultPath": "$.heap68",
      "Type": "Pass",
    },
    "assignTrue__!input.n": Object {
      "Next": "!input.x",
      "Result": true,
      "ResultPath": "$.heap70",
      "Type": "Pass",
    },
    "assignTrue__!input.nv": Object {
      "Next": "!input.n",
      "Result": true,
      "ResultPath": "$.heap69",
      "Type": "Pass",
    },
    "assignTrue__!input.x": Object {
      "Next": "1__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringEquals: in",
      "Result": true,
      "ResultPath": "$.heap71",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" !== \\"a\\"": Object {
      "Next": "input.v !== \\"val\\"",
      "Result": true,
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" < \\"a\\"": Object {
      "Next": "input.v < \\"val2\\"",
      "Result": true,
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" <= \\"a\\"": Object {
      "Next": "input.v <= \\"val2\\"",
      "Result": true,
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" > \\"a\\"": Object {
      "Next": "input.v > \\"val2\\"",
      "Result": true,
      "ResultPath": "$.heap16",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" >= \\"a\\"": Object {
      "Next": "input.v >= \\"val2\\"",
      "Result": true,
      "ResultPath": "$.heap20",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" in input.obj": Object {
      "Next": "\\"b\\" in input.obj",
      "Result": true,
      "ResultPath": "$.heap65",
      "Type": "Pass",
    },
    "assignTrue__\\"a\\" in {a: \\"val\\"}": Object {
      "Next": "\\"a\\" in input.obj",
      "Result": true,
      "ResultPath": "$.heap64",
      "Type": "Pass",
    },
    "assignTrue__\\"b\\" in input.obj": Object {
      "Next": "!false",
      "Result": true,
      "ResultPath": "$.heap66",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" !== input.v": Object {
      "Next": "input.v !== input.v",
      "Result": true,
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" < input.v": Object {
      "Next": "input.v < input.v",
      "Result": true,
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" <= input.v": Object {
      "Next": "input.v <= input.v",
      "Result": true,
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" === input.v": Object {
      "Next": "input.v === input.v",
      "Result": true,
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" > input.v": Object {
      "Next": "input.v > input.v",
      "Result": true,
      "ResultPath": "$.heap18",
      "Type": "Pass",
    },
    "assignTrue__\\"val2\\" >= input.v": Object {
      "Next": "input.v >= input.v",
      "Result": true,
      "ResultPath": "$.heap22",
      "Type": "Pass",
    },
    "assignTrue__1 !== 1": Object {
      "Next": "input.n !== 2",
      "Result": true,
      "ResultPath": "$.heap28",
      "Type": "Pass",
    },
    "assignTrue__1 < 1": Object {
      "Next": "input.n < 3",
      "Result": true,
      "ResultPath": "$.heap32",
      "Type": "Pass",
    },
    "assignTrue__1 <= 1": Object {
      "Next": "input.n <= 3",
      "Result": true,
      "ResultPath": "$.heap36",
      "Type": "Pass",
    },
    "assignTrue__1 === 1": Object {
      "Next": "input.n === 2",
      "Result": true,
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "assignTrue__1 > 1": Object {
      "Next": "input.n > 3",
      "Result": true,
      "ResultPath": "$.heap40",
      "Type": "Pass",
    },
    "assignTrue__1 >= 1": Object {
      "Next": "input.n >= 3",
      "Result": true,
      "ResultPath": "$.heap44",
      "Type": "Pass",
    },
    "assignTrue__3 !== input.n": Object {
      "Next": "input.n !== input.n",
      "Result": true,
      "ResultPath": "$.heap30",
      "Type": "Pass",
    },
    "assignTrue__3 < input.n": Object {
      "Next": "input.n < input.n",
      "Result": true,
      "ResultPath": "$.heap34",
      "Type": "Pass",
    },
    "assignTrue__3 <= input.n": Object {
      "Next": "input.n <= input.n",
      "Result": true,
      "ResultPath": "$.heap38",
      "Type": "Pass",
    },
    "assignTrue__3 === input.n": Object {
      "Next": "input.n === input.n",
      "Result": true,
      "ResultPath": "$.heap26",
      "Type": "Pass",
    },
    "assignTrue__3 > input.n": Object {
      "Next": "input.n > input.n",
      "Result": true,
      "ResultPath": "$.heap42",
      "Type": "Pass",
    },
    "assignTrue__3 >= input.n": Object {
      "Next": "input.n >= input.n",
      "Result": true,
      "ResultPath": "$.heap46",
      "Type": "Pass",
    },
    "assignTrue__false !== input.a": Object {
      "Next": "input.a !== input.a",
      "Result": true,
      "ResultPath": "$.heap54",
      "Type": "Pass",
    },
    "assignTrue__false === input.a": Object {
      "Next": "input.a === input.a",
      "Result": true,
      "ResultPath": "$.heap50",
      "Type": "Pass",
    },
    "assignTrue__input.a !== input.a": Object {
      "Next": "null === null",
      "Result": true,
      "ResultPath": "$.heap55",
      "Type": "Pass",
    },
    "assignTrue__input.a !== true": Object {
      "Next": "false !== input.a",
      "Result": true,
      "ResultPath": "$.heap53",
      "Type": "Pass",
    },
    "assignTrue__input.a === input.a": Object {
      "Next": "true !== true",
      "Result": true,
      "ResultPath": "$.heap51",
      "Type": "Pass",
    },
    "assignTrue__input.a === true": Object {
      "Next": "false === input.a",
      "Result": true,
      "ResultPath": "$.heap49",
      "Type": "Pass",
    },
    "assignTrue__input.n !== 2": Object {
      "Next": "3 !== input.n",
      "Result": true,
      "ResultPath": "$.heap29",
      "Type": "Pass",
    },
    "assignTrue__input.n !== input.n": Object {
      "Next": "1 < 1",
      "Result": true,
      "ResultPath": "$.heap31",
      "Type": "Pass",
    },
    "assignTrue__input.n < 3": Object {
      "Next": "3 < input.n",
      "Result": true,
      "ResultPath": "$.heap33",
      "Type": "Pass",
    },
    "assignTrue__input.n < input.n": Object {
      "Next": "1 <= 1",
      "Result": true,
      "ResultPath": "$.heap35",
      "Type": "Pass",
    },
    "assignTrue__input.n <= 3": Object {
      "Next": "3 <= input.n",
      "Result": true,
      "ResultPath": "$.heap37",
      "Type": "Pass",
    },
    "assignTrue__input.n <= input.n": Object {
      "Next": "1 > 1",
      "Result": true,
      "ResultPath": "$.heap39",
      "Type": "Pass",
    },
    "assignTrue__input.n === 2": Object {
      "Next": "3 === input.n",
      "Result": true,
      "ResultPath": "$.heap25",
      "Type": "Pass",
    },
    "assignTrue__input.n === input.n": Object {
      "Next": "1 !== 1",
      "Result": true,
      "ResultPath": "$.heap27",
      "Type": "Pass",
    },
    "assignTrue__input.n > 3": Object {
      "Next": "3 > input.n",
      "Result": true,
      "ResultPath": "$.heap41",
      "Type": "Pass",
    },
    "assignTrue__input.n > input.n": Object {
      "Next": "1 >= 1",
      "Result": true,
      "ResultPath": "$.heap43",
      "Type": "Pass",
    },
    "assignTrue__input.n >= 3": Object {
      "Next": "3 >= input.n",
      "Result": true,
      "ResultPath": "$.heap45",
      "Type": "Pass",
    },
    "assignTrue__input.n >= input.n": Object {
      "Next": "true === true",
      "Result": true,
      "ResultPath": "$.heap47",
      "Type": "Pass",
    },
    "assignTrue__input.nv !== input.nv": Object {
      "Next": "\\"a\\" in {a: \\"val\\"}",
      "Result": true,
      "ResultPath": "$.heap63",
      "Type": "Pass",
    },
    "assignTrue__input.nv !== null": Object {
      "Next": "input.v !== input.nv",
      "Result": true,
      "ResultPath": "$.heap61",
      "Type": "Pass",
    },
    "assignTrue__input.nv === input.nv": Object {
      "Next": "null !== null",
      "Result": true,
      "ResultPath": "$.heap59",
      "Type": "Pass",
    },
    "assignTrue__input.nv === null": Object {
      "Next": "input.v === input.nv",
      "Result": true,
      "ResultPath": "$.heap57",
      "Type": "Pass",
    },
    "assignTrue__input.v !== \\"val\\"": Object {
      "Next": "\\"val2\\" !== input.v",
      "Result": true,
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "assignTrue__input.v !== input.nv": Object {
      "Next": "input.nv !== input.nv",
      "Result": true,
      "ResultPath": "$.heap62",
      "Type": "Pass",
    },
    "assignTrue__input.v !== input.v": Object {
      "Next": "\\"a\\" < \\"a\\"",
      "Result": true,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignTrue__input.v < \\"val2\\"": Object {
      "Next": "\\"val2\\" < input.v",
      "Result": true,
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "assignTrue__input.v < input.v": Object {
      "Next": "\\"a\\" <= \\"a\\"",
      "Result": true,
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "assignTrue__input.v <= \\"val2\\"": Object {
      "Next": "\\"val2\\" <= input.v",
      "Result": true,
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "assignTrue__input.v <= input.v": Object {
      "Next": "\\"a\\" > \\"a\\"",
      "Result": true,
      "ResultPath": "$.heap15",
      "Type": "Pass",
    },
    "assignTrue__input.v === \\"val\\"": Object {
      "Next": "\\"val2\\" === input.v",
      "Result": true,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignTrue__input.v === input.nv": Object {
      "Next": "input.nv === input.nv",
      "Result": true,
      "ResultPath": "$.heap58",
      "Type": "Pass",
    },
    "assignTrue__input.v === input.v": Object {
      "Next": "\\"a\\" !== \\"a\\"",
      "Result": true,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignTrue__input.v > \\"val2\\"": Object {
      "Next": "\\"val2\\" > input.v",
      "Result": true,
      "ResultPath": "$.heap17",
      "Type": "Pass",
    },
    "assignTrue__input.v > input.v": Object {
      "Next": "\\"a\\" >= \\"a\\"",
      "Result": true,
      "ResultPath": "$.heap19",
      "Type": "Pass",
    },
    "assignTrue__input.v >= \\"val2\\"": Object {
      "Next": "\\"val2\\" >= input.v",
      "Result": true,
      "ResultPath": "$.heap21",
      "Type": "Pass",
    },
    "assignTrue__input.v >= input.v": Object {
      "Next": "1 === 1",
      "Result": true,
      "ResultPath": "$.heap23",
      "Type": "Pass",
    },
    "assignTrue__null !== null": Object {
      "Next": "input.nv !== null",
      "Result": true,
      "ResultPath": "$.heap60",
      "Type": "Pass",
    },
    "assignTrue__null === null": Object {
      "Next": "input.nv === null",
      "Result": true,
      "ResultPath": "$.heap56",
      "Type": "Pass",
    },
    "assignTrue__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringE": Object {
      "Next": "input.v === \\"val\\"",
      "Result": true,
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "assignTrue__true !== true": Object {
      "Next": "input.a !== true",
      "Result": true,
      "ResultPath": "$.heap52",
      "Type": "Pass",
    },
    "assignTrue__true === true": Object {
      "Next": "input.a === true",
      "Result": true,
      "ResultPath": "$.heap48",
      "Type": "Pass",
    },
    "false !== input.a": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__false !== input.a",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.a",
              },
              Object {
                "And": Array [
                  Object {
                    "IsBoolean": true,
                    "Variable": "$.input.a",
                  },
                  Object {
                    "BooleanEquals": false,
                    "Variable": "$.input.a",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__false !== input.a",
      "Type": "Choice",
    },
    "false === input.a": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.a",
            },
            Object {
              "And": Array [
                Object {
                  "IsBoolean": true,
                  "Variable": "$.input.a",
                },
                Object {
                  "BooleanEquals": false,
                  "Variable": "$.input.a",
                },
              ],
            },
          ],
          "Next": "assignTrue__false === input.a",
        },
      ],
      "Default": "assignFalse__false === input.a",
      "Type": "Choice",
    },
    "input.a !== input.a": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.a !== input.a",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.a",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.a",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "StringEqualsPath": "$.input.a",
                        "Variable": "$.input.a",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "BooleanEqualsPath": "$.input.a",
                        "Variable": "$.input.a",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.a",
                      },
                      Object {
                        "NumericEqualsPath": "$.input.a",
                        "Variable": "$.input.a",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.a !== input.a",
      "Type": "Choice",
    },
    "input.a !== true": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.a !== true",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.a",
              },
              Object {
                "And": Array [
                  Object {
                    "IsBoolean": true,
                    "Variable": "$.input.a",
                  },
                  Object {
                    "BooleanEquals": true,
                    "Variable": "$.input.a",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.a !== true",
      "Type": "Choice",
    },
    "input.a === input.a": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.a",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.a",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "StringEqualsPath": "$.input.a",
                      "Variable": "$.input.a",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "BooleanEqualsPath": "$.input.a",
                      "Variable": "$.input.a",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "NumericEqualsPath": "$.input.a",
                      "Variable": "$.input.a",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.a === input.a",
        },
      ],
      "Default": "assignFalse__input.a === input.a",
      "Type": "Choice",
    },
    "input.a === true": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.a",
            },
            Object {
              "And": Array [
                Object {
                  "IsBoolean": true,
                  "Variable": "$.input.a",
                },
                Object {
                  "BooleanEquals": true,
                  "Variable": "$.input.a",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.a === true",
        },
      ],
      "Default": "assignFalse__input.a === true",
      "Type": "Choice",
    },
    "input.n !== 2": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.n !== 2",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.n",
              },
              Object {
                "And": Array [
                  Object {
                    "IsNumeric": true,
                    "Variable": "$.input.n",
                  },
                  Object {
                    "NumericEquals": 2,
                    "Variable": "$.input.n",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.n !== 2",
      "Type": "Choice",
    },
    "input.n !== input.n": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.n !== input.n",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.n",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.n",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "StringEqualsPath": "$.input.n",
                        "Variable": "$.input.n",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "BooleanEqualsPath": "$.input.n",
                        "Variable": "$.input.n",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.n",
                      },
                      Object {
                        "NumericEqualsPath": "$.input.n",
                        "Variable": "$.input.n",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.n !== input.n",
      "Type": "Choice",
    },
    "input.n < 3": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericLessThan": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n < 3",
        },
      ],
      "Default": "assignFalse__input.n < 3",
      "Type": "Choice",
    },
    "input.n < input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "StringLessThanPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "NumericLessThanPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n < input.n",
        },
      ],
      "Default": "assignFalse__input.n < input.n",
      "Type": "Choice",
    },
    "input.n <= 3": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericLessThanEquals": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n <= 3",
        },
      ],
      "Default": "assignFalse__input.n <= 3",
      "Type": "Choice",
    },
    "input.n <= input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "StringLessThanEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "NumericLessThanEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n <= input.n",
        },
      ],
      "Default": "assignFalse__input.n <= input.n",
      "Type": "Choice",
    },
    "input.n === 2": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericEquals": 2,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n === 2",
        },
      ],
      "Default": "assignFalse__input.n === 2",
      "Type": "Choice",
    },
    "input.n === input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "StringEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "BooleanEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "NumericEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n === input.n",
        },
      ],
      "Default": "assignFalse__input.n === input.n",
      "Type": "Choice",
    },
    "input.n > 3": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericGreaterThan": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n > 3",
        },
      ],
      "Default": "assignFalse__input.n > 3",
      "Type": "Choice",
    },
    "input.n > input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "StringGreaterThanPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "NumericGreaterThanPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n > input.n",
        },
      ],
      "Default": "assignFalse__input.n > input.n",
      "Type": "Choice",
    },
    "input.n >= 3": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.input.n",
                },
                Object {
                  "NumericGreaterThanEquals": 3,
                  "Variable": "$.input.n",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n >= 3",
        },
      ],
      "Default": "assignFalse__input.n >= 3",
      "Type": "Choice",
    },
    "input.n >= input.n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.n",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "StringGreaterThanEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.n",
                    },
                    Object {
                      "NumericGreaterThanEqualsPath": "$.input.n",
                      "Variable": "$.input.n",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.n >= input.n",
        },
      ],
      "Default": "assignFalse__input.n >= input.n",
      "Type": "Choice",
    },
    "input.nv !== input.nv": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.nv !== input.nv",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.nv",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "StringEqualsPath": "$.input.nv",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "BooleanEqualsPath": "$.input.nv",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "NumericEqualsPath": "$.input.nv",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.nv !== input.nv",
      "Type": "Choice",
    },
    "input.nv !== null": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.nv !== null",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.nv",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.fnl_context.null",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "StringEqualsPath": "$.fnl_context.null",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "BooleanEqualsPath": "$.fnl_context.null",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.nv",
                      },
                      Object {
                        "NumericEqualsPath": "$.fnl_context.null",
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.nv !== null",
      "Type": "Choice",
    },
    "input.nv === input.nv": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.nv",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "StringEqualsPath": "$.input.nv",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "BooleanEqualsPath": "$.input.nv",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "NumericEqualsPath": "$.input.nv",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.nv === input.nv",
        },
      ],
      "Default": "assignFalse__input.nv === input.nv",
      "Type": "Choice",
    },
    "input.nv === null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.nv",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.fnl_context.null",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "StringEqualsPath": "$.fnl_context.null",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "BooleanEqualsPath": "$.fnl_context.null",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.nv",
                    },
                    Object {
                      "NumericEqualsPath": "$.fnl_context.null",
                      "Variable": "$.input.nv",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.nv === null",
        },
      ],
      "Default": "assignFalse__input.nv === null",
      "Type": "Choice",
    },
    "input.v !== \\"val\\"": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.v !== \\"val\\"",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.v",
              },
              Object {
                "And": Array [
                  Object {
                    "IsString": true,
                    "Variable": "$.input.v",
                  },
                  Object {
                    "StringEquals": "val",
                    "Variable": "$.input.v",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.v !== \\"val\\"",
      "Type": "Choice",
    },
    "input.v !== input.nv": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.v !== input.nv",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.v",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.nv",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "StringEqualsPath": "$.input.nv",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "BooleanEqualsPath": "$.input.nv",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "NumericEqualsPath": "$.input.nv",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.v !== input.nv",
      "Type": "Choice",
    },
    "input.v !== input.v": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.v !== input.v",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.input.v",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "StringEqualsPath": "$.input.v",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "BooleanEqualsPath": "$.input.v",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.input.v",
                      },
                      Object {
                        "NumericEqualsPath": "$.input.v",
                        "Variable": "$.input.v",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__input.v !== input.v",
      "Type": "Choice",
    },
    "input.v < \\"val2\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringLessThan": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v < \\"val2\\"",
        },
      ],
      "Default": "assignFalse__input.v < \\"val2\\"",
      "Type": "Choice",
    },
    "input.v < input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringLessThanPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericLessThanPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v < input.v",
        },
      ],
      "Default": "assignFalse__input.v < input.v",
      "Type": "Choice",
    },
    "input.v <= \\"val2\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringLessThanEquals": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v <= \\"val2\\"",
        },
      ],
      "Default": "assignFalse__input.v <= \\"val2\\"",
      "Type": "Choice",
    },
    "input.v <= input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringLessThanEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericLessThanEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v <= input.v",
        },
      ],
      "Default": "assignFalse__input.v <= input.v",
      "Type": "Choice",
    },
    "input.v === \\"val\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringEquals": "val",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v === \\"val\\"",
        },
      ],
      "Default": "assignFalse__input.v === \\"val\\"",
      "Type": "Choice",
    },
    "input.v === input.nv": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.nv",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringEqualsPath": "$.input.nv",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "BooleanEqualsPath": "$.input.nv",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericEqualsPath": "$.input.nv",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v === input.nv",
        },
      ],
      "Default": "assignFalse__input.v === input.nv",
      "Type": "Choice",
    },
    "input.v === input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "BooleanEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v === input.v",
        },
      ],
      "Default": "assignFalse__input.v === input.v",
      "Type": "Choice",
    },
    "input.v > \\"val2\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringGreaterThan": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v > \\"val2\\"",
        },
      ],
      "Default": "assignFalse__input.v > \\"val2\\"",
      "Type": "Choice",
    },
    "input.v > input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringGreaterThanPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericGreaterThanPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v > input.v",
        },
      ],
      "Default": "assignFalse__input.v > input.v",
      "Type": "Choice",
    },
    "input.v >= \\"val2\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.input.v",
                },
                Object {
                  "StringGreaterThanEquals": "val2",
                  "Variable": "$.input.v",
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v >= \\"val2\\"",
        },
      ],
      "Default": "assignFalse__input.v >= \\"val2\\"",
      "Type": "Choice",
    },
    "input.v >= input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "StringGreaterThanEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$$.Execution.Id",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.v",
                    },
                    Object {
                      "NumericGreaterThanEqualsPath": "$.input.v",
                      "Variable": "$.input.v",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__input.v >= input.v",
        },
      ],
      "Default": "assignFalse__input.v >= input.v",
      "Type": "Choice",
    },
    "null !== null": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__null !== null",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.fnl_context.null",
              },
              Object {
                "Or": Array [
                  Object {
                    "And": Array [
                      Object {
                        "IsNull": true,
                        "Variable": "$.fnl_context.null",
                      },
                      Object {
                        "IsNull": true,
                        "Variable": "$.fnl_context.null",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsString": true,
                        "Variable": "$.fnl_context.null",
                      },
                      Object {
                        "StringEqualsPath": "$.fnl_context.null",
                        "Variable": "$.fnl_context.null",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsBoolean": true,
                        "Variable": "$.fnl_context.null",
                      },
                      Object {
                        "BooleanEqualsPath": "$.fnl_context.null",
                        "Variable": "$.fnl_context.null",
                      },
                    ],
                  },
                  Object {
                    "And": Array [
                      Object {
                        "IsNumeric": true,
                        "Variable": "$.fnl_context.null",
                      },
                      Object {
                        "NumericEqualsPath": "$.fnl_context.null",
                        "Variable": "$.fnl_context.null",
                      },
                    ],
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "assignFalse__null !== null",
      "Type": "Choice",
    },
    "null === null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.fnl_context.null",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.fnl_context.null",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.fnl_context.null",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.fnl_context.null",
                    },
                    Object {
                      "StringEqualsPath": "$.fnl_context.null",
                      "Variable": "$.fnl_context.null",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.fnl_context.null",
                    },
                    Object {
                      "BooleanEqualsPath": "$.fnl_context.null",
                      "Variable": "$.fnl_context.null",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.fnl_context.null",
                    },
                    Object {
                      "NumericEqualsPath": "$.fnl_context.null",
                      "Variable": "$.fnl_context.null",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__null === null",
        },
      ],
      "Default": "assignFalse__null === null",
      "Type": "Choice",
    },
    "return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringEquals: input": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarStringE",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__return {constantStringEquals: \\"a\\" === \\"a\\", constantToVarString",
      "Type": "Choice",
    },
    "true !== true": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "assignTrue__true !== true",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__true !== true",
      "Type": "Choice",
    },
    "true === true": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "assignTrue__true === true",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "assignFalse__true === true",
      "Type": "Choice",
    },
  },
}
`;

exports[`binaryOps logic 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return {andVar: c, and: input.a && input.b, or: input.a || input.b, null": Object {
      "End": true,
      "Parameters": Object {
        "and.$": "$.heap1",
        "andVar.$": "$.c",
        "invNullCoal.$": "$.heap4",
        "nullCoal.$": "$.heap3",
        "nullNull.$": "$.heap5",
        "nullVal.$": "$.heap6",
        "or.$": "$.heap2",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "c = input.a && input.b",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "assignFalse__c = input.a && input.b": Object {
      "Next": "c",
      "Result": false,
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "assignFalse__input.a || input.b": Object {
      "Next": "input.v ?? input.nv",
      "Result": false,
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "assignFalse__return {andVar: c, and: input.a && input.b, or: input.a || inp": Object {
      "Next": "input.a || input.b",
      "Result": false,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignTrue__c = input.a && input.b": Object {
      "Next": "c",
      "Result": true,
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "assignTrue__input.a || input.b": Object {
      "Next": "input.v ?? input.nv",
      "Result": true,
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "assignTrue__return {andVar: c, and: input.a && input.b, or: input.a || inpu": Object {
      "Next": "input.a || input.b",
      "Result": true,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "c": Object {
      "InputPath": "$.heap0",
      "Next": "return {andVar: c, and: input.a && input.b, or: input.a || input.b, nullCoa",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c = input.a && input.b": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.a",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.a",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.a",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.b",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.b",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.b",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__c = input.a && input.b",
        },
      ],
      "Default": "assignFalse__c = input.a && input.b",
      "Type": "Choice",
    },
    "input.a || input.b": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__input.a || input.b",
          "Or": Array [
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.a",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.a",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.a",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.b",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.b",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.b",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
      "Default": "assignFalse__input.a || input.b",
      "Type": "Choice",
    },
    "input.nv ?? input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.nv",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.nv",
            },
          ],
          "Next": "takeLeft__input.nv ?? input.v",
        },
      ],
      "Default": "takeRight__input.nv ?? input.v",
      "Type": "Choice",
    },
    "input.nv ?? null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.nv",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.nv",
            },
          ],
          "Next": "takeLeft__input.nv ?? null",
        },
      ],
      "Default": "takeRight__input.nv ?? null",
      "Type": "Choice",
    },
    "input.v ?? input.nv": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.v",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.v",
            },
          ],
          "Next": "takeLeft__input.v ?? input.nv",
        },
      ],
      "Default": "takeRight__input.v ?? input.nv",
      "Type": "Choice",
    },
    "null ?? input.v": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.fnl_context.null",
            },
            Object {
              "IsNull": false,
              "Variable": "$.fnl_context.null",
            },
          ],
          "Next": "takeLeft__null ?? input.v",
        },
      ],
      "Default": "takeRight__null ?? input.v",
      "Type": "Choice",
    },
    "return {andVar: c, and: input.a && input.b, or: input.a || input.b, nullCoa": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.a",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.a",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.a",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.a",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.a",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.a",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.input.b",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.input.b",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.input.b",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.input.b",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.input.b",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.input.b",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__return {andVar: c, and: input.a && input.b, or: input.a || inpu",
        },
      ],
      "Default": "assignFalse__return {andVar: c, and: input.a && input.b, or: input.a || inp",
      "Type": "Choice",
    },
    "takeLeft__input.nv ?? input.v": Object {
      "InputPath": "$.input.nv",
      "Next": "input.nv ?? null",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "takeLeft__input.nv ?? null": Object {
      "InputPath": "$.input.nv",
      "Next": "null ?? input.v",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "takeLeft__input.v ?? input.nv": Object {
      "InputPath": "$.input.v",
      "Next": "input.nv ?? input.v",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "takeLeft__null ?? input.v": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return {andVar: c, and: input.a && input.b, or: input.a || input.b, null",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "takeRight__input.nv ?? input.v": Object {
      "InputPath": "$.input.v",
      "Next": "input.nv ?? null",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "takeRight__input.nv ?? null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "null ?? input.v",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "takeRight__input.v ?? input.nv": Object {
      "InputPath": "$.input.nv",
      "Next": "input.nv ?? input.v",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "takeRight__null ?? input.v": Object {
      "InputPath": "$.input.v",
      "Next": "1__return {andVar: c, and: input.a && input.b, or: input.a || input.b, null",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
  },
}
`;

exports[`binaryOps logic with calls 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__false || await func()": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__1__false || await func()",
          "Or": Array [
            Object {
              "IsNull": true,
              "Variable": "$$.Execution.Id",
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.heap2",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.heap2",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.heap2",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.heap2",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.heap2",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.heap2",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.heap2",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.heap2",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.heap2",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.heap2",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
      "Default": "assignFalse__1__false || await func()",
      "Type": "Choice",
    },
    "1__return {and: true && await func(), or: false || await func()}": Object {
      "End": true,
      "Parameters": Object {
        "and.$": "$.heap1",
        "or.$": "$.heap3",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return {and: true && await func(), or: false || await func()} 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsNull": false,
              "Variable": "$$.Execution.Id",
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.heap0",
                },
                Object {
                  "IsNull": false,
                  "Variable": "$.heap0",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.heap0",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsString": true,
                                "Variable": "$.heap0",
                              },
                              Object {
                                "StringEquals": "",
                                "Variable": "$.heap0",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.heap0",
                        },
                        Object {
                          "Not": Object {
                            "And": Array [
                              Object {
                                "IsNumeric": true,
                                "Variable": "$.heap0",
                              },
                              Object {
                                "NumericEquals": 0,
                                "Variable": "$.heap0",
                              },
                            ],
                          },
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.heap0",
                        },
                        Object {
                          "BooleanEquals": true,
                          "Variable": "$.heap0",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__1__return {and: true && await func(), or: false || await func()",
        },
      ],
      "Default": "assignFalse__1__return {and: true && await func(), or: false || await func(",
      "Type": "Choice",
    },
    "Initialize Functionless Context": Object {
      "Next": "return {and: true && await func(), or: false || await func()}",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "assignFalse__1__false || await func()": Object {
      "Next": "1__return {and: true && await func(), or: false || await func()}",
      "Result": false,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignFalse__1__return {and: true && await func(), or: false || await func(": Object {
      "Next": "false || await func()",
      "Result": false,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignTrue__1__false || await func()": Object {
      "Next": "1__return {and: true && await func(), or: false || await func()}",
      "Result": true,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignTrue__1__return {and: true && await func(), or: false || await func()": Object {
      "Next": "false || await func()",
      "Result": true,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "false || await func()": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__false || await func()",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap2",
      "Type": "Task",
    },
    "return {and: true && await func(), or: false || await func()}": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return {and: true && await func(), or: false || await func()} 1",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call $SFN forEach 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "await $SFN.forEach(input.arr, function(n))",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "await $SFN.forEach(input.arr, function(n))": Object {
      "ItemsPath": "$.input.arr",
      "Iterator": Object {
        "StartAt": "return func(n)",
        "States": Object {
          "1__return func(n)": Object {
            "End": true,
            "InputPath": "$.heap0",
            "ResultPath": "$",
            "Type": "Pass",
          },
          "return func(n)": Object {
            "InputPath": "$.n",
            "Next": "1__return func(n)",
            "Resource": "__REPLACED_TOKEN",
            "ResultPath": "$.heap0",
            "Type": "Task",
          },
        },
      },
      "Next": "return null",
      "Parameters": Object {
        "fnl_context.$": "$.fnl_context",
        "input.$": "$.input",
        "n.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap1",
      "Type": "Map",
    },
    "return null": Object {
      "End": true,
      "InputPath": "$.fnl_context.null",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`call $SFN map 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return $SFN.map(input.arr, function(n))": Object {
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return $SFN.map(input.arr, function(n))",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return $SFN.map(input.arr, function(n))": Object {
      "ItemsPath": "$.input.arr",
      "Iterator": Object {
        "StartAt": "return n",
        "States": Object {
          "return n": Object {
            "End": true,
            "InputPath": "$.n",
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "1__return $SFN.map(input.arr, function(n))",
      "Parameters": Object {
        "fnl_context.$": "$.fnl_context",
        "input.$": "$.input",
        "n.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap0",
      "Type": "Map",
    },
  },
}
`;

exports[`call $SFN map with constant array 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "$SFN.map([1, 2, 3], function(n))": Object {
      "ItemsPath": "$.heap1",
      "Iterator": Object {
        "StartAt": "return n\${n}",
        "States": Object {
          "1__return n\${n}": Object {
            "End": true,
            "InputPath": "$.heap0.string",
            "ResultPath": "$",
            "Type": "Pass",
          },
          "return n\${n}": Object {
            "Next": "1__return n\${n}",
            "Parameters": Object {
              "string.$": "States.Format('n{}',$.n)",
            },
            "ResultPath": "$.heap0",
            "Type": "Pass",
          },
        },
      },
      "Next": "1__return $SFN.map([1, 2, 3], function(n))",
      "Parameters": Object {
        "fnl_context.$": "$.fnl_context",
        "n.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap2",
      "Type": "Map",
    },
    "1__return $SFN.map([1, 2, 3], function(n))": Object {
      "End": true,
      "InputPath": "$.heap2",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return $SFN.map([1, 2, 3], function(n))",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return $SFN.map([1, 2, 3], function(n))": Object {
      "Next": "$SFN.map([1, 2, 3], function(n))",
      "Result": Array [
        1,
        2,
        3,
      ],
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
  },
}
`;

exports[`call $SFN parallel 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return $SFN.parallel(function(), function())": Object {
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return $SFN.parallel(function(), function())",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return $SFN.parallel(function(), function())": Object {
      "Branches": Array [
        Object {
          "StartAt": "return 1",
          "States": Object {
            "return 1": Object {
              "End": true,
              "Result": 1,
              "ResultPath": "$",
              "Type": "Pass",
            },
          },
        },
        Object {
          "StartAt": "return 2",
          "States": Object {
            "return 2": Object {
              "End": true,
              "Result": 2,
              "ResultPath": "$",
              "Type": "Pass",
            },
          },
        },
      ],
      "Next": "1__return $SFN.parallel(function(), function())",
      "ResultPath": "$.heap0",
      "Type": "Parallel",
    },
  },
}
`;

exports[`call $SFN wait 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "$SFN.waitFor(1)": Object {
      "Next": "return null",
      "Seconds": 1,
      "Type": "Wait",
    },
    "Initialize Functionless Context": Object {
      "Next": "$SFN.waitFor(1)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return null": Object {
      "End": true,
      "InputPath": "$.fnl_context.null",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`call lambda $AWS invoke 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return await $AWS.Lambda.Invoke({Function: func, Payload: obj}).Payload.": Object {
      "End": true,
      "InputPath": "$.heap0.Payload.str",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "obj = {str: \\"hello world\\"}",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "obj = {str: \\"hello world\\"}": Object {
      "Next": "return await $AWS.Lambda.Invoke({Function: func, Payload: obj}).Payload.str",
      "Result": Object {
        "str": "hello world",
      },
      "ResultPath": "$.obj",
      "Type": "Pass",
    },
    "return await $AWS.Lambda.Invoke({Function: func, Payload: obj}).Payload.str": Object {
      "Next": "1__return await $AWS.Lambda.Invoke({Function: func, Payload: obj}).Payload.",
      "Parameters": Object {
        "FunctionName": "__REPLACED_TOKEN",
        "Payload.$": "$.obj",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return func()": Object {
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return func()",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return func()": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return func()",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with array parameter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return func([1, 2])": Object {
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return func([1, 2])",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return func([1, 2])": Object {
      "Next": "1__return func([1, 2])",
      "Parameters": Array [
        1,
        2,
      ],
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with array ref 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return func(arr)": Object {
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "arr = [1, 2, 3]",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "arr = [1, 2, 3]": Object {
      "Next": "return func(arr)",
      "Result": Array [
        1,
        2,
        3,
      ],
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "return func(arr)": Object {
      "InputPath": "$.arr",
      "Next": "1__return func(arr)",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with object literal parameter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return await func({str: \\"hello world\\"}).str": Object {
      "End": true,
      "InputPath": "$.heap0.str",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return await func({str: \\"hello world\\"}).str",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return await func({str: \\"hello world\\"}).str": Object {
      "Next": "1__return await func({str: \\"hello world\\"}).str",
      "Parameters": Object {
        "str": "hello world",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with object reference parameter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return await func(obj).str": Object {
      "End": true,
      "InputPath": "$.heap0.str",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "obj = {str: \\"hello world\\"}",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "obj = {str: \\"hello world\\"}": Object {
      "Next": "return await func(obj).str",
      "Result": Object {
        "str": "hello world",
      },
      "ResultPath": "$.obj",
      "Type": "Pass",
    },
    "return await func(obj).str": Object {
      "InputPath": "$.obj",
      "Next": "1__return await func(obj).str",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with string parameter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return await func(\\"hello world\\").str": Object {
      "End": true,
      "InputPath": "$.heap0.str",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return await func(\\"hello world\\").str",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return await func(\\"hello world\\").str": Object {
      "Next": "1__return await func(\\"hello world\\").str",
      "Parameters": "hello world",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`call lambda with string reference 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return await func(event.str).str": Object {
      "End": true,
      "InputPath": "$.heap0.str",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return await func(event.str).str",
      "Parameters": Object {
        "event.$": "$$.Execution.Input",
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return await func(event.str).str": Object {
      "InputPath": "$.event.str",
      "Next": "1__return await func(event.str).str",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
  },
}
`;

exports[`clean state after input 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return {stateA: state.a ?? null, a: input.a, stateInput: state.input.a ?": Object {
      "End": true,
      "Parameters": Object {
        "a.$": "$.input.a",
        "initA.$": "$.heap2",
        "stateA.$": "$.heap0",
        "stateInput.$": "$.heap1",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "state = dumpState()",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a ?? null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.a",
            },
            Object {
              "IsNull": false,
              "Variable": "$.a",
            },
          ],
          "Next": "takeLeft__a ?? null",
        },
      ],
      "Default": "takeRight__a ?? null",
      "Type": "Choice",
    },
    "return {stateA: state.a ?? null, a: input.a, stateInput: state.input.a ?? n": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.state.a",
            },
            Object {
              "IsNull": false,
              "Variable": "$.state.a",
            },
          ],
          "Next": "takeLeft__return {stateA: state.a ?? null, a: input.a, stateInput: state.in",
        },
      ],
      "Default": "takeRight__return {stateA: state.a ?? null, a: input.a, stateInput: state.i",
      "Type": "Choice",
    },
    "state = dumpState()": Object {
      "InputPath": "$",
      "Next": "return {stateA: state.a ?? null, a: input.a, stateInput: state.input.a ?? n",
      "ResultPath": "$.state",
      "Type": "Pass",
    },
    "state.input.a ?? null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.state.input.a",
            },
            Object {
              "IsNull": false,
              "Variable": "$.state.input.a",
            },
          ],
          "Next": "takeLeft__state.input.a ?? null",
        },
      ],
      "Default": "takeRight__state.input.a ?? null",
      "Type": "Choice",
    },
    "takeLeft__a ?? null": Object {
      "InputPath": "$.a",
      "Next": "1__return {stateA: state.a ?? null, a: input.a, stateInput: state.input.a ?",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "takeLeft__return {stateA: state.a ?? null, a: input.a, stateInput: state.in": Object {
      "InputPath": "$.state.a",
      "Next": "state.input.a ?? null",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "takeLeft__state.input.a ?? null": Object {
      "InputPath": "$.state.input.a",
      "Next": "a ?? null",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "takeRight__a ?? null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return {stateA: state.a ?? null, a: input.a, stateInput: state.input.a ?",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "takeRight__return {stateA: state.a ?? null, a: input.a, stateInput: state.i": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "state.input.a ?? null",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "takeRight__state.input.a ?? null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "a ?? null",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
  },
}
`;

exports[`conditionals 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__if(await func())": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap0",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap0",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.heap0",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.heap0",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.heap0",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.heap0",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.heap0",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.heap0",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.heap0",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.heap0",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "return input.b",
        },
      ],
      "Default": "return \\"noop\\"",
      "Type": "Choice",
    },
    "Initialize Functionless Context": Object {
      "Next": "if(input.a)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "if(await func())": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__if(await func())",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
    "if(input.a)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.a",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.a",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.a",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.a",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.a",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.a",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.a",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.a",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "if(await func())",
        },
      ],
      "Default": "return \\"noop\\"",
      "Type": "Choice",
    },
    "return \\"noop\\"": Object {
      "End": true,
      "Result": "noop",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return input.b": Object {
      "End": true,
      "InputPath": "$.input.b",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`context 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return name: \${context.Execution.Name}": Object {
      "End": true,
      "InputPath": "$.heap0.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return name: \${context.Execution.Name}",
      "Parameters": Object {
        "_.$": "$$.Execution.Input",
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return name: \${context.Execution.Name}": Object {
      "Next": "1__return name: \${context.Execution.Name}",
      "Parameters": Object {
        "string.$": "States.Format('name: {}',$$.Execution.Name)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
  },
}
`;

exports[`continue break 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \${a}1": Object {
      "InputPath": "$.heap0.string",
      "Next": "if(a !== \\"111\\")",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}2": Object {
      "InputPath": "$.heap1.string",
      "Next": "while (true)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__await $AWS.DynamoDB.UpdateItem({Table: table, Key: {id: {S: input.id}}, ": Object {
      "Next": "if(i === 3)",
      "Parameters": Object {
        "ExpressionAttributeValues": Object {
          ":inc": Object {
            "N.$": "$.heap2.string",
          },
          ":start": Object {
            "N": "0",
          },
        },
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
        "UpdateExpression": "SET val = if_not_exists(val, :start) + :inc",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap3",
      "Type": "Task",
    },
    "1__item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id": Object {
      "InputPath": "$.heap5",
      "Next": "return \${a}\${item.Item.val.N}",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "1__return \${a}\${item.Item.val.N}": Object {
      "End": true,
      "InputPath": "$.heap6.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "while (true)",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \${a}1": Object {
      "Next": "1__a = \${a}1",
      "Parameters": Object {
        "string.$": "States.Format('{}1',$.a)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "a = \${a}2": Object {
      "Next": "1__a = \${a}2",
      "Parameters": Object {
        "string.$": "States.Format('{}2',$.a)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "await $AWS.DynamoDB.UpdateItem({Table: table, Key: {id: {S: input.id}}, Upd": Object {
      "Next": "1__await $AWS.DynamoDB.UpdateItem({Table: table, Key: {id: {S: input.id}}, ",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.i)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "for(i of [1, 2, 3, 4])": Object {
      "Next": "hasNext__for(i of [1, 2, 3, 4])",
      "Result": Array [
        1,
        2,
        3,
        4,
      ],
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "hasNext__for(i of [1, 2, 3, 4])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap4[0]",
        },
      ],
      "Default": "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},",
      "Type": "Choice",
    },
    "i": Object {
      "InputPath": "$.heap4[0]",
      "Next": "if(i === 1)",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "if(a !== \\"111\\")": Object {
      "Choices": Array [
        Object {
          "Next": "if(a === \\"11121\\")",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.a",
              },
              Object {
                "And": Array [
                  Object {
                    "IsString": true,
                    "Variable": "$.a",
                  },
                  Object {
                    "StringEquals": "111",
                    "Variable": "$.a",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "a = \${a}2",
      "Type": "Choice",
    },
    "if(a === \\"11121\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.a",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.a",
                },
                Object {
                  "StringEquals": "11121",
                  "Variable": "$.a",
                },
              ],
            },
          ],
          "Next": "for(i of [1, 2, 3, 4])",
        },
      ],
      "Default": "while (true)",
      "Type": "Choice",
    },
    "if(i === 1)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 1,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "tail__for(i of [1, 2, 3, 4])",
        },
      ],
      "Default": "await $AWS.DynamoDB.UpdateItem({Table: table, Key: {id: {S: input.id}}, Upd",
      "Type": "Choice",
    },
    "if(i === 3)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},",
        },
      ],
      "Default": "tail__for(i of [1, 2, 3, 4])",
      "Type": "Choice",
    },
    "item": Object {
      "InputPath": "$.heap5",
      "Next": "return \`aitem.Item.val.N\`",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},": Object {
      "Next": "item",
      "Parameters": Object {
        "ConsistentRead": true,
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap5",
      "Type": "Task",
    },
    "return \${a}\${item.Item.val.N}": Object {
      "Next": "1__return \${a}\${item.Item.val.N}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.item.Item.val.N)",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "tail__for(i of [1, 2, 3, 4])": Object {
      "InputPath": "$.heap4[1:]",
      "Next": "hasNext__for(i of [1, 2, 3, 4])",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "while (true)": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "a = \${a}1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "for(i of [1, 2, 3, 4])",
      "Type": "Choice",
    },
  },
}
`;

exports[`destructure 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "\\"sir\\"": Object {
      "Next": "f",
      "Result": "sir",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "\\"sir\\" 1": Object {
      "Next": "t",
      "Result": "sir",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "\\"what\\"": Object {
      "Next": "c",
      "Result": "what",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "\\"what\\" 1": Object {
      "Next": "x",
      "Result": "what",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "\${z}\${w}\${v}\${x}\${s}\${u}\${t}\${tserRra[0]}": Object {
      "Next": "1__return {prop: \${a}\${b}\${c}\${d}\${e}\${f}\${arrRest[0]}\${r}\${m}, var: \${z}\${",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}{}{}{}{}{}',$.z,$.w,$.v,$.x,$.s,$.u,$.t,$.tserRra[0])",
      },
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "1__[ d, undefined, e, arrRest ]": Object {
      "InputPath": "$$.Execution.Input['arr'][2]",
      "Next": "2__[ d, undefined, e, arrRest ]",
      "ResultPath": "$.e",
      "Type": "Pass",
    },
    "1__[ s, undefined, u, tserRra ]": Object {
      "InputPath": "$.value['rra'][2]",
      "Next": "2__[ s, undefined, u, tserRra ]",
      "ResultPath": "$.u",
      "Type": "Pass",
    },
    "1__c = \\"what\\"": Object {
      "InputPath": "$.heap11",
      "Next": "m = c",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "1__f = \\"sir\\"": Object {
      "InputPath": "$.heap13",
      "Next": "6__{ a, bb: { value: b, [\${\\"a\\"}\${\\"b\\"}]: r }, c = \\"what\\", m = c, arr: [ d, u",
      "ResultPath": "$.f",
      "Type": "Pass",
    },
    "1__forV = \${forV}\${h}\${l}": Object {
      "InputPath": "$.heap7.string",
      "Next": "tail__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])",
      "ResultPath": "$.forV",
      "Type": "Pass",
    },
    "1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()": Object {
      "InputPath": "$.heap6",
      "Next": "hasNext__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1": Object {
      "Next": "check__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1",
      "Parameters": Object {
        "arr.$": "$.heap5",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "1__return \${aa}\${cc}": Object {
      "InputPath": "$.heap4.string",
      "Next": "handleResult__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).j",
      "ResultPath": "$.heap6.arr[0]",
      "Type": "Pass",
    },
    "1__return {prop: \${a}\${b}\${c}\${d}\${e}\${f}\${arrRest[0]}\${r}\${m}, var: \${z}\${": Object {
      "End": true,
      "Parameters": Object {
        "forV.$": "$.forV",
        "map.$": "$.map",
        "prop.$": "$.heap12.string",
        "tr.$": "$.tr",
        "var.$": "$.heap13.string",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__t = \\"sir\\"": Object {
      "InputPath": "$.heap1",
      "Next": "map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.t",
      "Type": "Pass",
    },
    "1__x = \\"what\\"": Object {
      "InputPath": "$.heap0",
      "Next": "[ s, undefined, u, tserRra ]",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "1__{ [\\"value\\"]: w, [\${\\"a\\"}\${\\"b\\"}]: v }": Object {
      "InputPath": "$.value['yy']['ab']",
      "Next": "x = \\"what\\"",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "1__{ value: b, [\${\\"a\\"}\${\\"b\\"}]: r }": Object {
      "InputPath": "$$.Execution.Input['bb']['ab']",
      "Next": "c = \\"what\\"",
      "ResultPath": "$.r",
      "Type": "Pass",
    },
    "2__[ d, undefined, e, arrRest ]": Object {
      "InputPath": "$$.Execution.Input['arr'][3:]",
      "Next": "f = \\"sir\\"",
      "ResultPath": "$.arrRest",
      "Type": "Pass",
    },
    "2__[ s, undefined, u, tserRra ]": Object {
      "InputPath": "$.value['rra'][3:]",
      "Next": "t = \\"sir\\"",
      "ResultPath": "$.tserRra",
      "Type": "Pass",
    },
    "6__{ a, bb: { value: b, [\${\\"a\\"}\${\\"b\\"}]: r }, c = \\"what\\", m = c, arr: [ d, u": Object {
      "InputPath": "$$.Execution.Input['value']",
      "Next": "{z,yy:{[\\"value\\"]:w,[\${\\"a\\"}\${\\"b\\"}]:v},x,rra:[s,undefined,u,...tserRra],rra2:",
      "ResultPath": "$.value",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "{ a, bb: { value: b, [\${\\"a\\"}\${\\"b\\"}]: r }, c = \\"what\\", m = c, arr: [ d, unde",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "[ cc ]": Object {
      "InputPath": "$.heap3.arr[0]['bb'][0]",
      "Next": "return \${aa}\${cc}",
      "ResultPath": "$.cc",
      "Type": "Pass",
    },
    "[ d, undefined, e, arrRest ]": Object {
      "InputPath": "$$.Execution.Input['arr'][0]",
      "Next": "e",
      "ResultPath": "$.d",
      "Type": "Pass",
    },
    "[ l ]": Object {
      "InputPath": "$.heap8[0]['j'][0]",
      "Next": "forV = \${forV}\${h}\${l}",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "[ s, undefined, u, tserRra ]": Object {
      "InputPath": "$.value['rra'][0]",
      "Next": "u",
      "ResultPath": "$.s",
      "Type": "Pass",
    },
    "append__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() ": Object {
      "Next": "tail__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1",
      "Parameters": Object {
        "string.$": "States.Format('{},{}', $.heap9.string, $.heap8[0])",
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "arrRest": Object {
      "InputPath": "$$.Execution.Input['arr'][3:]",
      "Next": "f = \\"sir\\"",
      "ResultPath": "$.arrRest",
      "Type": "Pass",
    },
    "c": Object {
      "InputPath": "$.heap0",
      "Next": "m = c",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c 1": Object {
      "InputPath": "$.c",
      "Next": "m",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "c = \\"what\\"": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__c = \\"what\\"",
          "Variable": "$$.Execution.Input['c']",
        },
      ],
      "Default": "\\"what\\"",
      "Type": "Choice",
    },
    "catch__try": Object {
      "InputPath": "$.fnl_tmp_1['message']",
      "Next": "tr = message",
      "ResultPath": "$.message",
      "Type": "Pass",
    },
    "cc": Object {
      "InputPath": "$.heap6.arr[0]['bb'][0]",
      "Next": "return \`aacc\`",
      "ResultPath": "$.cc",
      "Type": "Pass",
    },
    "check__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "{ aa, bb: [ cc ] }",
          "Variable": "$.heap6.arr[0]",
        },
      ],
      "Default": "end__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1",
      "Type": "Choice",
    },
    "e": Object {
      "InputPath": "$$.Execution.Input['arr'][2]",
      "Next": "arrRest",
      "ResultPath": "$.e",
      "Type": "Pass",
    },
    "end__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1": Object {
      "Next": "set__end__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join(",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap6.arrStr))",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "f": Object {
      "InputPath": "$.heap2",
      "Next": "value",
      "ResultPath": "$.f",
      "Type": "Pass",
    },
    "f = \\"sir\\"": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__f = \\"sir\\"",
          "Variable": "$$.Execution.Input['arr2'][0]",
        },
      ],
      "Default": "\\"sir\\"",
      "Type": "Choice",
    },
    "for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])": Object {
      "Next": "hasNext__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])",
      "Result": Array [
        Object {
          "h": "a",
          "j": Array [
            "b",
          ],
        },
      ],
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "forV = \\"\\"": Object {
      "Next": "for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])",
      "Result": "",
      "ResultPath": "$.forV",
      "Type": "Pass",
    },
    "forV = \${forV}\${h}\${l}": Object {
      "Next": "1__forV = \${forV}\${h}\${l}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.forV,$.h,$.l)",
      },
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "handleResult__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).j": Object {
      "Next": "check__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1",
      "Parameters": Object {
        "arr.$": "$.heap6.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap6.arrStr, States.JsonToString($.heap6.arr[0]))",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "hasNext__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap8[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap9",
              },
            },
          ],
          "Next": "initValue__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap8[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap9",
              },
            },
          ],
          "Next": "returnEmpty__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).jo",
        },
        Object {
          "IsPresent": true,
          "Next": "append__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
          "Variable": "$.heap8[0]",
        },
      ],
      "Default": "map",
      "Type": "Choice",
    },
    "hasNext__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "{ h, j: [ l ] }",
          "Variable": "$.heap11[0]",
        },
      ],
      "Default": "try",
      "Type": "Choice",
    },
    "initValue__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join": Object {
      "InputPath": "$.heap8[0]",
      "Next": "tail__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.heap9.string",
      "Type": "Pass",
    },
    "l": Object {
      "InputPath": "$.heap11[0]['j'][0]",
      "Next": "forV = \`forVhl\`",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "m": Object {
      "InputPath": "$.heap1",
      "Next": "[ d, undefined, e, arrRest ]",
      "ResultPath": "$.m",
      "Type": "Pass",
    },
    "m = c": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__m = c",
          "Variable": "$$.Execution.Input['m']",
        },
      ],
      "Default": "c 1",
      "Type": "Choice",
    },
    "map": Object {
      "InputPath": "$.heap9.string",
      "Next": "forV = \\"\\"",
      "ResultPath": "$.map",
      "Type": "Pass",
    },
    "map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()": Object {
      "Next": "1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join() 1",
      "Result": Array [
        Object {
          "aa": "a",
          "bb": Array [
            "b",
          ],
        },
      ],
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "r": Object {
      "InputPath": "$$.Execution.Input['bb']['ab']",
      "Next": "c = \\"what\\"",
      "ResultPath": "$.r",
      "Type": "Pass",
    },
    "return \${aa}\${cc}": Object {
      "Next": "1__return \${aa}\${cc}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.aa,$.cc)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "return {prop: \${a}\${b}\${c}\${d}\${e}\${f}\${arrRest[0]}\${r}\${m}, var: \${z}\${w}$": Object {
      "Next": "\${z}\${w}\${v}\${x}\${s}\${u}\${t}\${tserRra[0]}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}{}{}{}{}{}{}',$.a,$.b,$.c,$.d,$.e,$.f,$.arrRest[0],$.r,$.m)",
      },
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "returnEmpty__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).jo": Object {
      "Next": "map",
      "Result": "",
      "ResultPath": "$.heap9.string",
      "Type": "Pass",
    },
    "set__end__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join(": Object {
      "InputPath": "$.heap6.result[1:]",
      "Next": "1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "t": Object {
      "InputPath": "$.heap4",
      "Next": "map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.t",
      "Type": "Pass",
    },
    "t = \\"sir\\"": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__t = \\"sir\\"",
          "Variable": "$.value['rra2'][0]",
        },
      ],
      "Default": "\\"sir\\" 1",
      "Type": "Choice",
    },
    "tail__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()": Object {
      "InputPath": "$.heap8[1:]",
      "Next": "hasNext__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "tail__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])": Object {
      "InputPath": "$.heap11[1:]",
      "Next": "hasNext__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "tr = message": Object {
      "InputPath": "$.message",
      "Next": "return {prop: \${a}\${b}\${c}\${d}\${e}\${f}\${arrRest[0]}\${r}\${m}, var: \${z}\${w}$",
      "ResultPath": "$.tr",
      "Type": "Pass",
    },
    "try": Object {
      "Next": "catch__try",
      "Result": Object {
        "message": "hi",
      },
      "ResultPath": "$.fnl_tmp_1",
      "Type": "Pass",
    },
    "tserRra": Object {
      "InputPath": "$.value['rra'][3:]",
      "Next": "t = \\"sir\\"",
      "ResultPath": "$.tserRra",
      "Type": "Pass",
    },
    "u": Object {
      "InputPath": "$.value['rra'][2]",
      "Next": "tserRra",
      "ResultPath": "$.u",
      "Type": "Pass",
    },
    "v": Object {
      "InputPath": "$.value['yy']['ab']",
      "Next": "x = \\"what\\"",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "value": Object {
      "InputPath": "$$.Execution.Input['value']",
      "Next": "{z,yy:{[\\"value\\"]:w,[\`ab\`]:v},x,rra:[s,undefined,u,...tserRra],rra2:[t]} = v",
      "ResultPath": "$.value",
      "Type": "Pass",
    },
    "value__c = \\"what\\"": Object {
      "InputPath": "$$.Execution.Input['c']",
      "Next": "c",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "value__f = \\"sir\\"": Object {
      "InputPath": "$$.Execution.Input['arr2'][0]",
      "Next": "f",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "value__m = c": Object {
      "InputPath": "$$.Execution.Input['m']",
      "Next": "m",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "value__t = \\"sir\\"": Object {
      "InputPath": "$.value['rra2'][0]",
      "Next": "t",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "value__x = \\"what\\"": Object {
      "InputPath": "$.value['x']",
      "Next": "x",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap3",
      "Next": "[ s, undefined, u, tserRra ]",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x = \\"what\\"": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__x = \\"what\\"",
          "Variable": "$.value['x']",
        },
      ],
      "Default": "\\"what\\" 1",
      "Type": "Choice",
    },
    "{ [\\"value\\"]: w, [\${\\"a\\"}\${\\"b\\"}]: v }": Object {
      "InputPath": "$.value['yy']['value']",
      "Next": "1__{ [\\"value\\"]: w, [\${\\"a\\"}\${\\"b\\"}]: v }",
      "ResultPath": "$.w",
      "Type": "Pass",
    },
    "{ a, bb: { value: b, [\${\\"a\\"}\${\\"b\\"}]: r }, c = \\"what\\", m = c, arr: [ d, unde": Object {
      "InputPath": "$$.Execution.Input['a']",
      "Next": "{ value: b, [\${\\"a\\"}\${\\"b\\"}]: r }",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "{ aa, bb: [ cc ] }": Object {
      "InputPath": "$.heap6.arr[0]['aa']",
      "Next": "cc",
      "ResultPath": "$.aa",
      "Type": "Pass",
    },
    "{ h, j: [ l ] }": Object {
      "InputPath": "$.heap11[0]['h']",
      "Next": "l",
      "ResultPath": "$.h",
      "Type": "Pass",
    },
    "{ value: b, [\${\\"a\\"}\${\\"b\\"}]: r }": Object {
      "InputPath": "$$.Execution.Input['bb']['value']",
      "Next": "1__{ value: b, [\${\\"a\\"}\${\\"b\\"}]: r }",
      "ResultPath": "$.b",
      "Type": "Pass",
    },
    "{z,yy:{[\\"value\\"]:w,[\${\\"a\\"}\${\\"b\\"}]:v},x,rra:[s,undefined,u,...tserRra],rra2:": Object {
      "InputPath": "$.value['z']",
      "Next": "{ [\\"value\\"]: w, [\${\\"a\\"}\${\\"b\\"}]: v }",
      "ResultPath": "$.z",
      "Type": "Pass",
    },
  },
}
`;

exports[`duplicate nodes 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "return \\"hello world\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return \\"hello world\\"": Object {
      "End": true,
      "Result": "hello world",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`filter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "$SFN.waitFor(1)": Object {
      "Next": "return itemKey === hi\${key}",
      "Seconds": 1,
      "Type": "Wait",
    },
    "1__arr1 = arr.filter(function({value})).filter(function({value})).filter(fu": Object {
      "InputPath": "$.heap0",
      "Next": "arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.arr1",
      "Type": "Pass",
    },
    "1__arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "InputPath": "$.heap5",
      "Next": "return {arr1: arr1, arr2: arr2}",
      "ResultPath": "$.arr2",
      "Type": "Pass",
    },
    "1__return itemKey === hi\${key}": Object {
      "InputPath": "$.heap3",
      "Next": "handleResult__arr1 = arr.filter(function({value})).filter(function({value})",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__return itemKey === hi\${key} 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.itemKey",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.heap2.string",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "StringEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "BooleanEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "NumericEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "assignTrue__1__return itemKey === hi\${key} 1",
        },
      ],
      "Default": "assignFalse__1__return itemKey === hi\${key} 1",
      "Type": "Choice",
    },
    "1__return x <= index || first === x": Object {
      "InputPath": "$.heap7",
      "Next": "handleResult__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "{ arr, key }",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "[ first ]": Object {
      "InputPath": "$.heap4[0]",
      "Next": "return x <= index || first === x",
      "ResultPath": "$.first",
      "Type": "Pass",
    },
    "[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "ItemsPath": "$.heap4",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "index.$": "$$.Map.Item.Index",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap5",
      "ResultSelector": Object {
        "arr.$": "$",
        "arrStr": "[null",
      },
      "Type": "Map",
    },
    "arr1": Object {
      "InputPath": "$.heap0",
      "Next": "arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.arr1",
      "Type": "Pass",
    },
    "arr1 = arr.filter(function({value})).filter(function({value})).filter(funct": Object {
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
      "Parameters": Object {
        "arr.$": "$.arr[?(@['value']<=3)][?(@['value']<=$.key)]",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "arr2": Object {
      "InputPath": "$.heap5",
      "Next": "return {arr1: arr1, arr2: arr2}",
      "ResultPath": "$.arr2",
      "Type": "Pass",
    },
    "arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Next": "[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Result": Array [
        4,
        3,
        2,
        1,
      ],
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignFalse__1__return itemKey === hi\${key} 1": Object {
      "Next": "1__return itemKey === hi\${key}",
      "Result": false,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignFalse__return x <= index || first === x": Object {
      "Next": "1__return x <= index || first === x",
      "Result": false,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignTrue__1__return itemKey === hi\${key} 1": Object {
      "Next": "1__return itemKey === hi\${key}",
      "Result": true,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignTrue__return x <= index || first === x": Object {
      "Next": "1__return x <= index || first === x",
      "Result": true,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "check__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "function(x, index, [first])",
          "Variable": "$.heap5.arr[0]",
        },
      ],
      "Default": "end__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Type": "Choice",
    },
    "check__arr1 = arr.filter(function({value})).filter(function({value})).filte": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "item",
          "Variable": "$.heap0.arr[0]",
        },
      ],
      "Default": "end__arr1 = arr.filter(function({value})).filter(function({value})).filter(",
      "Type": "Choice",
    },
    "end__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Next": "set__end__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap5.arrStr))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "end__arr1 = arr.filter(function({value})).filter(function({value})).filter(": Object {
      "Next": "set__end__arr1 = arr.filter(function({value})).filter(function({value})).fi",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap0.arrStr))",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "first": Object {
      "InputPath": "$.heap4[0]",
      "Next": "return x <= index || first == x",
      "ResultPath": "$.first",
      "Type": "Pass",
    },
    "function(x, index, [first])": Object {
      "InputPath": "$.heap5.arr[0].item",
      "Next": "index",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "handleResult__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap6",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap6",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.heap6",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.heap6",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.heap6",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.heap6",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.heap6",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "predicateTrue__handleResult__[4, 3, 2, 1].filter(function(x, index, [first]",
        },
      ],
      "Default": "tail__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Type": "Choice",
    },
    "handleResult__arr1 = arr.filter(function({value})).filter(function({value})": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap1",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap1",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.heap1",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.heap1",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.heap1",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.heap1",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.heap1",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "predicateTrue__handleResult__arr1 = arr.filter(function({value})).filter(fu",
        },
      ],
      "Default": "tail__arr1 = arr.filter(function({value})).filter(function({value})).filter",
      "Type": "Choice",
    },
    "index": Object {
      "InputPath": "$.heap5.arr[0].index",
      "Next": "first",
      "ResultPath": "$.index",
      "Type": "Pass",
    },
    "item": Object {
      "InputPath": "$.heap0.arr[0]",
      "Next": "{key:itemKey} = item",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "key": Object {
      "InputPath": "$$.Execution.Input['key']",
      "Next": "arr1 = arr.filter(function({value})).filter(function({value})).filter(funct",
      "ResultPath": "$.key",
      "Type": "Pass",
    },
    "predicateTrue__handleResult__[4, 3, 2, 1].filter(function(x, index, [first]": Object {
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "arr.$": "$.heap5.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap5.arrStr, States.JsonToString($.heap5.arr[0].item))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "predicateTrue__handleResult__arr1 = arr.filter(function({value})).filter(fu": Object {
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
      "Parameters": Object {
        "arr.$": "$.heap0.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap0.arrStr, States.JsonToString($.heap0.arr[0]))",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "return itemKey === hi\${key}": Object {
      "Next": "1__return itemKey === hi\${key} 1",
      "Parameters": Object {
        "string.$": "States.Format('hi{}',$.key)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return x <= index || first === x": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__return x <= index || first === x",
          "Or": Array [
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.x",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "StringLessThanEqualsPath": "$.index",
                          "Variable": "$.x",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "IsNull": true,
                          "Variable": "$$.Execution.Id",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "NumericLessThanEqualsPath": "$.index",
                          "Variable": "$.x",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.first",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsNull": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "IsNull": true,
                          "Variable": "$.x",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "StringEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "BooleanEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "NumericEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
      "Default": "assignFalse__return x <= index || first === x",
      "Type": "Choice",
    },
<<<<<<< HEAD
    "tail__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()": Object {
      "InputPath": "$.heap8[1:]",
      "Next": "hasNext__1__map = [{aa: \\"a\\", bb: [\\"b\\"]}].map(function({aa,bb:[cc]})).join()",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "tail__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])": Object {
      "InputPath": "$.heap11[1:]",
      "Next": "hasNext__for({h,j:[l]} of [{h: \\"a\\", j: [\\"b\\"]}])",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "tr = message": Object {
      "InputPath": "$.message",
      "Next": "return {prop: \`abcdefarrRest[0]rm\`, var: \`zwvxsuttserRra[0]\`, map: map, for",
      "ResultPath": "$.tr",
      "Type": "Pass",
    },
    "try": Object {
      "Next": "catch__try",
      "Result": Object {
        "message": "hi",
      },
      "ResultPath": "$.fnl_tmp_1",
      "Type": "Pass",
    },
    "tserRra": Object {
      "InputPath": "$.value['rra'][3:]",
      "Next": "t = \\"sir\\"",
      "ResultPath": "$.tserRra",
      "Type": "Pass",
    },
    "u": Object {
      "InputPath": "$.value['rra'][2]",
      "Next": "tserRra",
      "ResultPath": "$.u",
      "Type": "Pass",
    },
    "v": Object {
      "InputPath": "$.value['yy']['ab']",
      "Next": "x = \\"what\\"",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "value": Object {
      "InputPath": "$$.Execution.Input['value']",
      "Next": "{z,yy:{[\\"value\\"]:w,[\`ab\`]:v},x,rra:[s,undefined,u,...tserRra],rra2:[t]} = v",
      "ResultPath": "$.value",
      "Type": "Pass",
    },
    "value__c = \\"what\\"": Object {
      "InputPath": "$$.Execution.Input['c']",
      "Next": "c",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "value__f = \\"sir\\"": Object {
      "InputPath": "$$.Execution.Input['arr2'][0]",
      "Next": "f",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "value__m = c": Object {
      "InputPath": "$$.Execution.Input['m']",
      "Next": "m",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "value__t = \\"sir\\"": Object {
      "InputPath": "$.value['rra2'][0]",
      "Next": "t",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "value__x = \\"what\\"": Object {
      "InputPath": "$.value['x']",
      "Next": "x",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap3",
      "Next": "[ s, undefined, u, tserRra ]",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x = \\"what\\"": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "value__x = \\"what\\"",
          "Variable": "$.value['x']",
        },
      ],
      "Default": "\\"what\\" 1",
      "Type": "Choice",
    },
    "{ [\\"value\\"]: w, [\`ab\`]: v }": Object {
      "InputPath": "$.value['yy']['value']",
      "Next": "v",
      "ResultPath": "$.w",
      "Type": "Pass",
    },
    "{ a, bb: { value: b, [\`ab\`]: r }, c = \\"what\\", m = c, arr: [ d, undefined, e": Object {
      "InputPath": "$$.Execution.Input['a']",
      "Next": "{ value: b, [\`ab\`]: r }",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "{ aa, bb: [ cc ] }": Object {
      "InputPath": "$.heap6.arr[0]['aa']",
      "Next": "cc",
      "ResultPath": "$.aa",
      "Type": "Pass",
    },
    "{ h, j: [ l ] }": Object {
      "InputPath": "$.heap11[0]['h']",
      "Next": "l",
      "ResultPath": "$.h",
      "Type": "Pass",
    },
    "tail__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "InputPath": "$.heap5.arr[1:]",
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.heap5.arr",
      "Type": "Pass",
    },
    "tail__arr1 = arr.filter(function({value})).filter(function({value})).filter": Object {
      "InputPath": "$.heap0.arr[1:]",
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
      "ResultPath": "$.heap0.arr",
      "Type": "Pass",
    },
    "{ arr, key }": Object {
      "InputPath": "$$.Execution.Input['arr']",
      "Next": "key",
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "{key:itemKey} = item": Object {
      "InputPath": "$.item['key']",
      "Next": "$SFN.waitFor(1)",
      "ResultPath": "$.itemKey",
      "Type": "Pass",
    },
  },
}
`;

exports[`filter 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "$SFN.waitFor(1)": Object {
      "Next": "return itemKey == \`hikey\`",
      "Seconds": 1,
      "Type": "Wait",
    },
    "1__return itemKey == \`hikey\`": Object {
      "InputPath": "$.heap3",
      "Next": "handleResult__arr1 = arr.filter(function({value})).filter(function({value})",
      "ResultPath": "$.heap1",
=======
    "1__a = \${a}c\${c}": Object {
      "InputPath": "$.heap2.string",
      "Next": "c = \${c}1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}n\${arr[0]}": Object {
      "InputPath": "$.heap0.string",
      "Next": "arr = arr.slice(1)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__c = \${c}1": Object {
      "InputPath": "$.heap3.string",
      "Next": "if(c === \\"1\\")",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "1__c = \${c}1 1": Object {
      "InputPath": "$.heap1.string",
      "Next": "if(c === \\"1\\")",
      "ResultPath": "$.c",
>>>>>>> main
      "Type": "Pass",
    },
    "1__return itemKey == \`hikey\` 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.itemKey",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsNull": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "IsNull": true,
                      "Variable": "$.heap2.string",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "StringEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "BooleanEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.itemKey",
                    },
                    Object {
                      "NumericEqualsPath": "$.heap2.string",
                      "Variable": "$.itemKey",
                    },
                  ],
                },
              ],
            },
          ],
<<<<<<< HEAD
          "Next": "assignTrue__1__return itemKey == \`hikey\` 1",
=======
          "Next": "a = \${a}n\${arr[0]}",
>>>>>>> main
        },
      ],
      "Default": "assignFalse__1__return itemKey == \`hikey\` 1",
      "Type": "Choice",
    },
    "1__return x <= index || first == x": Object {
      "InputPath": "$.heap7",
      "Next": "handleResult__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "{ arr, key }",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "ItemsPath": "$.heap4",
=======
    "a = \\"\\"": Object {
      "Next": "for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \${a}c\${c}": Object {
      "Next": "1__a = \${a}c\${c}",
      "Parameters": Object {
        "string.$": "States.Format('{}c{}',$.a,$.c)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "a = \${a}n\${arr[0]}": Object {
      "Next": "1__a = \${a}n\${arr[0]}",
      "Parameters": Object {
        "string.$": "States.Format('{}n{}',$.a,$.arr[0])",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "arr = arr.slice(1)": Object {
      "InputPath": "$.arr[1:]",
      "Next": "1__for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "c = \\"\\"": Object {
      "Next": "if(c === \\"1\\")",
      "Result": "",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c = \${c}1": Object {
      "Next": "1__c = \${c}1",
      "Parameters": Object {
        "string.$": "States.Format('{}1',$.c)",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "c = \${c}1 1": Object {
      "Next": "1__c = \${c}1 1",
      "Parameters": Object {
        "string.$": "States.Format('{}1',$.c)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "for(arr = input.arr;arr[0];arr = arr.slice(1))": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "if(c === \\"1\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.c",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.c",
                },
                Object {
                  "StringEquals": "1",
                  "Variable": "$.c",
                },
              ],
            },
          ],
          "Next": "c = \${c}1 1",
        },
      ],
      "Default": "if(c === \\"111\\")",
      "Type": "Choice",
    },
    "if(c === \\"111\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.c",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.c",
                },
                Object {
                  "StringEquals": "111",
                  "Variable": "$.c",
                },
              ],
            },
          ],
          "Next": "return a",
        },
      ],
      "Default": "a = \${a}c\${c}",
      "Type": "Choice",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`for control and assignment 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \${a}n\${i}": Object {
      "InputPath": "$.heap0.string",
      "Next": "tail__for(i in input.arr)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}n\${i} 1": Object {
      "InputPath": "$.heap2.string",
      "Next": "tail__for(i in input.arr) 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__for(i in input.arr)": Object {
      "ItemsPath": "$.heap1",
>>>>>>> main
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "index.$": "$$.Map.Item.Index",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap5",
      "ResultSelector": Object {
        "arr.$": "$",
        "arrStr": "[null",
      },
      "Type": "Map",
    },
    "arr1": Object {
      "InputPath": "$.heap0",
      "Next": "arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.arr1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "arr1 = arr.filter(function({value})).filter(function({value})).filter(funct": Object {
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
=======
    "a = \${a}n\${i}": Object {
      "Next": "1__a = \${a}n\${i}",
>>>>>>> main
      "Parameters": Object {
        "arr.$": "$.arr[?(@['value']<=3)][?(@['value']<=$.key)]",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "arr2": Object {
      "InputPath": "$.heap5",
      "Next": "return {arr1: arr1, arr2: arr2}",
      "ResultPath": "$.arr2",
      "Type": "Pass",
    },
    "arr2 = [4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Next": "[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Result": Array [
        4,
        3,
        2,
        1,
      ],
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignFalse__1__return itemKey == \`hikey\` 1": Object {
      "Next": "1__return itemKey == \`hikey\`",
      "Result": false,
      "ResultPath": "$.heap3",
=======
    "a = \${a}n\${i} 1": Object {
      "Next": "1__a = \${a}n\${i} 1",
      "Parameters": Object {
        "string.$": "States.Format('{}n{}',$.a,$.i)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "assignValue__i": Object {
      "InputPath": "$.heap1[0].item",
      "Next": "if(i === \\"2\\")",
      "ResultPath": "$.0__i",
      "Type": "Pass",
    },
    "assignValue__i 1": Object {
      "InputPath": "$.heap3[0].item",
      "Next": "if(i !== \\"2\\")",
      "ResultPath": "$.0__i",
>>>>>>> main
      "Type": "Pass",
    },
    "assignFalse__return x <= index || first == x": Object {
      "Next": "1__return x <= index || first == x",
      "Result": false,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignTrue__1__return itemKey == \`hikey\` 1": Object {
      "Next": "1__return itemKey == \`hikey\`",
      "Result": true,
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "assignTrue__return x <= index || first == x": Object {
      "Next": "1__return x <= index || first == x",
      "Result": true,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "check__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "function(x, index, [first])",
          "Variable": "$.heap5.arr[0]",
        },
      ],
      "Default": "end__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Type": "Choice",
    },
    "check__arr1 = arr.filter(function({value})).filter(function({value})).filte": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "item",
          "Variable": "$.heap0.arr[0]",
        },
      ],
      "Default": "end__arr1 = arr.filter(function({value})).filter(function({value})).filter(",
      "Type": "Choice",
    },
    "end__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "Next": "set__end__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap5.arrStr))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "end__arr1 = arr.filter(function({value})).filter(function({value})).filter(": Object {
      "Next": "set__end__arr1 = arr.filter(function({value})).filter(function({value})).fi",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap0.arrStr))",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "first": Object {
      "InputPath": "$.heap4[0]",
<<<<<<< HEAD
      "Next": "return x <= index || first == x",
      "ResultPath": "$.first",
      "Type": "Pass",
    },
    "function(x, index, [first])": Object {
      "InputPath": "$.heap5.arr[0].item",
      "Next": "index",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "handleResult__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
=======
      "Next": "if(i === 2)",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "if(i !== \\"2\\")": Object {
      "Choices": Array [
        Object {
          "Next": "tail__for(i in input.arr) 1",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.i",
              },
              Object {
                "And": Array [
                  Object {
                    "IsString": true,
                    "Variable": "$.i",
                  },
                  Object {
                    "StringEquals": "2",
                    "Variable": "$.i",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "a = \${a}n\${i} 1",
      "Type": "Choice",
    },
    "if(i === \\"2\\")": Object {
>>>>>>> main
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap6",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap6",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.heap6",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.heap6",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.heap6",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.heap6",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.heap6",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.heap6",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "predicateTrue__handleResult__[4, 3, 2, 1].filter(function(x, index, [first]",
        },
      ],
<<<<<<< HEAD
      "Default": "tail__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Type": "Choice",
    },
    "handleResult__arr1 = arr.filter(function({value})).filter(function({value})": Object {
=======
      "Default": "a = \${a}n\${i}",
      "Type": "Choice",
    },
    "if(i === 2)": Object {
>>>>>>> main
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap1",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap1",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.heap1",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.heap1",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.heap1",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.heap1",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.heap1",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.heap1",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "predicateTrue__handleResult__arr1 = arr.filter(function({value})).filter(fu",
        },
      ],
      "Default": "tail__arr1 = arr.filter(function({value})).filter(function({value})).filter",
      "Type": "Choice",
    },
    "index": Object {
      "InputPath": "$.heap5.arr[0].index",
      "Next": "first",
      "ResultPath": "$.index",
      "Type": "Pass",
    },
    "item": Object {
      "InputPath": "$.heap0.arr[0]",
      "Next": "{key:itemKey} = item",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "key": Object {
      "InputPath": "$$.Execution.Input['key']",
      "Next": "arr1 = arr.filter(function({value})).filter(function({value})).filter(funct",
      "ResultPath": "$.key",
      "Type": "Pass",
    },
    "predicateTrue__handleResult__[4, 3, 2, 1].filter(function(x, index, [first]": Object {
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "Parameters": Object {
        "arr.$": "$.heap5.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap5.arrStr, States.JsonToString($.heap5.arr[0].item))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "predicateTrue__handleResult__arr1 = arr.filter(function({value})).filter(fu": Object {
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
      "Parameters": Object {
        "arr.$": "$.heap0.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap0.arrStr, States.JsonToString($.heap0.arr[0]))",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "return itemKey == \`hikey\`": Object {
      "Next": "1__return itemKey == \`hikey\` 1",
=======
  },
}
`;

exports[`for in 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__await func({n: \${input.arr[i]}, id: input.id})": Object {
      "Next": "tail__for(i in input.arr)",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('hi{}',$.key)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "return x <= index || first == x": Object {
      "Choices": Array [
        Object {
          "Next": "assignTrue__return x <= index || first == x",
          "Or": Array [
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.x",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "StringLessThanEqualsPath": "$.index",
                          "Variable": "$.x",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "IsNull": true,
                          "Variable": "$$.Execution.Id",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.x",
                        },
                        Object {
                          "NumericLessThanEqualsPath": "$.index",
                          "Variable": "$.x",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
            Object {
              "And": Array [
                Object {
                  "IsPresent": true,
                  "Variable": "$.first",
                },
                Object {
                  "Or": Array [
                    Object {
                      "And": Array [
                        Object {
                          "IsNull": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "IsNull": true,
                          "Variable": "$.x",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsString": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "StringEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsBoolean": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "BooleanEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                    Object {
                      "And": Array [
                        Object {
                          "IsNumeric": true,
                          "Variable": "$.first",
                        },
                        Object {
                          "NumericEqualsPath": "$.x",
                          "Variable": "$.first",
                        },
                      ],
                    },
                  ],
                },
              ],
            },
          ],
        },
      ],
      "Default": "assignFalse__return x <= index || first == x",
      "Type": "Choice",
    },
=======
>>>>>>> 60eab991b43e33e91fb61ef7af3ba1760e34c612
    "return {arr1: arr1, arr2: arr2}": Object {
      "End": true,
=======
    "1__await func({n: \${input.arr[i]}, id: input.id}) 1": Object {
      "Next": "1__await func({n: \${input.arr[i]}, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap0)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__await func({n: \${input.arr[i]}, id: input.id}) 1 1": Object {
      "Next": "await func({n: i, id: input.id})",
>>>>>>> main
      "Parameters": Object {
        "arr1.$": "$.arr1",
        "arr2.$": "$.arr2",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "set__end__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "InputPath": "$.heap5.result[1:]",
      "Next": "arr2",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "set__end__arr1 = arr.filter(function({value})).filter(function({value})).fi": Object {
      "InputPath": "$.heap0.result[1:]",
      "Next": "arr1",
      "ResultPath": "$.heap0",
=======
    "1__await func({n: \${input.arr[i]}, id: input.id}) 1 2": Object {
      "Next": "1__await func({n: \${input.arr[i]}, id: input.id}) 1 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap4)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "1__await func({n: \${input.arr[j]}, id: input.id})": Object {
      "Next": "await func({n: j, id: input.id}) 1",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap9.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap10",
      "Type": "Task",
    },
    "1__await func({n: \${input.arr[j]}, id: input.id}) 1": Object {
      "Next": "1__await func({n: \${input.arr[j]}, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap8)",
      },
      "ResultPath": "$.heap9",
>>>>>>> main
      "Type": "Pass",
    },
    "tail__[4, 3, 2, 1].filter(function(x, index, [first]))": Object {
      "InputPath": "$.heap5.arr[1:]",
      "Next": "check__[4, 3, 2, 1].filter(function(x, index, [first]))",
      "ResultPath": "$.heap5.arr",
      "Type": "Pass",
    },
    "tail__arr1 = arr.filter(function({value})).filter(function({value})).filter": Object {
      "InputPath": "$.heap0.arr[1:]",
      "Next": "check__arr1 = arr.filter(function({value})).filter(function({value})).filte",
      "ResultPath": "$.heap0.arr",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "{ arr, key }": Object {
      "InputPath": "$$.Execution.Input['arr']",
      "Next": "key",
      "ResultPath": "$.arr",
=======
    "assignValue__i": Object {
      "InputPath": "$.heap3[0].item",
      "Next": "await func({n: \${input.arr[i]}, id: input.id})",
      "ResultPath": "$.0__i",
>>>>>>> main
      "Type": "Pass",
    },
    "{key:itemKey} = item": Object {
      "InputPath": "$.item['key']",
      "Next": "$SFN.waitFor(1)",
      "ResultPath": "$.itemKey",
      "Type": "Pass",
    },
<<<<<<< HEAD
  },
}
`;

exports[`for 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \`acc\`": Object {
      "InputPath": "$.heap2.string",
      "Next": "c = \`c1\`",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \`anarr[0]\`": Object {
      "InputPath": "$.heap0.string",
      "Next": "arr = arr.slice(1)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__c = \`c1\`": Object {
      "InputPath": "$.heap3.string",
      "Next": "if(c == \\"1\\")",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "1__c = \`c1\` 1": Object {
      "InputPath": "$.heap1.string",
      "Next": "if(c == \\"1\\")",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "1__for(arr = input.arr;arr[0];arr = arr.slice(1))": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.arr[0]",
            },
            Object {
              "IsNull": false,
              "Variable": "$.arr[0]",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.arr[0]",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.arr[0]",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.arr[0]",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.arr[0]",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.arr[0]",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.arr[0]",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.arr[0]",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.arr[0]",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "a = \`anarr[0]\`",
        },
      ],
      "Default": "c = \\"\\"",
      "Type": "Choice",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
=======
    "assignValue__j": Object {
      "InputPath": "$.heap12[0].item",
      "Next": "await func({n: \${input.arr[i]}, id: input.id}) 1",
      "ResultPath": "$.0__j",
      "Type": "Pass",
    },
    "await func({n: \${input.arr[i]}, id: input.id})": Object {
      "InputPath": "$.0__i",
      "Next": "1__await func({n: \${input.arr[i]}, id: input.id}) 1",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "await func({n: \${input.arr[i]}, id: input.id}) 1": Object {
      "InputPath": "$.0__i",
      "Next": "1__await func({n: \${input.arr[i]}, id: input.id}) 1 2",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "await func({n: \${input.arr[j]}, id: input.id})": Object {
      "InputPath": "$.0__j",
      "Next": "1__await func({n: \${input.arr[j]}, id: input.id}) 1",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "await func({n: i, id: input.id})": Object {
      "Next": "await func({n: \${input.arr[j]}, id: input.id})",
>>>>>>> main
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \`acc\`": Object {
      "Next": "1__a = \`acc\`",
      "Parameters": Object {
        "string.$": "States.Format('{}c{}',$.a,$.c)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "a = \`anarr[0]\`": Object {
      "Next": "1__a = \`anarr[0]\`",
      "Parameters": Object {
        "string.$": "States.Format('{}n{}',$.a,$.arr[0])",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "arr = arr.slice(1)": Object {
      "InputPath": "$.arr[1:]",
      "Next": "1__for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "c = \\"\\"": Object {
      "Next": "if(c == \\"1\\")",
      "Result": "",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c = \`c1\`": Object {
      "Next": "1__c = \`c1\`",
      "Parameters": Object {
        "string.$": "States.Format('{}1',$.c)",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "c = \`c1\` 1": Object {
      "Next": "1__c = \`c1\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}1',$.c)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "for(arr = input.arr;arr[0];arr = arr.slice(1))": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(arr = input.arr;arr[0];arr = arr.slice(1))",
      "ResultPath": "$.arr",
      "Type": "Pass",
    },
    "if(c == \\"1\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.c",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.c",
                },
                Object {
                  "StringEquals": "1",
                  "Variable": "$.c",
                },
              ],
            },
          ],
          "Next": "c = \`c1\` 1",
        },
      ],
      "Default": "if(c == \\"111\\")",
      "Type": "Choice",
    },
    "if(c == \\"111\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.c",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.c",
                },
                Object {
                  "StringEquals": "111",
                  "Variable": "$.c",
                },
              ],
            },
          ],
          "Next": "return a",
        },
      ],
      "Default": "a = \`acc\`",
      "Type": "Choice",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`for control and assignment 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "1__a = \`ani\`": Object {
=======
    "1__a = \${a}\${i}": Object {
>>>>>>> main
      "InputPath": "$.heap0.string",
      "Next": "tail__for(i in input.arr)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__a = \`ani\` 1": Object {
=======
    "1__a = \${a}\${i} 1": Object {
>>>>>>> main
      "InputPath": "$.heap2.string",
      "Next": "tail__for(i in input.arr) 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__for(i in input.arr)": Object {
      "ItemsPath": "$.heap1",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__for(i in input.arr)",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap1",
      "Type": "Map",
    },
    "1__for(i in input.arr) 1": Object {
      "ItemsPath": "$.heap3",
      "Iterator": Object {
        "StartAt": "Default 1",
        "States": Object {
          "Default 1": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__for(i in input.arr) 1",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap3",
      "Type": "Map",
=======
    "1__a = \${a}\${i} 2": Object {
      "InputPath": "$.heap5.string",
      "Next": "tail__for(i of await func()) 1",
      "ResultPath": "$.a",
      "Type": "Pass",
>>>>>>> main
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "for(i in input.arr)",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "a = \`ani\`": Object {
      "Next": "1__a = \`ani\`",
=======
    "a = \${a}\${i}": Object {
      "Next": "1__a = \${a}\${i}",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{}n{}',$.a,$.i)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "a = \`ani\` 1": Object {
      "Next": "1__a = \`ani\` 1",
=======
    "a = \${a}\${i} 1": Object {
      "Next": "1__a = \${a}\${i} 1",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{}n{}',$.a,$.i__1)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "assignValue__i": Object {
      "InputPath": "$.heap1[0].item",
      "Next": "if(i == \\"2\\")",
      "ResultPath": "$.0__i",
=======
    "a = \${a}\${i} 2": Object {
      "Next": "1__a = \${a}\${i} 2",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.i)",
      },
      "ResultPath": "$.heap5",
>>>>>>> main
      "Type": "Pass",
    },
    "assignValue__i 1": Object {
      "InputPath": "$.heap3[0].item",
      "Next": "if(i != \\"2\\")",
      "ResultPath": "$.0__i__1",
      "Type": "Pass",
    },
    "for(i in input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(i in input.arr)",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "for(i in input.arr) 1": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(i in input.arr) 1",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "for(i of input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "hasNext__for(i in input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap1[0]",
        },
      ],
      "Default": "for(i in input.arr) 1",
      "Type": "Choice",
    },
    "hasNext__for(i in input.arr) 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 1",
          "Variable": "$.heap3[0]",
        },
      ],
      "Default": "for(i of input.arr)",
      "Type": "Choice",
    },
    "hasNext__for(i of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 2",
          "Variable": "$.heap4[0]",
        },
      ],
      "Default": "return \\"woops\\"",
      "Type": "Choice",
    },
    "i": Object {
<<<<<<< HEAD
      "InputPath": "$.heap1[0].index",
      "Next": "assignValue__i",
=======
      "InputPath": "$.heap1[0]",
      "Next": "a = \${a}\${i}",
>>>>>>> main
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 1": Object {
<<<<<<< HEAD
      "InputPath": "$.heap3[0].index",
      "Next": "assignValue__i 1",
      "ResultPath": "$.i__1",
      "Type": "Pass",
    },
    "i 2": Object {
      "InputPath": "$.heap4[0]",
      "Next": "if(i == 2)",
      "ResultPath": "$.i__2",
=======
      "InputPath": "$.heap3[0]",
      "Next": "a = \${a}\${i} 1",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 2": Object {
      "InputPath": "$.heap6[0]",
      "Next": "a = \${a}\${i} 2",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "return \\"madeit\\"": Object {
      "End": true,
      "Result": "madeit",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "tail__for(i of [1, 2, 3])": Object {
      "InputPath": "$.heap1[1:]",
      "Next": "hasNext__for(i of [1, 2, 3])",
      "ResultPath": "$.heap1",
>>>>>>> main
      "Type": "Pass",
    },
    "if(i != \\"2\\")": Object {
      "Choices": Array [
        Object {
          "Next": "tail__for(i in input.arr) 1",
          "Not": Object {
            "And": Array [
              Object {
                "IsPresent": true,
                "Variable": "$.i__1",
              },
              Object {
                "And": Array [
                  Object {
                    "IsString": true,
                    "Variable": "$.i__1",
                  },
                  Object {
                    "StringEquals": "2",
                    "Variable": "$.i__1",
                  },
                ],
              },
            ],
          },
        },
      ],
      "Default": "a = \`ani\` 1",
      "Type": "Choice",
    },
    "if(i == \\"2\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.i",
                },
                Object {
                  "StringEquals": "2",
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "for(i in input.arr) 1",
        },
      ],
      "Default": "a = \`ani\`",
      "Type": "Choice",
    },
    "if(i == 2)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i__2",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i__2",
                },
                Object {
                  "NumericEquals": 2,
                  "Variable": "$.i__2",
                },
              ],
            },
          ],
          "Next": "return a",
        },
      ],
      "Default": "tail__for(i of input.arr)",
      "Type": "Choice",
    },
    "return \\"woops\\"": Object {
      "End": true,
      "Result": "woops",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "tail__for(i in input.arr)": Object {
      "InputPath": "$.heap1[1:]",
      "Next": "hasNext__for(i in input.arr)",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "tail__for(i in input.arr) 1": Object {
      "InputPath": "$.heap3[1:]",
      "Next": "hasNext__for(i in input.arr) 1",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "tail__for(i of input.arr)": Object {
      "InputPath": "$.heap4[1:]",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
  },
}
`;

exports[`for in 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "1__await func({n: \`input.arr[i]\`, id: input.id})": Object {
      "Next": "tail__for(i in input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap1.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap2",
      "Type": "Task",
=======
    "\${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "Next": "1__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.heap14.string,$.heap16.string,$.heap18.string)",
      },
      "ResultPath": "$.heap19",
      "Type": "Pass",
    },
    "1__b = [\\"b\\"].map(function(v))": Object {
      "InputPath": "$.heap1",
      "Next": "c = [\\"c\\"].map(function(v))",
      "ResultPath": "$.b",
      "Type": "Pass",
>>>>>>> main
    },
    "1__await func({n: \`input.arr[i]\`, id: input.id}) 1": Object {
      "Next": "1__await func({n: \`input.arr[i]\`, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap0)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__await func({n: \`input.arr[i]\`, id: input.id}) 1 1": Object {
      "Next": "await func({n: i, id: input.id})",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap5.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap6",
      "Type": "Task",
    },
    "1__await func({n: \`input.arr[i]\`, id: input.id}) 1 2": Object {
      "Next": "1__await func({n: \`input.arr[i]\`, id: input.id}) 1 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap4)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__await func({n: \`input.arr[j]\`, id: input.id})": Object {
      "Next": "await func({n: j, id: input.id}) 1",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap9.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap10",
      "Type": "Task",
=======
    "1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "InputPath": "$.heap9",
      "Next": "return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "ResultPath": "$.d",
      "Type": "Pass",
>>>>>>> main
    },
    "1__await func({n: \`input.arr[j]\`, id: input.id}) 1": Object {
      "Next": "1__await func({n: \`input.arr[j]\`, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.heap8)",
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__for(i in input.arr)": Object {
      "ItemsPath": "$.heap3",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__for(i in input.arr)",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap3",
      "Type": "Map",
    },
    "1__for(i in input.arr) 1": Object {
      "ItemsPath": "$.heap14",
      "Iterator": Object {
        "StartAt": "Default 2",
        "States": Object {
          "Default 2": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__for(i in input.arr) 1",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap14",
      "Type": "Map",
    },
    "1__for(j in input.arr)": Object {
      "ItemsPath": "$.heap12",
      "Iterator": Object {
        "StartAt": "Default 1",
        "States": Object {
          "Default 1": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__for(j in input.arr)",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap12",
      "Type": "Map",
=======
    "1__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "End": true,
      "InputPath": "$.heap19.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return \${v}\${a}\${i}": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__b = [\\"b\\"].map(function(v)) 1",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return \${v}\${a}\${i} 1": Object {
      "InputPath": "$.heap6.string",
      "Next": "handleResult__1__c = [\\"c\\"].map(function(v)) 1",
      "ResultPath": "$.heap5.arr[0]",
      "Type": "Pass",
    },
    "1__return \${v}\${a}\${i} 2": Object {
      "InputPath": "$.heap11.string",
      "Next": "handleResult__1__d = await Promise.all([\\"d\\"].map(function(v))) 1",
      "ResultPath": "$.heap9.arr[0]",
      "Type": "Pass",
>>>>>>> main
    },
    "Initialize Functionless Context": Object {
      "Next": "for(i in input.arr)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "assignValue__i": Object {
      "InputPath": "$.heap3[0].item",
      "Next": "await func({n: \`input.arr[i]\`, id: input.id})",
      "ResultPath": "$.0__i",
      "Type": "Pass",
    },
    "assignValue__i 1": Object {
      "InputPath": "$.heap14[0].item",
      "Next": "j = \\"1\\"",
      "ResultPath": "$.0__i__1",
=======
    "a = \\"x\\"": Object {
      "Next": "b = [\\"b\\"].map(function(v))",
      "Result": "x",
      "ResultPath": "$.a",
>>>>>>> main
      "Type": "Pass",
    },
    "assignValue__j": Object {
      "InputPath": "$.heap12[0].item",
      "Next": "await func({n: \`input.arr[i]\`, id: input.id}) 1",
      "ResultPath": "$.0__j",
      "Type": "Pass",
    },
    "await func({n: \`input.arr[i]\`, id: input.id})": Object {
      "InputPath": "$.0__i",
      "Next": "1__await func({n: \`input.arr[i]\`, id: input.id}) 1",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "await func({n: \`input.arr[i]\`, id: input.id}) 1": Object {
      "InputPath": "$.0__i__1",
      "Next": "1__await func({n: \`input.arr[i]\`, id: input.id}) 1 2",
      "ResultPath": "$.heap4",
=======
    "append__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "Next": "tail__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}', $.heap14.string, $.heap13[0])",
      },
      "ResultPath": "$.heap14",
>>>>>>> main
      "Type": "Pass",
    },
    "await func({n: \`input.arr[j]\`, id: input.id})": Object {
      "InputPath": "$.0__j",
      "Next": "1__await func({n: \`input.arr[j]\`, id: input.id}) 1",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "await func({n: i, id: input.id})": Object {
      "Next": "await func({n: \`input.arr[j]\`, id: input.id})",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.i__1",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap7",
      "Type": "Task",
    },
    "await func({n: j, id: input.id})": Object {
      "Next": "tail__for(i in input.arr) 1",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.j",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap13",
      "Type": "Task",
    },
    "await func({n: j, id: input.id}) 1": Object {
      "Next": "tail__for(j in input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.j",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap11",
      "Type": "Task",
    },
    "for(i in input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(i in input.arr)",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "for(i in input.arr) 1": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(i in input.arr) 1",
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "for(j in input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "1__for(j in input.arr)",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "hasNext__for(i in input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap3[0]",
        },
      ],
      "Default": "for(i in input.arr) 1",
      "Type": "Choice",
    },
    "hasNext__for(i in input.arr) 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 1",
          "Variable": "$.heap14[0]",
        },
      ],
      "Default": "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},",
      "Type": "Choice",
    },
    "hasNext__for(j in input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "j",
          "Variable": "$.heap12[0]",
        },
      ],
      "Default": "await func({n: j, id: input.id})",
      "Type": "Choice",
    },
    "i": Object {
      "InputPath": "$.heap3[0].index",
      "Next": "assignValue__i",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 1": Object {
      "InputPath": "$.heap14[0].index",
      "Next": "assignValue__i 1",
      "ResultPath": "$.i__1",
      "Type": "Pass",
    },
    "item": Object {
      "InputPath": "$.heap15",
      "Next": "return item.Item.val.N",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},": Object {
      "Next": "item",
      "Parameters": Object {
        "ConsistentRead": true,
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap15",
      "Type": "Task",
    },
    "j": Object {
      "InputPath": "$.heap12[0].index",
      "Next": "assignValue__j",
      "ResultPath": "$.j",
      "Type": "Pass",
    },
    "j = \\"1\\"": Object {
      "Next": "for(j in input.arr)",
      "Result": "1",
      "ResultPath": "$.j",
      "Type": "Pass",
    },
    "return item.Item.val.N": Object {
      "End": true,
      "InputPath": "$.item.Item.val.N",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "tail__for(i in input.arr)": Object {
      "InputPath": "$.heap3[1:]",
      "Next": "hasNext__for(i in input.arr)",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "tail__for(i in input.arr) 1": Object {
      "InputPath": "$.heap14[1:]",
      "Next": "hasNext__for(i in input.arr) 1",
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "tail__for(j in input.arr)": Object {
      "InputPath": "$.heap12[1:]",
      "Next": "hasNext__for(j in input.arr)",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
  },
}
`;

exports[`for loops 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \`ai\`": Object {
      "InputPath": "$.heap0.string",
      "Next": "tail__for(i of [1, 2, 3])",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \`ai\` 1": Object {
      "InputPath": "$.heap2.string",
      "Next": "tail__for(i of input.arr)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \`ai\` 2": Object {
      "InputPath": "$.heap5.string",
      "Next": "tail__for(i of await func()) 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"x\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"x\\"": Object {
      "Next": "for(i of [1, 2, 3])",
      "Result": "x",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \`ai\`": Object {
      "Next": "1__a = \`ai\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.i)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "a = \`ai\` 1": Object {
      "Next": "1__a = \`ai\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.i__1)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "a = \`ai\` 2": Object {
      "Next": "1__a = \`ai\` 2",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.i__2)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "for(i of [1, 2, 3])": Object {
      "Next": "hasNext__for(i of [1, 2, 3])",
      "Result": Array [
        1,
        2,
        3,
      ],
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "for(i of await func())": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "for(i of await func()) 1",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap4",
      "Type": "Task",
    },
    "for(i of await func()) 1": Object {
      "InputPath": "$.heap4",
      "Next": "hasNext__for(i of await func()) 1",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "for(i of input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "hasNext__for(i of [1, 2, 3])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap1[0]",
        },
      ],
      "Default": "for(i of input.arr)",
      "Type": "Choice",
    },
<<<<<<< HEAD
=======
    "hasNext__c.join(\\"\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap15[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap16",
              },
            },
          ],
          "Next": "initValue__c.join(\\"\\")",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap15[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap16",
              },
            },
          ],
          "Next": "returnEmpty__c.join(\\"\\")",
        },
        Object {
          "IsPresent": true,
          "Next": "append__c.join(\\"\\")",
          "Variable": "$.heap15[0]",
        },
      ],
      "Default": "d.join(\\"\\")",
      "Type": "Choice",
    },
    "hasNext__d.join(\\"\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap17[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap18",
              },
            },
          ],
          "Next": "initValue__d.join(\\"\\")",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap17[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap18",
              },
            },
          ],
          "Next": "returnEmpty__d.join(\\"\\")",
        },
        Object {
          "IsPresent": true,
          "Next": "append__d.join(\\"\\")",
          "Variable": "$.heap17[0]",
        },
      ],
      "Default": "\${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "Type": "Choice",
    },
    "hasNext__for(i of [1, 2, 3])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap3[0]",
        },
      ],
      "Default": "return \\"boo\\"",
      "Type": "Choice",
    },
>>>>>>> main
    "hasNext__for(i of await func()) 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 2",
          "Variable": "$.heap6[0]",
        },
      ],
      "Default": "return \\"madeit\\"",
      "Type": "Choice",
    },
    "hasNext__for(i of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 1",
<<<<<<< HEAD
          "Variable": "$.heap3[0]",
=======
          "Variable": "$.heap7[0]",
        },
      ],
      "Default": "return \\"boo\\" 1",
      "Type": "Choice",
    },
    "hasNext__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap13[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap14",
              },
            },
          ],
          "Next": "initValue__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap13[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap14",
              },
            },
          ],
          "Next": "returnEmpty__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
        },
        Object {
          "IsPresent": true,
          "Next": "append__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
          "Variable": "$.heap13[0]",
>>>>>>> main
        },
      ],
      "Default": "for(i of await func())",
      "Type": "Choice",
    },
    "i": Object {
<<<<<<< HEAD
      "InputPath": "$.heap1[0]",
      "Next": "a = \`ai\`",
=======
      "InputPath": "$.heap3[0]",
      "Next": "if(i === 3)",
>>>>>>> main
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 1": Object {
<<<<<<< HEAD
      "InputPath": "$.heap3[0]",
      "Next": "a = \`ai\` 1",
      "ResultPath": "$.i__1",
      "Type": "Pass",
    },
    "i 2": Object {
      "InputPath": "$.heap6[0]",
      "Next": "a = \`ai\` 2",
      "ResultPath": "$.i__2",
      "Type": "Pass",
    },
    "return \\"madeit\\"": Object {
      "End": true,
      "Result": "madeit",
      "ResultPath": "$",
      "Type": "Pass",
=======
      "InputPath": "$.heap7[0]",
      "Next": "if(i === 3) 1",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 2": Object {
      "InputPath": "$.heap12[0]",
      "Next": "if(i === 3) 2",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "if(i === 3)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "return \${v}\${a}\${i}",
        },
      ],
      "Default": "tail__for(i of [1, 2, 3])",
      "Type": "Choice",
    },
    "if(i === 3) 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "return \${v}\${a}\${i} 1",
        },
      ],
      "Default": "tail__for(i of input.arr)",
      "Type": "Choice",
    },
    "if(i === 3) 2": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "return \${v}\${a}\${i} 2",
        },
      ],
      "Default": "tail__for(i of await func()) 1",
      "Type": "Choice",
>>>>>>> main
    },
    "tail__for(i of [1, 2, 3])": Object {
      "InputPath": "$.heap1[1:]",
      "Next": "hasNext__for(i of [1, 2, 3])",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "tail__for(i of await func()) 1": Object {
      "InputPath": "$.heap6[1:]",
      "Next": "hasNext__for(i of await func()) 1",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "tail__for(i of input.arr)": Object {
      "InputPath": "$.heap3[1:]",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap3",
=======
    "initValue__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "InputPath": "$.heap13[0]",
      "Next": "tail__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "ResultPath": "$.heap14.string",
>>>>>>> main
      "Type": "Pass",
    },
  },
}
`;

exports[`for map conditional 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__b = [\\"b\\"].map(function(v))": Object {
      "Next": "check__1__b = [\\"b\\"].map(function(v))",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__c = [\\"c\\"].map(function(v))": Object {
      "Next": "check__1__c = [\\"c\\"].map(function(v))",
      "Parameters": Object {
        "arr.$": "$.heap4",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "Next": "check__1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "Parameters": Object {
        "arr.$": "$.heap8",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "1__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "End": true,
      "InputPath": "$.heap19.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return \`vai\`": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__b = [\\"b\\"].map(function(v))",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return \`vai\` 1": Object {
      "InputPath": "$.heap6.string",
      "Next": "handleResult__1__c = [\\"c\\"].map(function(v))",
      "ResultPath": "$.heap5.arr[0]",
      "Type": "Pass",
    },
    "1__return \`vai\` 2": Object {
      "InputPath": "$.heap11.string",
      "Next": "handleResult__1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "ResultPath": "$.heap9.arr[0]",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "Initialize Functionless Context": Object {
      "Next": "a = \\"x\\"",
=======
    "return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "InputPath": "$.b",
      "Next": "hasNext__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "return \${v}\${a}\${i}": Object {
      "Next": "1__return \${v}\${a}\${i}",
>>>>>>> main
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "\`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "Next": "1__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
=======
    "return \${v}\${a}\${i} 1": Object {
      "Next": "1__return \${v}\${a}\${i} 1",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.heap14.string,$.heap16.string,$.heap18.string)",
      },
      "ResultPath": "$.heap19",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "a = \\"x\\"": Object {
      "Next": "b = [\\"b\\"].map(function(v))",
      "Result": "x",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "append__c.join(\\"\\")": Object {
      "Next": "tail__c.join(\\"\\")",
=======
    "return \${v}\${a}\${i} 2": Object {
      "Next": "1__return \${v}\${a}\${i} 2",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{}{}', $.heap16.string, $.heap15[0])",
      },
      "ResultPath": "$.heap16",
      "Type": "Pass",
    },
    "append__d.join(\\"\\")": Object {
      "Next": "tail__d.join(\\"\\")",
      "Parameters": Object {
        "string.$": "States.Format('{}{}', $.heap18.string, $.heap17[0])",
      },
      "ResultPath": "$.heap18",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "append__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "Next": "tail__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}', $.heap14.string, $.heap13[0])",
      },
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "b": Object {
      "InputPath": "$.heap1",
      "Next": "c = [\\"c\\"].map(function(v))",
      "ResultPath": "$.b",
=======
    "returnEmpty__d.join(\\"\\")": Object {
      "Next": "\${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "Result": "",
      "ResultPath": "$.heap18.string",
      "Type": "Pass",
    },
    "returnEmpty__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "Next": "c.join(\\"\\")",
      "Result": "",
      "ResultPath": "$.heap14.string",
>>>>>>> main
      "Type": "Pass",
    },
    "b = [\\"b\\"].map(function(v))": Object {
      "Next": "1__b = [\\"b\\"].map(function(v))",
      "Result": Array [
        "b",
      ],
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "c": Object {
      "InputPath": "$.heap5",
      "Next": "d = await Promise.all([\\"d\\"].map(function(v)))",
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c = [\\"c\\"].map(function(v))": Object {
      "Next": "1__c = [\\"c\\"].map(function(v))",
      "Result": Array [
        "c",
      ],
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "c.join(\\"\\")": Object {
      "InputPath": "$.c",
      "Next": "hasNext__c.join(\\"\\")",
      "ResultPath": "$.heap15",
      "Type": "Pass",
    },
    "check__1__b = [\\"b\\"].map(function(v))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "v",
          "Variable": "$.heap1.arr[0]",
        },
      ],
      "Default": "end__1__b = [\\"b\\"].map(function(v))",
      "Type": "Choice",
    },
    "check__1__c = [\\"c\\"].map(function(v))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "v 1",
          "Variable": "$.heap5.arr[0]",
        },
      ],
      "Default": "end__1__c = [\\"c\\"].map(function(v))",
      "Type": "Choice",
    },
    "check__1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "v 2",
          "Variable": "$.heap9.arr[0]",
        },
      ],
      "Default": "end__1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "Type": "Choice",
    },
    "d": Object {
      "InputPath": "$.heap9",
      "Next": "return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "ResultPath": "$.d",
      "Type": "Pass",
    },
    "d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "Next": "1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "Result": Array [
        "d",
      ],
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "d.join(\\"\\")": Object {
      "InputPath": "$.d",
      "Next": "hasNext__d.join(\\"\\")",
      "ResultPath": "$.heap17",
      "Type": "Pass",
    },
    "end__1__b = [\\"b\\"].map(function(v))": Object {
      "Next": "set__end__1__b = [\\"b\\"].map(function(v))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "end__1__c = [\\"c\\"].map(function(v))": Object {
      "Next": "set__end__1__c = [\\"c\\"].map(function(v))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap5.arrStr))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "end__1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "Next": "set__end__1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap9.arrStr))",
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "for(i of [1, 2, 3])": Object {
      "Next": "hasNext__for(i of [1, 2, 3])",
      "Result": Array [
        1,
        2,
        3,
      ],
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "for(i of await func())": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "for(i of await func()) 1",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap10",
      "Type": "Task",
    },
    "for(i of await func()) 1": Object {
      "InputPath": "$.heap10",
      "Next": "hasNext__for(i of await func()) 1",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "for(i of input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "handleResult__1__b = [\\"b\\"].map(function(v))": Object {
      "Next": "check__1__b = [\\"b\\"].map(function(v))",
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "handleResult__1__c = [\\"c\\"].map(function(v))": Object {
      "Next": "check__1__c = [\\"c\\"].map(function(v))",
=======
    "tail__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}": Object {
      "InputPath": "$.heap13[1:]",
      "Next": "hasNext__return \${b.join(\\"\\")}\${c.join(\\"\\")}\${d.join(\\"\\")}",
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "v": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "for(i of [1, 2, 3])",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "v 1": Object {
      "InputPath": "$.heap5.arr[0]",
      "Next": "for(i of input.arr)",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "v 2": Object {
      "InputPath": "$.heap9.arr[0]",
      "Next": "for(i of await func())",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
  },
}
`;

exports[`for of 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__await func({n: \${i}, id: input.id})": Object {
      "Next": "tail__for(i of input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap0.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap1",
      "Type": "Task",
    },
    "1__await func({n: \${i}, id: input.id}) 1": Object {
      "Next": "await func({n: \${j}, id: input.id}) 1",
>>>>>>> main
      "Parameters": Object {
        "arr.$": "$.heap5.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap5.arrStr, States.JsonToString($.heap5.arr[0]))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "handleResult__1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "Next": "check__1__d = await Promise.all([\\"d\\"].map(function(v)))",
=======
    "1__await func({n: \${j}, id: input.id})": Object {
      "Next": "tail__for(i of input.arr) 1",
>>>>>>> main
      "Parameters": Object {
        "arr.$": "$.heap9.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap9.arrStr, States.JsonToString($.heap9.arr[0]))",
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "hasNext__c.join(\\"\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap15[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap16",
              },
            },
          ],
          "Next": "initValue__c.join(\\"\\")",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap15[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap16",
              },
            },
          ],
          "Next": "returnEmpty__c.join(\\"\\")",
        },
        Object {
          "IsPresent": true,
          "Next": "append__c.join(\\"\\")",
          "Variable": "$.heap15[0]",
        },
      ],
      "Default": "d.join(\\"\\")",
      "Type": "Choice",
=======
    "1__await func({n: \${j}, id: input.id}) 1": Object {
      "Next": "tail__for(j of input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap5.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap6",
      "Type": "Task",
>>>>>>> main
    },
    "hasNext__d.join(\\"\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap17[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap18",
              },
            },
          ],
          "Next": "initValue__d.join(\\"\\")",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap17[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap18",
              },
            },
          ],
          "Next": "returnEmpty__d.join(\\"\\")",
        },
        Object {
          "IsPresent": true,
          "Next": "append__d.join(\\"\\")",
          "Variable": "$.heap17[0]",
        },
      ],
      "Default": "\`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "Type": "Choice",
    },
    "hasNext__for(i of [1, 2, 3])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap3[0]",
        },
      ],
      "Default": "return \\"boo\\"",
      "Type": "Choice",
    },
    "hasNext__for(i of await func()) 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 2",
          "Variable": "$.heap12[0]",
        },
      ],
      "Default": "return \\"boo\\" 2",
      "Type": "Choice",
    },
    "hasNext__for(i of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 1",
          "Variable": "$.heap7[0]",
        },
      ],
      "Default": "return \\"boo\\" 1",
      "Type": "Choice",
    },
    "hasNext__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap13[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap14",
              },
            },
          ],
          "Next": "initValue__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap13[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap14",
              },
            },
          ],
          "Next": "returnEmpty__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
        },
        Object {
          "IsPresent": true,
          "Next": "append__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
          "Variable": "$.heap13[0]",
        },
      ],
      "Default": "c.join(\\"\\")",
      "Type": "Choice",
    },
    "i": Object {
      "InputPath": "$.heap3[0]",
      "Next": "if(i == 3)",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "i 1": Object {
      "InputPath": "$.heap7[0]",
      "Next": "if(i == 3) 1",
      "ResultPath": "$.i__1",
      "Type": "Pass",
    },
    "i 2": Object {
      "InputPath": "$.heap12[0]",
      "Next": "if(i == 3) 2",
      "ResultPath": "$.i__2",
      "Type": "Pass",
    },
    "if(i == 3)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i",
                },
              ],
            },
          ],
          "Next": "return \`vai\`",
        },
      ],
      "Default": "tail__for(i of [1, 2, 3])",
      "Type": "Choice",
    },
    "if(i == 3) 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i__1",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i__1",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i__1",
                },
              ],
            },
          ],
          "Next": "return \`vai\` 1",
        },
      ],
      "Default": "tail__for(i of input.arr)",
      "Type": "Choice",
    },
    "if(i == 3) 2": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.i__2",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.i__2",
                },
                Object {
                  "NumericEquals": 3,
                  "Variable": "$.i__2",
                },
              ],
            },
          ],
          "Next": "return \`vai\` 2",
        },
      ],
      "Default": "tail__for(i of await func()) 1",
      "Type": "Choice",
    },
    "initValue__c.join(\\"\\")": Object {
      "InputPath": "$.heap15[0]",
      "Next": "tail__c.join(\\"\\")",
      "ResultPath": "$.heap16.string",
      "Type": "Pass",
    },
    "initValue__d.join(\\"\\")": Object {
      "InputPath": "$.heap17[0]",
      "Next": "tail__d.join(\\"\\")",
      "ResultPath": "$.heap18.string",
      "Type": "Pass",
    },
    "initValue__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "InputPath": "$.heap13[0]",
      "Next": "tail__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "ResultPath": "$.heap14.string",
      "Type": "Pass",
    },
    "return \\"boo\\"": Object {
      "Next": "handleResult__1__b = [\\"b\\"].map(function(v))",
      "Result": "boo",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "return \\"boo\\" 1": Object {
      "Next": "handleResult__1__c = [\\"c\\"].map(function(v))",
      "Result": "boo",
      "ResultPath": "$.heap5.arr[0]",
      "Type": "Pass",
    },
    "return \\"boo\\" 2": Object {
      "Next": "handleResult__1__d = await Promise.all([\\"d\\"].map(function(v)))",
      "Result": "boo",
      "ResultPath": "$.heap9.arr[0]",
      "Type": "Pass",
    },
    "return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "InputPath": "$.b",
      "Next": "hasNext__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "return \`vai\`": Object {
      "Next": "1__return \`vai\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.v,$.a,$.i)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return \`vai\` 1": Object {
      "Next": "1__return \`vai\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.v__1,$.a,$.i__1)",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "return \`vai\` 2": Object {
      "Next": "1__return \`vai\` 2",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}',$.v__2,$.a,$.i__2)",
      },
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "returnEmpty__c.join(\\"\\")": Object {
      "Next": "d.join(\\"\\")",
      "Result": "",
      "ResultPath": "$.heap16.string",
      "Type": "Pass",
    },
    "returnEmpty__d.join(\\"\\")": Object {
      "Next": "\`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "Result": "",
      "ResultPath": "$.heap18.string",
      "Type": "Pass",
    },
    "returnEmpty__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "Next": "c.join(\\"\\")",
      "Result": "",
      "ResultPath": "$.heap14.string",
      "Type": "Pass",
    },
    "set__end__1__b = [\\"b\\"].map(function(v))": Object {
      "InputPath": "$.heap1.result[1:]",
      "Next": "b",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "set__end__1__c = [\\"c\\"].map(function(v))": Object {
      "InputPath": "$.heap5.result[1:]",
      "Next": "c",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "set__end__1__d = await Promise.all([\\"d\\"].map(function(v)))": Object {
      "InputPath": "$.heap9.result[1:]",
      "Next": "d",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "tail__c.join(\\"\\")": Object {
      "InputPath": "$.heap15[1:]",
      "Next": "hasNext__c.join(\\"\\")",
      "ResultPath": "$.heap15",
      "Type": "Pass",
    },
    "tail__d.join(\\"\\")": Object {
      "InputPath": "$.heap17[1:]",
      "Next": "hasNext__d.join(\\"\\")",
      "ResultPath": "$.heap17",
      "Type": "Pass",
    },
    "tail__for(i of [1, 2, 3])": Object {
      "InputPath": "$.heap3[1:]",
      "Next": "hasNext__for(i of [1, 2, 3])",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "tail__for(i of await func()) 1": Object {
      "InputPath": "$.heap12[1:]",
      "Next": "hasNext__for(i of await func()) 1",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "tail__for(i of input.arr)": Object {
      "InputPath": "$.heap7[1:]",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "tail__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`": Object {
      "InputPath": "$.heap13[1:]",
      "Next": "hasNext__return \`b.join(\\"\\")c.join(\\"\\")d.join(\\"\\")\`",
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "v": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "for(i of [1, 2, 3])",
      "ResultPath": "$.v",
      "Type": "Pass",
    },
    "v 1": Object {
      "InputPath": "$.heap5.arr[0]",
      "Next": "for(i of input.arr)",
      "ResultPath": "$.v__1",
      "Type": "Pass",
    },
    "v 2": Object {
      "InputPath": "$.heap9.arr[0]",
      "Next": "for(i of await func())",
      "ResultPath": "$.v__2",
      "Type": "Pass",
    },
  },
}
`;

exports[`for of 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__await func({n: \`i\`, id: input.id})": Object {
      "Next": "tail__for(i of input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap0.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap1",
      "Type": "Task",
    },
    "1__await func({n: \`i\`, id: input.id}) 1": Object {
      "Next": "await func({n: \`j\`, id: input.id}) 1",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap3.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap4",
      "Type": "Task",
    },
    "1__await func({n: \`j\`, id: input.id})": Object {
      "Next": "tail__for(i of input.arr) 1",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap8.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap9",
      "Type": "Task",
    },
    "1__await func({n: \`j\`, id: input.id}) 1": Object {
      "Next": "tail__for(j of input.arr)",
      "Parameters": Object {
        "id.$": "$.input.id",
        "n.$": "$.heap5.string",
      },
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap6",
      "Type": "Task",
    },
    "Initialize Functionless Context": Object {
      "Next": "for(i of input.arr)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "await func({n: \`i\`, id: input.id})": Object {
      "Next": "1__await func({n: \`i\`, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.i)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "await func({n: \`i\`, id: input.id}) 1": Object {
      "Next": "1__await func({n: \`i\`, id: input.id}) 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.i__1)",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "await func({n: \`j\`, id: input.id})": Object {
      "Next": "1__await func({n: \`j\`, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.j)",
      },
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "await func({n: \`j\`, id: input.id}) 1": Object {
      "Next": "1__await func({n: \`j\`, id: input.id}) 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.j)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "for(i of input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "for(i of input.arr) 1": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(i of input.arr) 1",
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "for(j of input.arr)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__for(j of input.arr)",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "hasNext__for(i of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i",
          "Variable": "$.heap2[0]",
        },
      ],
      "Default": "for(i of input.arr) 1",
      "Type": "Choice",
    },
    "hasNext__for(i of input.arr) 1": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "i 1",
          "Variable": "$.heap10[0]",
        },
      ],
      "Default": "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},",
      "Type": "Choice",
    },
    "hasNext__for(j of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "j",
          "Variable": "$.heap7[0]",
        },
      ],
      "Default": "await func({n: \`j\`, id: input.id})",
      "Type": "Choice",
    },
    "i": Object {
      "InputPath": "$.heap2[0]",
      "Next": "await func({n: \`i\`, id: input.id})",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "i 1": Object {
      "InputPath": "$.heap10[0]",
      "Next": "j = 1",
      "ResultPath": "$.i__1",
      "Type": "Pass",
    },
    "item": Object {
      "InputPath": "$.heap11",
      "Next": "return item.Item.val.N",
      "ResultPath": "$.item",
      "Type": "Pass",
    },
    "item = await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}},": Object {
      "Next": "item",
      "Parameters": Object {
        "ConsistentRead": true,
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap11",
      "Type": "Task",
    },
    "j": Object {
      "InputPath": "$.heap7[0]",
      "Next": "await func({n: \`i\`, id: input.id}) 1",
      "ResultPath": "$.j",
      "Type": "Pass",
    },
    "j = 1": Object {
      "Next": "for(j of input.arr)",
      "Result": 1,
      "ResultPath": "$.j",
      "Type": "Pass",
    },
    "return item.Item.val.N": Object {
      "End": true,
      "InputPath": "$.item.Item.val.N",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "tail__for(i of input.arr)": Object {
      "InputPath": "$.heap2[1:]",
      "Next": "hasNext__for(i of input.arr)",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "tail__for(i of input.arr) 1": Object {
      "InputPath": "$.heap10[1:]",
      "Next": "hasNext__for(i of input.arr) 1",
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "tail__for(j of input.arr)": Object {
      "InputPath": "$.heap7[1:]",
      "Next": "hasNext__for(j of input.arr)",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
  },
}
`;

exports[`foreach 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \`aax\`": Object {
      "InputPath": "$.heap1.string",
      "Next": "return a 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "input.arr.forEach(function(x))",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \`aax\`": Object {
      "Next": "1__a = \`aax\`",
      "Parameters": Object {
        "string.$": "States.Format('{}a{}',$.a,$.x)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "check__input.arr.forEach(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x",
          "Variable": "$.heap0.arr[0]",
        },
      ],
      "Default": "end__input.arr.forEach(function(x))",
      "Type": "Choice",
    },
    "end__input.arr.forEach(function(x))": Object {
      "Next": "return a",
      "Result": "$.fnl_context.null",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "input.arr.forEach(function(x))": Object {
      "Next": "check__input.arr.forEach(function(x))",
      "Parameters": Object {
        "arr.$": "$.input.arr",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return a 1": Object {
      "InputPath": "$.a",
      "Next": "tail__input.arr.forEach(function(x))",
      "ResultPath": "$.heap0.arr[0]",
      "Type": "Pass",
    },
    "tail__input.arr.forEach(function(x))": Object {
      "InputPath": "$.heap0.arr[1:]",
      "Next": "check__input.arr.forEach(function(x))",
      "ResultPath": "$.heap0.arr",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap0.arr[0]",
      "Next": "a = \`aax\`",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
  },
}
`;

exports[`join 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return resultArr.join(\\"#\\")": Object {
      "End": true,
      "InputPath": "$.heap10.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.arr.join",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "Next": "hasNext__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "Result": Array [
        "d",
        "e",
        "f",
      ],
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "[[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.arr.join(input.sep),": Object {
      "Next": "resultArr",
      "Parameters": Object {
        "arr.$": "States.Array('a/b/c', $.heap1.string, $.heap3.string, $.heap5.string, '', $.heap7.string)",
      },
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "append__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "Next": "tail__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}', $.heap5.string, $.input.sep, $.heap4[0])",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "append__input.arr.join()": Object {
      "Next": "tail__input.arr.join()",
      "Parameters": Object {
        "string.$": "States.Format('{},{}', $.heap7.string, $.heap6[0])",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "append__input.arr.join(input.sep)": Object {
      "Next": "tail__input.arr.join(input.sep)",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}', $.heap3.string, $.input.sep, $.heap2[0])",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "append__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.": Object {
      "Next": "tail__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.ar",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}', $.heap1.string, $.heap0[0])",
=======
    "await func({n: \${i}, id: input.id})": Object {
      "Next": "1__await func({n: \${i}, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.i)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "await func({n: \${i}, id: input.id}) 1": Object {
      "Next": "1__await func({n: \${i}, id: input.id}) 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.i)",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "await func({n: \${j}, id: input.id})": Object {
      "Next": "1__await func({n: \${j}, id: input.id})",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.j)",
>>>>>>> main
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "append__return resultArr.join(\\"#\\")": Object {
      "Next": "tail__return resultArr.join(\\"#\\")",
      "Parameters": Object {
        "string.$": "States.Format('{}#{}', $.heap10.string, $.heap9[0])",
      },
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "hasNext__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap4[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap5",
              },
            },
          ],
          "Next": "initValue__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap4[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap5",
              },
            },
          ],
          "Next": "returnEmpty__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
        },
        Object {
          "IsPresent": true,
          "Next": "append__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
          "Variable": "$.heap4[0]",
        },
      ],
      "Default": "input.arr.join()",
      "Type": "Choice",
    },
    "hasNext__input.arr.join()": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap6[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap7",
              },
            },
          ],
          "Next": "initValue__input.arr.join()",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap6[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap7",
              },
            },
          ],
          "Next": "returnEmpty__input.arr.join()",
        },
        Object {
          "IsPresent": true,
          "Next": "append__input.arr.join()",
          "Variable": "$.heap6[0]",
        },
      ],
      "Default": "[[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.arr.join(input.sep),",
      "Type": "Choice",
    },
    "hasNext__input.arr.join(input.sep)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap2[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap3",
              },
            },
          ],
          "Next": "initValue__input.arr.join(input.sep)",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap2[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap3",
              },
            },
          ],
          "Next": "returnEmpty__input.arr.join(input.sep)",
        },
        Object {
          "IsPresent": true,
          "Next": "append__input.arr.join(input.sep)",
          "Variable": "$.heap2[0]",
        },
      ],
      "Default": "[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "Type": "Choice",
    },
    "hasNext__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap0[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap1",
              },
            },
          ],
          "Next": "initValue__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), inp",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap0[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap1",
              },
            },
          ],
          "Next": "returnEmpty__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), i",
        },
        Object {
          "IsPresent": true,
          "Next": "append__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.",
          "Variable": "$.heap0[0]",
        },
      ],
      "Default": "input.arr.join(input.sep)",
      "Type": "Choice",
    },
    "hasNext__return resultArr.join(\\"#\\")": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap9[0]",
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap10",
              },
            },
          ],
          "Next": "initValue__return resultArr.join(\\"#\\")",
        },
        Object {
          "And": Array [
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap9[0]",
              },
            },
            Object {
              "Not": Object {
                "IsPresent": true,
                "Variable": "$.heap10",
              },
            },
          ],
          "Next": "returnEmpty__return resultArr.join(\\"#\\")",
        },
        Object {
          "IsPresent": true,
          "Next": "append__return resultArr.join(\\"#\\")",
          "Variable": "$.heap9[0]",
        },
      ],
      "Default": "1__return resultArr.join(\\"#\\")",
      "Type": "Choice",
    },
    "initValue__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "InputPath": "$.heap4[0]",
      "Next": "tail__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "ResultPath": "$.heap5.string",
      "Type": "Pass",
    },
    "initValue__input.arr.join()": Object {
      "InputPath": "$.heap6[0]",
      "Next": "tail__input.arr.join()",
      "ResultPath": "$.heap7.string",
      "Type": "Pass",
    },
    "initValue__input.arr.join(input.sep)": Object {
      "InputPath": "$.heap2[0]",
      "Next": "tail__input.arr.join(input.sep)",
      "ResultPath": "$.heap3.string",
      "Type": "Pass",
    },
    "initValue__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), inp": Object {
      "InputPath": "$.heap0[0]",
      "Next": "tail__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.ar",
      "ResultPath": "$.heap1.string",
      "Type": "Pass",
    },
    "initValue__return resultArr.join(\\"#\\")": Object {
      "InputPath": "$.heap9[0]",
      "Next": "tail__return resultArr.join(\\"#\\")",
      "ResultPath": "$.heap10.string",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "input.arr.join()": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__input.arr.join()",
      "ResultPath": "$.heap6",
=======
    "await func({n: \${j}, id: input.id}) 1": Object {
      "Next": "1__await func({n: \${j}, id: input.id}) 1",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.j)",
      },
      "ResultPath": "$.heap5",
>>>>>>> main
      "Type": "Pass",
    },
    "input.arr.join(input.sep)": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__input.arr.join(input.sep)",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "resultArr": Object {
      "InputPath": "$.heap8.arr",
      "Next": "return resultArr.join(\\"#\\")",
      "ResultPath": "$.resultArr",
      "Type": "Pass",
    },
    "resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.arr.join": Object {
      "InputPath": "$.input.arr",
      "Next": "hasNext__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "return resultArr.join(\\"#\\")": Object {
      "InputPath": "$.resultArr",
      "Next": "hasNext__return resultArr.join(\\"#\\")",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "returnEmpty__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "Next": "input.arr.join()",
      "Result": "",
      "ResultPath": "$.heap5.string",
      "Type": "Pass",
    },
    "returnEmpty__input.arr.join()": Object {
      "Next": "[[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.arr.join(input.sep),",
      "Result": "",
      "ResultPath": "$.heap7.string",
=======
    "hasNext__for(j of input.arr)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "j",
          "Variable": "$.heap7[0]",
        },
      ],
      "Default": "await func({n: \${j}, id: input.id})",
      "Type": "Choice",
    },
    "i": Object {
      "InputPath": "$.heap2[0]",
      "Next": "await func({n: \${i}, id: input.id})",
      "ResultPath": "$.i",
>>>>>>> main
      "Type": "Pass",
    },
    "returnEmpty__input.arr.join(input.sep)": Object {
      "Next": "[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "Result": "",
      "ResultPath": "$.heap3.string",
      "Type": "Pass",
    },
    "returnEmpty__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), i": Object {
      "Next": "input.arr.join(input.sep)",
      "Result": "",
      "ResultPath": "$.heap1.string",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "returnEmpty__return resultArr.join(\\"#\\")": Object {
      "Next": "1__return resultArr.join(\\"#\\")",
      "Result": "",
      "ResultPath": "$.heap10.string",
=======
    "j": Object {
      "InputPath": "$.heap7[0]",
      "Next": "await func({n: \${i}, id: input.id}) 1",
      "ResultPath": "$.j",
>>>>>>> main
      "Type": "Pass",
    },
    "tail__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)": Object {
      "InputPath": "$.heap4[1:]",
      "Next": "hasNext__[\\"d\\", \\"e\\", \\"f\\"].join(input.sep)",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "tail__input.arr.join()": Object {
      "InputPath": "$.heap6[1:]",
      "Next": "hasNext__input.arr.join()",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "tail__input.arr.join(input.sep)": Object {
      "InputPath": "$.heap2[1:]",
      "Next": "hasNext__input.arr.join(input.sep)",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "tail__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input.ar": Object {
      "InputPath": "$.heap0[1:]",
      "Next": "hasNext__resultArr = [[\\"a\\", \\"b\\", \\"c\\"].join(\\"/\\"), input.arr.join(\\"-\\"), input",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "tail__return resultArr.join(\\"#\\")": Object {
      "InputPath": "$.heap9[1:]",
      "Next": "hasNext__return resultArr.join(\\"#\\")",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
  },
}
`;

exports[`json parse and stringify 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
=======
    "1__a = \${a}a\${x}": Object {
      "InputPath": "$.heap1.string",
      "Next": "return a 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
>>>>>>> main
    "Initialize Functionless Context": Object {
      "Next": "str = JSON.stringify(input)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "obj": Object {
      "InputPath": "$.heap1.string",
      "Next": "return {str: str, obj: obj, a: obj.a}",
      "ResultPath": "$.obj",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "obj = JSON.parse(str)": Object {
      "Next": "obj",
=======
    "a = \${a}a\${x}": Object {
      "Next": "1__a = \${a}a\${x}",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.StringToJson($.str)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "return {str: str, obj: obj, a: obj.a}": Object {
      "End": true,
      "Parameters": Object {
        "a.$": "$.obj.a",
        "obj.$": "$.obj",
        "str.$": "$.str",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "str": Object {
      "InputPath": "$.heap0.string",
      "Next": "obj = JSON.parse(str)",
      "ResultPath": "$.str",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "str = JSON.stringify(input)": Object {
      "Next": "str",
      "Parameters": Object {
        "string.$": "States.JsonToString($.input)",
      },
      "ResultPath": "$.heap0",
=======
    "x": Object {
      "InputPath": "$.heap0.arr[0]",
      "Next": "a = \${a}a\${x}",
      "ResultPath": "$.x",
>>>>>>> main
      "Type": "Pass",
    },
  },
}
`;

exports[`map 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \`aax\`": Object {
      "InputPath": "$.heap6.string",
      "Next": "return a",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]a\`": Object {
      "End": true,
      "InputPath": "$.heap7.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return \`nixhead\`": Object {
      "InputPath": "$.heap4.string",
      "Next": "handleResult__l2 = input.arr.map(function(x, i, [head]))",
      "ResultPath": "$.heap3.arr[0]",
      "Type": "Pass",
    },
    "1__return \`nx\`": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x))",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "l = await func().map(function(x))",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \`aax\`": Object {
      "Next": "1__a = \`aax\`",
      "Parameters": Object {
        "string.$": "States.Format('{}a{}',$.a,$.x__2)",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "check__1__l = await func().map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x",
          "Variable": "$.heap1.arr[0]",
        },
      ],
      "Default": "end__1__l = await func().map(function(x))",
      "Type": "Choice",
    },
    "check__input.arr.map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x 1",
          "Variable": "$.heap5.arr[0]",
        },
      ],
      "Default": "end__input.arr.map(function(x))",
      "Type": "Choice",
    },
    "check__l2 = input.arr.map(function(x, i, [head]))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "function(x, i, [head])",
          "Variable": "$.heap3.arr[0]",
        },
      ],
      "Default": "end__l2 = input.arr.map(function(x, i, [head]))",
      "Type": "Choice",
    },
    "end__1__l = await func().map(function(x))": Object {
      "Next": "set__end__1__l = await func().map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "end__input.arr.map(function(x))": Object {
      "Next": "set__end__input.arr.map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap5.arrStr))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "end__l2 = input.arr.map(function(x, i, [head]))": Object {
      "Next": "set__end__l2 = input.arr.map(function(x, i, [head]))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap3.arrStr))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "function(x, i, [head])": Object {
      "InputPath": "$.heap3.arr[0].item",
      "Next": "i",
      "ResultPath": "$.x__1",
      "Type": "Pass",
    },
    "handleResult__1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "handleResult__input.arr.map(function(x))": Object {
      "Next": "check__input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap5.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap5.arrStr, States.JsonToString($.heap5.arr[0]))",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "handleResult__l2 = input.arr.map(function(x, i, [head]))": Object {
      "Next": "check__l2 = input.arr.map(function(x, i, [head]))",
      "Parameters": Object {
        "arr.$": "$.heap3.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap3.arrStr, States.JsonToString($.heap3.arr[0]))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "head": Object {
      "InputPath": "$.input.arr[0]",
      "Next": "return \`nixhead\`",
      "ResultPath": "$.head",
      "Type": "Pass",
    },
    "i": Object {
      "InputPath": "$.heap3.arr[0].index",
      "Next": "head",
      "ResultPath": "$.i",
      "Type": "Pass",
    },
    "input.arr.map(function(x))": Object {
      "Next": "check__input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.input.arr",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "l": Object {
      "InputPath": "$.heap1",
      "Next": "l2 = input.arr.map(function(x, i, [head]))",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "l = await func().map(function(x))": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__l = await func().map(function(x))",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
    "l2": Object {
      "InputPath": "$.heap3",
      "Next": "input.arr.map(function(x))",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "l2 = input.arr.map(function(x, i, [head]))": Object {
      "ItemsPath": "$.input.arr",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "check__l2 = input.arr.map(function(x, i, [head]))",
      "Parameters": Object {
        "index.$": "$$.Map.Item.Index",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap3",
      "ResultSelector": Object {
        "arr.$": "$",
        "arrStr": "[null",
      },
      "Type": "Map",
    },
    "return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]a\`": Object {
      "Next": "1__return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]a\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}{}{}{}{}',$.l[0],$.l[1],$.l[2],$.l2[0],$.l2[1],$.l2[2],$.a)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "return \`nixhead\`": Object {
      "Next": "1__return \`nixhead\`",
      "Parameters": Object {
        "string.$": "States.Format('n{}{}{}',$.i,$.x__1,$.head)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "return \`nx\`": Object {
      "Next": "1__return \`nx\`",
      "Parameters": Object {
        "string.$": "States.Format('n{}',$.x)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return a": Object {
      "InputPath": "$.a",
      "Next": "handleResult__input.arr.map(function(x))",
      "ResultPath": "$.heap5.arr[0]",
      "Type": "Pass",
    },
    "set__end__1__l = await func().map(function(x))": Object {
      "InputPath": "$.heap1.result[1:]",
      "Next": "l",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "set__end__input.arr.map(function(x))": Object {
      "InputPath": "$.heap5.result[1:]",
      "Next": "return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]a\`",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "set__end__l2 = input.arr.map(function(x, i, [head]))": Object {
      "InputPath": "$.heap3.result[1:]",
      "Next": "l2",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "return \`nx\`",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 1": Object {
      "InputPath": "$.heap5.arr[0]",
      "Next": "a = \`aax\`",
      "ResultPath": "$.x__2",
      "Type": "Pass",
    },
  },
}
`;

exports[`map uses input 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__return \`input.prefixx\`": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x))",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return \`input.prefixx\` 1": Object {
      "InputPath": "$.heap4.string",
      "Next": "handleResult__l2 = input.arr.map(function(x))",
      "ResultPath": "$.heap3.arr[0]",
      "Type": "Pass",
    },
    "1__return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]\`": Object {
      "End": true,
      "InputPath": "$.heap5.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "l = await func().map(function(x))",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "check__1__l = await func().map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x",
          "Variable": "$.heap1.arr[0]",
        },
      ],
      "Default": "end__1__l = await func().map(function(x))",
      "Type": "Choice",
    },
    "check__l2 = input.arr.map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x 1",
          "Variable": "$.heap3.arr[0]",
        },
      ],
      "Default": "end__l2 = input.arr.map(function(x))",
      "Type": "Choice",
    },
    "end__1__l = await func().map(function(x))": Object {
      "Next": "set__end__1__l = await func().map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "end__l2 = input.arr.map(function(x))": Object {
      "Next": "set__end__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap3.arrStr))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "handleResult__1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "handleResult__l2 = input.arr.map(function(x))": Object {
      "Next": "check__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap3.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap3.arrStr, States.JsonToString($.heap3.arr[0]))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "l": Object {
      "InputPath": "$.heap1",
      "Next": "l2 = input.arr.map(function(x))",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "l = await func().map(function(x))": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__l = await func().map(function(x))",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
    "l2": Object {
      "InputPath": "$.heap3",
      "Next": "return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]\`",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "l2 = input.arr.map(function(x))": Object {
      "Next": "check__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.input.arr",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "return \`input.prefixx\`": Object {
      "Next": "1__return \`input.prefixx\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.input.prefix,$.x)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return \`input.prefixx\` 1": Object {
      "Next": "1__return \`input.prefixx\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.input.prefix,$.x__1)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]\`": Object {
      "Next": "1__return \`l[0]l[1]l[2]l2[0]l2[1]l2[2]\`",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}{}{}{}',$.l[0],$.l[1],$.l[2],$.l2[0],$.l2[1],$.l2[2])",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "set__end__1__l = await func().map(function(x))": Object {
      "InputPath": "$.heap1.result[1:]",
      "Next": "l",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "set__end__l2 = input.arr.map(function(x))": Object {
      "InputPath": "$.heap3.result[1:]",
      "Next": "l2",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "return \`input.prefixx\`",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 1": Object {
      "InputPath": "$.heap3.arr[0]",
      "Next": "return \`input.prefixx\` 1",
      "ResultPath": "$.x__1",
      "Type": "Pass",
    },
  },
}
`;

exports[`map with dynamic for loops 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "1__a = \`ax\`": Object {
      "InputPath": "$.heap5.string",
      "Next": "tail__for(x of l)",
=======
    "1__a = \${a}a\${x}": Object {
      "InputPath": "$.heap6.string",
      "Next": "return a",
>>>>>>> main
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \`ax\` 1": Object {
      "InputPath": "$.heap7.string",
      "Next": "tail__for(x of l2)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__return \`nx\`": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x))",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return \`nx\` 1": Object {
=======
    "1__l2 = input.arr.map(function(x, i, [head]))": Object {
      "InputPath": "$.heap3",
      "Next": "input.arr.map(function(x))",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "1__return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}\${a}": Object {
      "End": true,
      "InputPath": "$.heap7.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return n\${i}\${x}\${head}": Object {
>>>>>>> main
      "InputPath": "$.heap4.string",
      "Next": "handleResult__l2 = input.arr.map(function(x))",
      "ResultPath": "$.heap3.arr[0]",
      "Type": "Pass",
    },
<<<<<<< HEAD
=======
    "1__return n\${x}": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x)) 1",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
>>>>>>> main
    "Initialize Functionless Context": Object {
      "Next": "l = await func().map(function(x))",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
=======
    "[ head ]": Object {
      "InputPath": "$.input.arr[0]",
      "Next": "return n\${i}\${x}\${head}",
      "ResultPath": "$.head",
      "Type": "Pass",
    },
>>>>>>> main
    "a = \\"\\"": Object {
      "Next": "for(x of l)",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "a = \`ax\`": Object {
      "Next": "1__a = \`ax\`",
=======
    "a = \${a}a\${x}": Object {
      "Next": "1__a = \${a}a\${x}",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.x__2)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "a = \`ax\` 1": Object {
      "Next": "1__a = \`ax\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.x__3)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "check__1__l = await func().map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x",
          "Variable": "$.heap1.arr[0]",
        },
      ],
      "Default": "end__1__l = await func().map(function(x))",
      "Type": "Choice",
    },
    "check__l2 = input.arr.map(function(x))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x 1",
          "Variable": "$.heap3.arr[0]",
        },
      ],
      "Default": "end__l2 = input.arr.map(function(x))",
      "Type": "Choice",
    },
    "end__1__l = await func().map(function(x))": Object {
      "Next": "set__end__1__l = await func().map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "end__l2 = input.arr.map(function(x))": Object {
      "Next": "set__end__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap3.arrStr))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "for(x of l)": Object {
      "InputPath": "$.l",
      "Next": "hasNext__for(x of l)",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "for(x of l2)": Object {
      "InputPath": "$.l2",
      "Next": "hasNext__for(x of l2)",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "handleResult__1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "handleResult__l2 = input.arr.map(function(x))": Object {
      "Next": "check__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.heap3.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap3.arrStr, States.JsonToString($.heap3.arr[0]))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "hasNext__for(x of l)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x 2",
          "Variable": "$.heap6[0]",
        },
      ],
      "Default": "for(x of l2)",
      "Type": "Choice",
    },
    "hasNext__for(x of l2)": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "x 3",
          "Variable": "$.heap8[0]",
        },
      ],
      "Default": "return a",
      "Type": "Choice",
    },
    "l": Object {
      "InputPath": "$.heap1",
      "Next": "l2 = input.arr.map(function(x))",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "l = await func().map(function(x))": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__l = await func().map(function(x))",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
<<<<<<< HEAD
    "l2": Object {
      "InputPath": "$.heap3",
      "Next": "a = \\"\\"",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "l2 = input.arr.map(function(x))": Object {
      "Next": "check__l2 = input.arr.map(function(x))",
=======
    "l2 = input.arr.map(function(x, i, [head]))": Object {
      "ItemsPath": "$.input.arr",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "check__l2 = input.arr.map(function(x, i, [head]))",
      "Parameters": Object {
        "index.$": "$$.Map.Item.Index",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap3",
      "ResultSelector": Object {
        "arr.$": "$",
        "arrStr": "[null",
      },
      "Type": "Map",
    },
    "return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}\${a}": Object {
      "Next": "1__return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}\${a}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}{}{}{}{}{}',$.l[0],$.l[1],$.l[2],$.l2[0],$.l2[1],$.l2[2],$.a)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "return a": Object {
      "InputPath": "$.a",
      "Next": "handleResult__input.arr.map(function(x))",
      "ResultPath": "$.heap5.arr[0]",
      "Type": "Pass",
    },
    "return n\${i}\${x}\${head}": Object {
      "Next": "1__return n\${i}\${x}\${head}",
>>>>>>> main
      "Parameters": Object {
        "arr.$": "$.input.arr",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "return n\${x}": Object {
      "Next": "1__return n\${x}",
      "Parameters": Object {
        "string.$": "States.Format('n{}',$.x)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "return \`nx\` 1": Object {
      "Next": "1__return \`nx\` 1",
      "Parameters": Object {
        "string.$": "States.Format('n{}',$.x__1)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "set__end__1__l = await func().map(function(x))": Object {
=======
    "set__end__1__l = await func().map(function(x)) 1": Object {
>>>>>>> main
      "InputPath": "$.heap1.result[1:]",
      "Next": "l",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "set__end__l2 = input.arr.map(function(x))": Object {
=======
    "set__end__input.arr.map(function(x))": Object {
      "InputPath": "$.heap5.result[1:]",
      "Next": "return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}\${a}",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "set__end__l2 = input.arr.map(function(x, i, [head]))": Object {
>>>>>>> main
      "InputPath": "$.heap3.result[1:]",
      "Next": "l2",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "tail__for(x of l)": Object {
      "InputPath": "$.heap6[1:]",
      "Next": "hasNext__for(x of l)",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "tail__for(x of l2)": Object {
      "InputPath": "$.heap8[1:]",
      "Next": "hasNext__for(x of l2)",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "x": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "return n\${x}",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 1": Object {
<<<<<<< HEAD
      "InputPath": "$.heap3.arr[0]",
      "Next": "return \`nx\` 1",
      "ResultPath": "$.x__1",
      "Type": "Pass",
    },
    "x 2": Object {
      "InputPath": "$.heap6[0]",
      "Next": "a = \`ax\`",
      "ResultPath": "$.x__2",
      "Type": "Pass",
    },
    "x 3": Object {
      "InputPath": "$.heap8[0]",
      "Next": "a = \`ax\` 1",
      "ResultPath": "$.x__3",
=======
      "InputPath": "$.heap5.arr[0]",
      "Next": "a = \${a}a\${x}",
      "ResultPath": "$.x",
>>>>>>> main
      "Type": "Pass",
    },
  },
}
`;

exports[`no state pollution 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "1__return a ?? null": Object {
=======
    "1__l = await func().map(function(x))": Object {
      "InputPath": "$.heap1",
      "Next": "l2 = input.arr.map(function(x))",
      "ResultPath": "$.l",
      "Type": "Pass",
    },
    "1__l = await func().map(function(x)) 1": Object {
      "Next": "check__1__l = await func().map(function(x)) 1",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__l2 = input.arr.map(function(x))": Object {
      "InputPath": "$.heap3",
      "Next": "return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "1__return \${input.prefix}\${x}": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x)) 1",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return \${input.prefix}\${x} 1": Object {
      "InputPath": "$.heap4.string",
      "Next": "handleResult__l2 = input.arr.map(function(x))",
      "ResultPath": "$.heap3.arr[0]",
      "Type": "Pass",
    },
    "1__return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}": Object {
>>>>>>> main
      "End": true,
      "InputPath": "$.heap0",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "return a ?? null",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return a ?? null": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.a",
            },
            Object {
              "IsNull": false,
              "Variable": "$.a",
            },
          ],
          "Next": "takeLeft__return a ?? null",
        },
      ],
      "Default": "takeRight__return a ?? null",
      "Type": "Choice",
    },
    "takeLeft__return a ?? null": Object {
      "InputPath": "$.a",
      "Next": "1__return a ?? null",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "takeRight__return a ?? null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return a ?? null",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
  },
}
`;

exports[`overlapping variable with input 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "a = \\"2\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "a = \\"2\\"": Object {
      "Next": "return {a: input.a, b: a}",
      "Result": "2",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "return {a: input.a, b: a}": Object {
      "End": true,
      "Parameters": Object {
        "a.$": "$.input.a",
        "b.$": "$.a",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`shadowing maintains state 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "$SFN.map([7], function(f))": Object {
      "ItemsPath": "$.heap3",
      "Iterator": Object {
        "StartAt": "return \`abcdef\`",
        "States": Object {
          "1__return \`abcdef\`": Object {
            "End": true,
            "InputPath": "$.heap2.string",
            "ResultPath": "$",
            "Type": "Pass",
          },
          "return \`abcdef\`": Object {
            "Next": "1__return \`abcdef\`",
            "Parameters": Object {
              "string.$": "States.Format('{}{}{}{}{}{}',$.a__1,$.b__1,$.c__1,$.d__1,$.e__1,$.f__1)",
            },
            "ResultPath": "$.heap2",
            "Type": "Pass",
          },
        },
      },
      "Next": "r",
      "Parameters": Object {
        "a__1.$": "$.a__1",
        "b__1.$": "$.b__1",
        "c__1.$": "$.c__1",
        "d__1.$": "$.d__1",
        "e__1.$": "$.e__1",
        "f.$": "$.f",
        "f__1.$": "$$.Map.Item.Value",
        "fnl_context.$": "$.fnl_context",
        "res.$": "$.res",
      },
      "ResultPath": "$.heap4",
      "Type": "Map",
    },
    "1__await Promise.all([4].map(function(c)))": Object {
      "Next": "check__1__await Promise.all([4].map(function(c)))",
      "Parameters": Object {
        "arr.$": "$.heap0",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__for(a in [2])": Object {
      "ItemsPath": "$.heap11",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
<<<<<<< HEAD
      ],
      "Default": "end__l2 = input.arr.map(function(x))",
      "Type": "Choice",
    },
    "end__1__l = await func().map(function(x))": Object {
      "Next": "set__end__1__l = await func().map(function(x))",
=======
    "return \${input.prefix}\${x}": Object {
      "Next": "1__return \${input.prefix}\${x}",
>>>>>>> main
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "end__l2 = input.arr.map(function(x))": Object {
      "Next": "set__end__l2 = input.arr.map(function(x))",
=======
    "return \${input.prefix}\${x} 1": Object {
      "Next": "1__return \${input.prefix}\${x} 1",
>>>>>>> main
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap3.arrStr))",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "handleResult__1__l = await func().map(function(x))": Object {
      "Next": "check__1__l = await func().map(function(x))",
=======
    "return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}": Object {
      "Next": "1__return \${l[0]}\${l[1]}\${l[2]}\${l2[0]}\${l2[1]}\${l2[2]}",
>>>>>>> main
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
=======
>>>>>>> 60eab991b43e33e91fb61ef7af3ba1760e34c612
      },
      "Next": "hasNext__for(a in [2])",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap11",
      "Type": "Map",
    },
    "1__for(e = 6;e == 6;e = 7)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.e__1",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.e__1",
                },
                Object {
                  "NumericEquals": 6,
                  "Variable": "$.e__1",
                },
              ],
            },
          ],
          "Next": "r = await $SFN.map([7], function(f))[0]",
        },
      ],
      "Default": "res = \`res-abcdef\` 3",
      "Type": "Choice",
    },
    "1__res = \`r-abcdef\`": Object {
      "InputPath": "$.heap5.string",
      "Next": "e = 7",
      "ResultPath": "$.res",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "1__res = \`res-abcdef\`": Object {
      "InputPath": "$.heap10.string",
      "Next": "tail__for(a in [2])",
      "ResultPath": "$.res",
      "Type": "Pass",
    },
    "1__res = \`res-abcdef\` 1": Object {
      "InputPath": "$.heap8.string",
      "Next": "tail__for(b of [3])",
      "ResultPath": "$.res",
      "Type": "Pass",
    },
    "1__res = \`res-abcdef\` 2": Object {
      "InputPath": "$.heap7.string",
      "Next": "return null",
      "ResultPath": "$.res",
      "Type": "Pass",
    },
    "1__res = \`res-abcdef\` 3": Object {
      "InputPath": "$.heap6.string",
      "Next": "res = \`res-abcdef\` 2",
      "ResultPath": "$.res",
=======
    "x": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "return \${input.prefix}\${x}",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 1": Object {
      "InputPath": "$.heap3.arr[0]",
      "Next": "return \${input.prefix}\${x} 1",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
  },
}
`;

exports[`map with dynamic for loops 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__a = \${a}\${x}": Object {
      "InputPath": "$.heap5.string",
      "Next": "tail__for(x of l)",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}\${x} 1": Object {
      "InputPath": "$.heap7.string",
      "Next": "tail__for(x of l2)",
      "ResultPath": "$.a",
>>>>>>> main
      "Type": "Pass",
    },
    "1__return \`res-abcdef-z\`": Object {
      "End": true,
      "InputPath": "$.heap14.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__z = [0].map(function(z))[0]": Object {
      "Next": "check__1__z = [0].map(function(z))[0]",
      "Parameters": Object {
        "arr.$": "$.heap12",
        "arrStr": "[null",
      },
<<<<<<< HEAD
      "ResultPath": "$.heap13",
=======
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "1__l2 = input.arr.map(function(x))": Object {
      "InputPath": "$.heap3",
      "Next": "a = \\"\\"",
      "ResultPath": "$.l2",
      "Type": "Pass",
    },
    "1__return n\${x}": Object {
      "InputPath": "$.heap2.string",
      "Next": "handleResult__1__l = await func().map(function(x)) 1",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "1__return n\${x} 1": Object {
      "InputPath": "$.heap4.string",
      "Next": "handleResult__l2 = input.arr.map(function(x))",
      "ResultPath": "$.heap3.arr[0]",
>>>>>>> main
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "[a,b,c,d,e,f] = [1, 1, 1, 1, 1, 1]",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
<<<<<<< HEAD
    "Promise.all([4].map(function(c)))": Object {
      "Next": "1__Promise.all([4].map(function(c)))",
      "Result": Array [
        4,
      ],
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
=======
>>>>>>> 60eab991b43e33e91fb61ef7af3ba1760e34c612
    "[a,b,c,d,e,f] = [1, 1, 1, 1, 1, 1]": Object {
      "Next": "b",
      "Result": 1,
      "ResultPath": "$.a",
=======
    "a = \\"\\"": Object {
      "Next": "for(x of l)",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \${a}\${x}": Object {
      "Next": "1__a = \${a}\${x}",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.x)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "a = \${a}\${x} 1": Object {
      "Next": "1__a = \${a}\${x} 1",
      "Parameters": Object {
        "string.$": "States.Format('{}{}',$.a,$.x)",
      },
      "ResultPath": "$.heap7",
>>>>>>> main
      "Type": "Pass",
    },
    "a": Object {
      "InputPath": "$.heap11[0].index",
      "Next": "assignValue__a",
      "ResultPath": "$.a__1",
      "Type": "Pass",
    },
    "assignValue__a": Object {
      "InputPath": "$.heap11[0].item",
      "Next": "for(b of [3])",
      "ResultPath": "$.0__a__1",
      "Type": "Pass",
    },
    "await Promise.all([4].map(function(c)))": Object {
      "Next": "1__await Promise.all([4].map(function(c)))",
      "Result": Array [
        4,
      ],
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "b": Object {
      "Next": "c",
      "Result": 1,
      "ResultPath": "$.b",
      "Type": "Pass",
    },
    "b 1": Object {
      "InputPath": "$.heap9[0]",
      "Next": "await Promise.all([4].map(function(c)))",
      "ResultPath": "$.b__1",
      "Type": "Pass",
    },
    "c": Object {
      "Next": "d",
      "Result": 1,
      "ResultPath": "$.c",
      "Type": "Pass",
    },
    "c 1": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "if(c == 4)",
      "ResultPath": "$.c__1",
      "Type": "Pass",
    },
    "check__1__await Promise.all([4].map(function(c)))": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "c 1",
          "Variable": "$.heap1.arr[0]",
        },
      ],
      "Default": "end__1__await Promise.all([4].map(function(c)))",
      "Type": "Choice",
    },
    "check__1__z = [0].map(function(z))[0]": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "z 1",
          "Variable": "$.heap13.arr[0]",
        },
      ],
<<<<<<< HEAD
      "Default": "end__1__z = [0].map(function(z))[0]",
      "Type": "Choice",
    },
    "d": Object {
      "Next": "e",
      "Result": 1,
      "ResultPath": "$.d",
      "Type": "Pass",
    },
    "d = 5": Object {
      "Next": "for(e = 6;e == 6;e = 7)",
      "Result": 5,
      "ResultPath": "$.d__1",
      "Type": "Pass",
    },
    "e": Object {
      "Next": "f",
      "Result": 1,
      "ResultPath": "$.e",
=======
      "Default": "return a",
      "Type": "Choice",
    },
    "l = await func().map(function(x))": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__l = await func().map(function(x)) 1",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
    "l2 = input.arr.map(function(x))": Object {
      "Next": "check__l2 = input.arr.map(function(x))",
      "Parameters": Object {
        "arr.$": "$.input.arr",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return n\${x}": Object {
      "Next": "1__return n\${x}",
      "Parameters": Object {
        "string.$": "States.Format('n{}',$.x)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return n\${x} 1": Object {
      "Next": "1__return n\${x} 1",
      "Parameters": Object {
        "string.$": "States.Format('n{}',$.x)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "set__end__1__l = await func().map(function(x)) 1": Object {
      "InputPath": "$.heap1.result[1:]",
      "Next": "1__l = await func().map(function(x))",
      "ResultPath": "$.heap1",
>>>>>>> main
      "Type": "Pass",
    },
    "e = 7": Object {
      "Next": "1__for(e = 6;e == 6;e = 7)",
      "Result": 7,
      "ResultPath": "$.e__1",
      "Type": "Pass",
    },
    "end__1__await Promise.all([4].map(function(c)))": Object {
      "Next": "set__end__1__await Promise.all([4].map(function(c)))",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap1.arrStr))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "end__1__z = [0].map(function(z))[0]": Object {
      "Next": "set__end__1__z = [0].map(function(z))[0]",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap13.arrStr))",
      },
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "f": Object {
      "Next": "res = \\"\\"",
      "Result": 1,
      "ResultPath": "$.f",
      "Type": "Pass",
    },
    "for(a in [2])": Object {
      "Next": "1__for(a in [2])",
      "Result": Array [
        2,
      ],
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "for(b of [3])": Object {
      "Next": "hasNext__for(b of [3])",
      "Result": Array [
        3,
      ],
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "for(e = 6;e == 6;e = 7)": Object {
      "Next": "1__for(e = 6;e == 6;e = 7)",
      "Result": 6,
      "ResultPath": "$.e__1",
=======
    "x": Object {
      "InputPath": "$.heap1.arr[0]",
      "Next": "return n\${x}",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 1": Object {
      "InputPath": "$.heap3.arr[0]",
      "Next": "return n\${x} 1",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 2": Object {
      "InputPath": "$.heap6[0]",
      "Next": "a = \${a}\${x}",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
    "x 3": Object {
      "InputPath": "$.heap8[0]",
      "Next": "a = \${a}\${x} 1",
      "ResultPath": "$.x",
>>>>>>> main
      "Type": "Pass",
    },
    "handleResult__1__await Promise.all([4].map(function(c)))": Object {
      "Next": "check__1__await Promise.all([4].map(function(c)))",
      "Parameters": Object {
        "arr.$": "$.heap1.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap1.arrStr, States.JsonToString($.heap1.arr[0]))",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "handleResult__1__z = [0].map(function(z))[0]": Object {
      "Next": "check__1__z = [0].map(function(z))[0]",
      "Parameters": Object {
        "arr.$": "$.heap13.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap13.arrStr, States.JsonToString($.heap13.arr[0]))",
      },
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "hasNext__for(a in [2])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "a",
          "Variable": "$.heap11[0]",
        },
      ],
      "Default": "z = [0].map(function(z))[0]",
      "Type": "Choice",
    },
    "hasNext__for(b of [3])": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "b 1",
          "Variable": "$.heap9[0]",
        },
      ],
      "Default": "res = \`res-abcdef\`",
      "Type": "Choice",
    },
    "if(c == 4)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.c__1",
            },
            Object {
              "And": Array [
                Object {
                  "IsNumeric": true,
                  "Variable": "$.c__1",
                },
                Object {
                  "NumericEquals": 4,
                  "Variable": "$.c__1",
                },
              ],
            },
          ],
          "Next": "d = 5",
        },
      ],
      "Default": "res = \`res-abcdef\` 2",
      "Type": "Choice",
    },
    "r": Object {
      "InputPath": "$.heap4[0]",
      "Next": "res = \`r-abcdef\`",
      "ResultPath": "$.r",
      "Type": "Pass",
    },
    "r = await $SFN.map([7], function(f))[0]": Object {
      "Next": "$SFN.map([7], function(f))",
      "Result": Array [
        7,
      ],
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "res = \\"\\"": Object {
      "Next": "for(a in [2])",
      "Result": "",
      "ResultPath": "$.res",
      "Type": "Pass",
    },
    "res = \`r-abcdef\`": Object {
      "Next": "1__res = \`r-abcdef\`",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}',$.r,$.a__1,$.b__1,$.c__1,$.d__1,$.e__1,$.f)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "res = \`res-abcdef\`": Object {
      "Next": "1__res = \`res-abcdef\`",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}',$.res,$.a__1,$.b,$.c,$.d,$.e,$.f)",
      },
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "res = \`res-abcdef\` 1": Object {
      "Next": "1__res = \`res-abcdef\` 1",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}',$.res,$.a__1,$.b__1,$.c,$.d,$.e,$.f)",
      },
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "res = \`res-abcdef\` 2": Object {
      "Next": "1__res = \`res-abcdef\` 2",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}',$.res,$.a__1,$.b__1,$.c__1,$.d,$.e,$.f)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "res = \`res-abcdef\` 3": Object {
      "Next": "1__res = \`res-abcdef\` 3",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}',$.res,$.a__1,$.b__1,$.c__1,$.d__1,$.e,$.f)",
      },
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "return \`res-abcdef-z\`": Object {
      "Next": "1__return \`res-abcdef-z\`",
      "Parameters": Object {
        "string.$": "States.Format('{}-{}{}{}{}{}{}-{}',$.res,$.a,$.b,$.c,$.d,$.e,$.f,$.z__1)",
      },
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "return null": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "handleResult__1__await Promise.all([4].map(function(c)))",
      "ResultPath": "$.heap1.arr[0]",
      "Type": "Pass",
    },
    "return z": Object {
      "InputPath": "$.z",
      "Next": "handleResult__1__z = [0].map(function(z))[0]",
      "ResultPath": "$.heap13.arr[0]",
      "Type": "Pass",
    },
    "set__end__1__await Promise.all([4].map(function(c)))": Object {
      "InputPath": "$.heap1.result[1:]",
      "Next": "res = \`res-abcdef\` 1",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "set__end__1__z = [0].map(function(z))[0]": Object {
      "InputPath": "$.heap13.result[1:]",
      "Next": "z",
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "tail__for(a in [2])": Object {
      "InputPath": "$.heap11[1:]",
      "Next": "hasNext__for(a in [2])",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "tail__for(b of [3])": Object {
      "InputPath": "$.heap9[1:]",
      "Next": "hasNext__for(b of [3])",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "z": Object {
      "InputPath": "$.heap13[0]",
      "Next": "return \`res-abcdef-z\`",
      "ResultPath": "$.z__1",
      "Type": "Pass",
    },
    "z 1": Object {
      "InputPath": "$.heap13.arr[0]",
      "Next": "return z",
      "ResultPath": "$.z",
      "Type": "Pass",
    },
    "z = [0].map(function(z))[0]": Object {
      "Next": "1__z = [0].map(function(z))[0]",
      "Result": Array [
        0,
      ],
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
  },
}
`;

exports[`simple 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "Initialize Functionless Context": Object {
      "Next": "return \\"hello world\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return \\"hello world\\"": Object {
      "End": true,
      "Result": "hello world",
      "ResultPath": "$",
      "Type": "Pass",
    },
  },
}
`;

exports[`templates 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
<<<<<<< HEAD
    "1__result = await func(\`input.obj.str hello partOfTheTemplateString input.o": Object {
      "InputPath": "$.heap2.string",
      "Next": "result",
=======
    "1__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}": Object {
      "InputPath": "$.heap1.string",
      "Next": "result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateString} ",
      "ResultPath": "$.partOfTheTemplateString",
      "Type": "Pass",
    },
    "1__result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateStrin": Object {
      "InputPath": "$.heap3",
      "Next": "return the result: \${result.str}",
      "ResultPath": "$.result",
      "Type": "Pass",
    },
    "1__result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateStrin 1": Object {
      "InputPath": "$.heap2.string",
      "Next": "1__result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateStrin",
>>>>>>> main
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap3",
      "Type": "Task",
    },
    "1__return the result: \${result.str}": Object {
      "End": true,
      "InputPath": "$.heap4.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "\`hello input.obj.str2 ?? \\"default\\"\`": Object {
      "Next": "partOfTheTemplateString",
=======
    "hello \${input.obj.str2 ?? \\"default\\"}": Object {
      "Next": "1__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('hello {}',$.heap0)",
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
<<<<<<< HEAD
    "partOfTheTemplateString": Object {
      "InputPath": "$.heap1.string",
      "Next": "result = await func(\`input.obj.str hello partOfTheTemplateString input.obj.",
      "ResultPath": "$.partOfTheTemplateString",
      "Type": "Pass",
    },
    "partOfTheTemplateString = \`hello input.obj.str2 ?? \\"default\\"\`": Object {
=======
    "partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}": Object {
>>>>>>> main
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj.str2",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.obj.str2",
            },
          ],
          "Next": "takeLeft__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}",
        },
      ],
      "Default": "takeRight__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}",
      "Type": "Choice",
    },
<<<<<<< HEAD
    "result": Object {
      "InputPath": "$.heap3",
      "Next": "return \`the result: result.str\`",
      "ResultPath": "$.result",
      "Type": "Pass",
    },
    "result = await func(\`input.obj.str hello partOfTheTemplateString input.obj.": Object {
      "Next": "1__result = await func(\`input.obj.str hello partOfTheTemplateString input.o",
=======
    "result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateString} ": Object {
      "Next": "1__result = await func(\${input.obj.str} \${\\"hello\\"} \${partOfTheTemplateStrin 1",
>>>>>>> main
      "Parameters": Object {
        "string.$": "States.Format('{} hello {} {}',$.input.obj.str,$.partOfTheTemplateString,$.input.obj.items[0])",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "return the result: \${result.str}": Object {
      "Next": "1__return the result: \${result.str}",
      "Parameters": Object {
        "string.$": "States.Format('the result: {}',$.result.str)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "takeLeft__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}": Object {
      "InputPath": "$.input.obj.str2",
      "Next": "hello \${input.obj.str2 ?? \\"default\\"}",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "takeRight__partOfTheTemplateString = hello \${input.obj.str2 ?? \\"default\\"}": Object {
      "Next": "hello \${input.obj.str2 ?? \\"default\\"}",
      "Result": "default",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
  },
}
`;

exports[`templates simple 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return \${x}": Object {
      "End": true,
      "InputPath": "$.heap0.string",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "x = input.str",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return \${x}": Object {
      "Next": "1__return \${x}",
      "Parameters": Object {
        "string.$": "States.Format('{}',$.x)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "x = input.str": Object {
      "InputPath": "$.input.str",
      "Next": "return \${x}",
      "ResultPath": "$.x",
      "Type": "Pass",
    },
  },
}
`;

exports[`ternary 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return {true: if(input.t), false: if(input.f), constantTrue: if(true), c": Object {
      "End": true,
      "Parameters": Object {
        "constantFalse.$": "$.heap10",
        "constantTrue.$": "$.heap9",
        "false.$": "$.heap8",
        "result.$": "$.heap12",
        "true.$": "$.heap7",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "Initialize Functionless Context": Object {
      "Next": "if(input.t)",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "assign__doFalse__if(input.f)": Object {
      "InputPath": "$.heap3",
      "Next": "if(input.t) 1",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assign__doFalse__if(input.t) 1": Object {
      "InputPath": "$.heap5",
      "Next": "return {true: if(input.t), false: if(input.f), constantTrue: if(true), cons",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "assign__doTrue__if(input.f)": Object {
      "InputPath": "$.heap2",
      "Next": "if(input.t) 1",
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assign__doTrue__if(input.t)": Object {
      "InputPath": "$.heap0",
      "Next": "if(input.f)",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}}}).Item.": Object {
      "Next": "await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}}}).Item. 1",
      "Parameters": Object {
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap11",
      "Type": "Task",
    },
    "await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}}}).Item. 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap11.Item.val.N",
            },
            Object {
              "IsNull": false,
              "Variable": "$.heap11.Item.val.N",
            },
          ],
          "Next": "takeLeft__await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id",
        },
      ],
      "Default": "takeRight__await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.i",
      "Type": "Choice",
    },
    "doFalse__if(false)": Object {
      "Next": "await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}}}).Item.",
      "Result": "d",
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "doFalse__if(input.f)": Object {
      "Next": "assign__doFalse__if(input.f)",
      "Parameters": Object {
        "ExpressionAttributeValues": Object {
          ":inc": Object {
            "N": "3",
          },
          ":start": Object {
            "N": "0",
          },
        },
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
        "UpdateExpression": "SET val = if_not_exists(val, :start) + :inc",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap3",
      "Type": "Task",
    },
    "doFalse__if(input.f) 1": Object {
      "Next": "if(true)",
      "Result": "b",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "doFalse__if(input.t)": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "if(input.f)",
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "doFalse__if(input.t) 1": Object {
      "Next": "assign__doFalse__if(input.t) 1",
      "Parameters": Object {
        "ExpressionAttributeValues": Object {
          ":inc": Object {
            "N": "4",
          },
          ":start": Object {
            "N": "0",
          },
        },
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
        "UpdateExpression": "SET val = if_not_exists(val, :start) + :inc",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap5",
      "Type": "Task",
    },
    "doFalse__if(true)": Object {
      "Next": "if(false)",
      "Result": "d",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "doFalse__return {true: if(input.t), false: if(input.f), constantTrue: if(tr": Object {
      "Next": "if(input.f) 1",
      "Result": "b",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "doTrue__if(false)": Object {
      "Next": "await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id}}}).Item.",
      "Result": "c",
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "doTrue__if(input.f)": Object {
      "Next": "assign__doTrue__if(input.f)",
      "Parameters": Object {
        "ExpressionAttributeValues": Object {
          ":inc": Object {
            "N": "2",
          },
          ":start": Object {
            "N": "0",
          },
        },
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
        "UpdateExpression": "SET val = if_not_exists(val, :start) + :inc",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap2",
      "Type": "Task",
    },
    "doTrue__if(input.f) 1": Object {
      "Next": "if(true)",
      "Result": "a",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "doTrue__if(input.t)": Object {
      "Next": "assign__doTrue__if(input.t)",
      "Parameters": Object {
        "ExpressionAttributeValues": Object {
          ":inc": Object {
            "N": "1",
          },
          ":start": Object {
            "N": "0",
          },
        },
        "Key": Object {
          "id": Object {
            "S.$": "$.input.id",
          },
        },
        "TableName": "__REPLACED_TOKEN",
        "UpdateExpression": "SET val = if_not_exists(val, :start) + :inc",
      },
      "Resource": "__REPLACED_ARN",
      "ResultPath": "$.heap0",
      "Type": "Task",
    },
    "doTrue__if(input.t) 1": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "return {true: if(input.t), false: if(input.f), constantTrue: if(true), cons",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "doTrue__if(true)": Object {
      "Next": "if(false)",
      "Result": "c",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "doTrue__return {true: if(input.t), false: if(input.f), constantTrue: if(tru": Object {
      "Next": "if(input.f) 1",
      "Result": "a",
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "if(false)": Object {
      "Choices": Array [
        Object {
          "IsNull": true,
          "Next": "doTrue__if(false)",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "doFalse__if(false)",
      "Type": "Choice",
    },
    "if(input.f)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.f",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.f",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.f",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.f",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.f",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.f",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.f",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "doTrue__if(input.f)",
        },
      ],
      "Default": "doFalse__if(input.f)",
      "Type": "Choice",
    },
    "if(input.f) 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.f",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.f",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.f",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.f",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.f",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.f",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.f",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.f",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "doTrue__if(input.f) 1",
        },
      ],
      "Default": "doFalse__if(input.f) 1",
      "Type": "Choice",
    },
    "if(input.t)": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.t",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.t",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.t",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "doTrue__if(input.t)",
        },
      ],
      "Default": "doFalse__if(input.t)",
      "Type": "Choice",
    },
    "if(input.t) 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.t",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.t",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.t",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "doTrue__if(input.t) 1",
        },
      ],
      "Default": "doFalse__if(input.t) 1",
      "Type": "Choice",
    },
    "if(true)": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "doTrue__if(true)",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "doFalse__if(true)",
      "Type": "Choice",
    },
    "return {true: if(input.t), false: if(input.f), constantTrue: if(true), cons": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.t",
            },
            Object {
              "IsNull": false,
              "Variable": "$.input.t",
            },
            Object {
              "Or": Array [
                Object {
                  "And": Array [
                    Object {
                      "IsString": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsString": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "StringEquals": "",
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsNumeric": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "Not": Object {
                        "And": Array [
                          Object {
                            "IsNumeric": true,
                            "Variable": "$.input.t",
                          },
                          Object {
                            "NumericEquals": 0,
                            "Variable": "$.input.t",
                          },
                        ],
                      },
                    },
                  ],
                },
                Object {
                  "And": Array [
                    Object {
                      "IsBoolean": true,
                      "Variable": "$.input.t",
                    },
                    Object {
                      "BooleanEquals": true,
                      "Variable": "$.input.t",
                    },
                  ],
                },
              ],
            },
          ],
          "Next": "doTrue__return {true: if(input.t), false: if(input.f), constantTrue: if(tru",
        },
      ],
      "Default": "doFalse__return {true: if(input.t), false: if(input.f), constantTrue: if(tr",
      "Type": "Choice",
    },
    "takeLeft__await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.id": Object {
      "InputPath": "$.heap11.Item.val.N",
      "Next": "1__return {true: if(input.t), false: if(input.f), constantTrue: if(true), c",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "takeRight__await $AWS.DynamoDB.GetItem({Table: table, Key: {id: {S: input.i": Object {
      "InputPath": "$.fnl_context.null",
      "Next": "1__return {true: if(input.t), false: if(input.f), constantTrue: if(true), c",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
  },
}
`;

exports[`throw catch finally 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "$SFN.map([1], function())": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 10",
          "ResultPath": "$.fnl_tmp_11",
        },
      ],
      "ItemsPath": "$.heap20",
      "Iterator": Object {
        "StartAt": "return func()",
        "States": Object {
          "1__return func()": Object {
            "End": true,
            "InputPath": "$.heap19",
            "ResultPath": "$",
            "Type": "Pass",
          },
          "return func()": Object {
            "InputPath": "$.fnl_context.null",
            "Next": "1__return func()",
            "Resource": "__REPLACED_TOKEN",
            "ResultPath": "$.heap19",
            "Type": "Task",
          },
        },
      },
      "Next": "try 11",
      "Parameters": Object {
        "a.$": "$.a",
        "fnl_context.$": "$.fnl_context",
      },
      "ResultPath": "$.heap21",
      "Type": "Map",
    },
    "1__a = \${a}\${err.errorMessage}": Object {
      "InputPath": "$.heap9.string",
      "Next": "try 6",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}\${err.message}": Object {
      "InputPath": "$.heap1.string",
      "Next": "try 2",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}arrmap\${err.errorMessage}": Object {
      "InputPath": "$.heap26.string",
      "Next": "return a",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}do\${err.errorMessage}": Object {
      "InputPath": "$.heap18.string",
      "Next": "try 10",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}finally1": Object {
      "InputPath": "$.heap3.string",
      "Next": "try 3",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}finally2": Object {
      "InputPath": "$.heap5.string",
      "Next": "try 4",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}for\${err.errorMessage}": Object {
      "InputPath": "$.heap12.string",
      "Next": "try 7",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}recatch\${err.message}": Object {
      "InputPath": "$.heap14.string",
      "Next": "try 8",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}sfnmap\${err.errorMessage}": Object {
      "InputPath": "$.heap22.string",
      "Next": "try 11",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__a = \${a}while\${err.errorMessage}": Object {
      "InputPath": "$.heap16.string",
      "Next": "try 9",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__catch__try": Object {
      "InputPath": "$.heap0.string",
      "Next": "try 1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__catch__try 10": Object {
      "InputPath": "$.fnl_tmp_11.0_ParsedError",
      "Next": "catch(err) 4",
      "ResultPath": "$.fnl_tmp_11",
      "Type": "Pass",
    },
    "1__catch__try 11": Object {
      "InputPath": "$.fnl_tmp_12.0_ParsedError",
      "Next": "catch(err) 5",
      "ResultPath": "$.fnl_tmp_12",
      "Type": "Pass",
    },
    "1__catch__try 2": Object {
      "InputPath": "$.heap2.string",
      "Next": "a = \${a}finally1",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__catch__try 4": Object {
      "InputPath": "$.heap7.string",
      "Next": "try 5",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__catch__try 5": Object {
      "InputPath": "$.fnl_tmp_4.0_ParsedError",
      "Next": "catch(err)",
      "ResultPath": "$.fnl_tmp_4",
      "Type": "Pass",
    },
    "1__catch__try 6": Object {
      "InputPath": "$.fnl_tmp_5.0_ParsedError",
      "Next": "catch(err) 1",
      "ResultPath": "$.fnl_tmp_5",
      "Type": "Pass",
    },
    "1__catch__try 8": Object {
      "InputPath": "$.fnl_tmp_9.0_ParsedError",
      "Next": "catch(err) 2",
      "ResultPath": "$.fnl_tmp_9",
      "Type": "Pass",
    },
    "1__catch__try 9": Object {
      "InputPath": "$.fnl_tmp_10.0_ParsedError",
      "Next": "catch(err) 3",
      "ResultPath": "$.fnl_tmp_10",
      "Type": "Pass",
    },
    "1__finally": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "throw__1__finally",
          "Variable": "$.fnl_tmp_8",
        },
      ],
      "Default": "try 8",
      "Type": "Choice",
    },
    "1__finally 1": Object {
      "InputPath": "$.heap13.string",
      "Next": "1__finally",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__return func() 1": Object {
      "InputPath": "$.heap25",
      "Next": "handleResult__1__try 11",
      "ResultPath": "$.heap24.arr[0]",
      "Type": "Pass",
    },
    "1__try 11": Object {
      "Next": "check__1__try 11",
      "Parameters": Object {
        "arr.$": "$.heap23",
        "arrStr": "[null",
      },
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "1__try 3": Object {
      "InputPath": "$.heap4.string",
      "Next": "a = \${a}finally2",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "1__try 6": Object {
      "ItemsPath": "$.heap11",
      "Iterator": Object {
        "StartAt": "Default",
        "States": Object {
          "Default": Object {
            "End": true,
            "ResultPath": "$",
            "Type": "Pass",
          },
        },
      },
      "Next": "hasNext__try 6",
      "Parameters": Object {
        "index.$": "States.Format('{}', $$.Map.Item.Index)",
        "item.$": "$$.Map.Item.Value",
      },
      "ResultPath": "$.heap11",
      "Type": "Map",
    },
    "Initialize Functionless Context": Object {
      "Next": "a = \\"\\"",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "_": Object {
      "InputPath": "$.heap11[0].index",
      "Next": "assignValue___",
      "ResultPath": "$._",
      "Type": "Pass",
    },
    "a = \\"\\"": Object {
      "Next": "try",
      "Result": "",
      "ResultPath": "$.a",
      "Type": "Pass",
    },
    "a = \${a}\${err.errorMessage}": Object {
      "Next": "1__a = \${a}\${err.errorMessage}",
      "Parameters": Object {
<<<<<<< HEAD
        "string.$": "States.Format('{}arrmap{}',$.a,$.err__7.errorMessage)",
=======
        "string.$": "States.Format('{}{}',$.a,$.err.errorMessage)",
>>>>>>> main
      },
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "a = \${a}\${err.message}": Object {
      "Next": "1__a = \${a}\${err.message}",
      "Parameters": Object {
<<<<<<< HEAD
        "string.$": "States.Format('{}do{}',$.a,$.err__5.errorMessage)",
=======
        "string.$": "States.Format('{}{}',$.a,$.err.message)",
>>>>>>> main
      },
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "a = \${a}arrmap\${err.errorMessage}": Object {
      "Next": "1__a = \${a}arrmap\${err.errorMessage}",
      "Parameters": Object {
<<<<<<< HEAD
        "string.$": "States.Format('{}{}',$.a,$.err__1.errorMessage)",
=======
        "string.$": "States.Format('{}arrmap{}',$.a,$.err.errorMessage)",
>>>>>>> main
      },
      "ResultPath": "$.heap26",
      "Type": "Pass",
    },
    "a = \${a}do\${err.errorMessage}": Object {
      "Next": "1__a = \${a}do\${err.errorMessage}",
      "Parameters": Object {
        "string.$": "States.Format('{}do{}',$.a,$.err.errorMessage)",
      },
      "ResultPath": "$.heap18",
      "Type": "Pass",
    },
    "a = \${a}finally1": Object {
      "Next": "1__a = \${a}finally1",
      "Parameters": Object {
        "string.$": "States.Format('{}finally1',$.a)",
      },
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "a = \${a}finally2": Object {
      "Next": "1__a = \${a}finally2",
      "Parameters": Object {
        "string.$": "States.Format('{}finally2',$.a)",
      },
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "a = \${a}for\${err.errorMessage}": Object {
      "Next": "1__a = \${a}for\${err.errorMessage}",
      "Parameters": Object {
        "string.$": "States.Format('{}for{}',$.a,$.err__2.errorMessage)",
      },
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "a = \${a}recatch\${err.message}": Object {
      "Next": "1__a = \${a}recatch\${err.message}",
      "Parameters": Object {
        "string.$": "States.Format('{}recatch{}',$.a,$.err__3.message)",
      },
      "ResultPath": "$.heap14",
      "Type": "Pass",
    },
    "a = \${a}sfnmap\${err.errorMessage}": Object {
      "Next": "1__a = \${a}sfnmap\${err.errorMessage}",
      "Parameters": Object {
        "string.$": "States.Format('{}sfnmap{}',$.a,$.err__6.errorMessage)",
      },
      "ResultPath": "$.heap22",
      "Type": "Pass",
    },
    "a = \${a}while\${err.errorMessage}": Object {
      "Next": "1__a = \${a}while\${err.errorMessage}",
      "Parameters": Object {
        "string.$": "States.Format('{}while{}',$.a,$.err__4.errorMessage)",
      },
      "ResultPath": "$.heap16",
      "Type": "Pass",
    },
    "assignValue___": Object {
      "InputPath": "$.heap11[0].item",
      "Next": "await func()",
      "ResultPath": "$.0___",
      "Type": "Pass",
    },
    "await func()": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 6",
          "ResultPath": "$.fnl_tmp_5",
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "tail__try 6",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap10",
      "Type": "Task",
    },
    "await func() 1": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 8",
          "ResultPath": "$.fnl_tmp_9",
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "try 8",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap15",
      "Type": "Task",
    },
    "await func() 2": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 9",
          "ResultPath": "$.fnl_tmp_10",
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "try 9",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap17",
      "Type": "Task",
    },
    "catch(err)": Object {
      "InputPath": "$.fnl_tmp_4",
<<<<<<< HEAD
      "Next": "a = \`aerr.errorMessage\`",
      "ResultPath": "$.err__1",
=======
      "Next": "a = \${a}\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch(err) 1": Object {
      "InputPath": "$.fnl_tmp_5",
<<<<<<< HEAD
      "Next": "a = \`aforerr.errorMessage\`",
      "ResultPath": "$.err__2",
=======
      "Next": "a = \${a}for\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch(err) 2": Object {
      "InputPath": "$.fnl_tmp_9",
<<<<<<< HEAD
      "Next": "a = \`awhileerr.errorMessage\`",
      "ResultPath": "$.err__4",
=======
      "Next": "a = \${a}while\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch(err) 3": Object {
      "InputPath": "$.fnl_tmp_10",
<<<<<<< HEAD
      "Next": "a = \`adoerr.errorMessage\`",
      "ResultPath": "$.err__5",
=======
      "Next": "a = \${a}do\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch(err) 4": Object {
      "InputPath": "$.fnl_tmp_11",
<<<<<<< HEAD
      "Next": "a = \`asfnmaperr.errorMessage\`",
      "ResultPath": "$.err__6",
=======
      "Next": "a = \${a}sfnmap\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch(err) 5": Object {
      "InputPath": "$.fnl_tmp_12",
<<<<<<< HEAD
      "Next": "a = \`aarrmaperr.errorMessage\`",
      "ResultPath": "$.err__7",
=======
      "Next": "a = \${a}arrmap\${err.errorMessage}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch__try": Object {
      "Next": "1__catch__try",
      "Parameters": Object {
        "string.$": "States.Format('{}error1',$.a)",
      },
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "catch__try 1": Object {
      "InputPath": "$.fnl_tmp_1",
      "Next": "a = \${a}\${err.message}",
      "ResultPath": "$.err",
      "Type": "Pass",
    },
    "catch__try 10": Object {
      "Next": "1__catch__try 10",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_11.Cause)",
      },
      "ResultPath": "$.fnl_tmp_11",
      "Type": "Pass",
    },
    "catch__try 11": Object {
      "Next": "1__catch__try 11",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_12.Cause)",
      },
      "ResultPath": "$.fnl_tmp_12",
      "Type": "Pass",
    },
    "catch__try 2": Object {
      "Next": "1__catch__try 2",
      "Parameters": Object {
        "string.$": "States.Format('{}error3',$.a)",
      },
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "catch__try 4": Object {
      "Next": "1__catch__try 4",
      "Parameters": Object {
        "string.$": "States.Format('{}error4',$.a)",
      },
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "catch__try 5": Object {
      "Next": "1__catch__try 5",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_4.Cause)",
      },
      "ResultPath": "$.fnl_tmp_4",
      "Type": "Pass",
    },
    "catch__try 6": Object {
      "Next": "1__catch__try 6",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_5.Cause)",
      },
      "ResultPath": "$.fnl_tmp_5",
      "Type": "Pass",
    },
    "catch__try 7": Object {
      "InputPath": "$.fnl_tmp_6",
<<<<<<< HEAD
      "Next": "a = \`arecatcherr.message\`",
      "ResultPath": "$.err__3",
=======
      "Next": "a = \${a}recatch\${err.message}",
      "ResultPath": "$.err",
>>>>>>> main
      "Type": "Pass",
    },
    "catch__try 7 1": Object {
      "Next": "finally",
      "Result": Object {
        "message": "error6",
      },
      "ResultPath": "$.fnl_tmp_8",
      "Type": "Pass",
    },
    "catch__try 8": Object {
      "Next": "1__catch__try 8",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_9.Cause)",
      },
      "ResultPath": "$.fnl_tmp_9",
      "Type": "Pass",
    },
    "catch__try 9": Object {
      "Next": "1__catch__try 9",
      "Parameters": Object {
        "0_ParsedError.$": "States.StringToJson($.fnl_tmp_10.Cause)",
      },
      "ResultPath": "$.fnl_tmp_10",
      "Type": "Pass",
    },
    "check__1__try 11": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "return func() 1",
          "Variable": "$.heap24.arr[0]",
        },
      ],
      "Default": "end__1__try 11",
      "Type": "Choice",
    },
    "end__1__try 11": Object {
      "Next": "set__end__1__try 11",
      "Parameters": Object {
        "result.$": "States.StringToJson(States.Format('{}]', $.heap24.arrStr))",
      },
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "finally": Object {
      "Next": "1__finally 1",
      "Parameters": Object {
        "string.$": "States.Format('{}finally',$.a)",
      },
      "ResultPath": "$.heap13",
      "Type": "Pass",
    },
    "handleResult__1__try 11": Object {
      "Next": "check__1__try 11",
      "Parameters": Object {
        "arr.$": "$.heap24.arr[1:]",
        "arrStr.$": "States.Format('{},{}', $.heap24.arrStr, States.JsonToString($.heap24.arr[0]))",
      },
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "hasNext__try 6": Object {
      "Choices": Array [
        Object {
          "IsPresent": true,
          "Next": "_",
          "Variable": "$.heap11[0]",
        },
      ],
      "Default": "try 7",
      "Type": "Choice",
    },
    "return a": Object {
      "End": true,
      "InputPath": "$.a",
      "ResultPath": "$",
      "Type": "Pass",
    },
    "return func() 1": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 11",
          "ResultPath": "$.fnl_tmp_12",
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "1__return func() 1",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap25",
      "Type": "Task",
    },
    "set__end__1__try 11": Object {
      "InputPath": "$.heap24.result[1:]",
      "Next": "return a",
      "ResultPath": "$.heap24",
      "Type": "Pass",
    },
    "tail__try 6": Object {
      "InputPath": "$.heap11[1:]",
      "Next": "hasNext__try 6",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "throw__1__finally": Object {
      "InputPath": "$.fnl_tmp_8",
      "Next": "catch__try 7",
      "ResultPath": "$.fnl_tmp_6",
      "Type": "Pass",
    },
    "try": Object {
      "Next": "catch__try",
      "Result": Object {
        "message": "Error1",
      },
      "ResultPath": null,
      "Type": "Pass",
    },
    "try 1": Object {
      "Next": "catch__try 1",
      "Result": Object {
        "message": "Error2",
      },
      "ResultPath": "$.fnl_tmp_1",
      "Type": "Pass",
    },
    "try 10": Object {
      "Next": "$SFN.map([1], function())",
      "Result": Array [
        1,
      ],
      "ResultPath": "$.heap20",
      "Type": "Pass",
    },
    "try 11": Object {
      "Next": "1__try 11",
      "Result": Array [
        1,
      ],
      "ResultPath": "$.heap23",
      "Type": "Pass",
    },
    "try 2": Object {
      "Next": "catch__try 2",
      "Result": Object {
        "message": null,
      },
      "ResultPath": null,
      "Type": "Pass",
    },
    "try 3": Object {
      "Next": "1__try 3",
      "Parameters": Object {
        "string.$": "States.Format('{}set',$.a)",
      },
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "try 4": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 4",
          "ResultPath": null,
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "try 5",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap6",
      "Type": "Task",
    },
    "try 5": Object {
      "Catch": Array [
        Object {
          "ErrorEquals": Array [
            "States.ALL",
          ],
          "Next": "catch__try 5",
          "ResultPath": "$.fnl_tmp_4",
        },
      ],
      "InputPath": "$.fnl_context.null",
      "Next": "try 6",
      "Resource": "__REPLACED_TOKEN",
      "ResultPath": "$.heap8",
      "Type": "Task",
    },
    "try 6": Object {
      "Next": "1__try 6",
      "Result": Array [
        1,
      ],
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "try 7": Object {
      "Next": "catch__try 7 1",
      "Result": Object {
        "message": "error5",
      },
      "ResultPath": null,
      "Type": "Pass",
    },
    "try 8": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "await func() 1",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "try 9",
      "Type": "Choice",
    },
    "try 9": Object {
      "Choices": Array [
        Object {
          "IsNull": false,
          "Next": "await func() 2",
          "Variable": "$$.Execution.Id",
        },
      ],
      "Default": "try 10",
      "Type": "Choice",
    },
  },
}
`;

exports[`typeof 1`] = `
Object {
  "StartAt": "Initialize Functionless Context",
  "States": Object {
    "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu": Object {
      "End": true,
      "Parameters": Object {
        "arrType.$": "$.heap12",
        "booleanType.$": "$.heap5",
        "isBool.$": "$.heap4",
        "isNumber.$": "$.heap7",
        "isObject.$": "$.heap10",
        "isString.$": "$.heap1",
        "numberType.$": "$.heap8",
        "objectType.$": "$.heap11",
        "stringType.$": "$.heap2",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap0",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.heap0",
                },
                Object {
                  "StringEquals": "string",
                  "Variable": "$.heap0",
                },
              ],
            },
          ],
          "Next": "assignTrue__1__return {isString: typeof input.str === \\"string\\", stringType:",
        },
      ],
      "Default": "assignFalse__1__return {isString: typeof input.str === \\"string\\", stringType",
      "Type": "Choice",
    },
    "1__typeof input.bool === \\"boolean\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap3",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.heap3",
                },
                Object {
                  "StringEquals": "boolean",
                  "Variable": "$.heap3",
                },
              ],
            },
          ],
          "Next": "assignTrue__1__typeof input.bool === \\"boolean\\"",
        },
      ],
      "Default": "assignFalse__1__typeof input.bool === \\"boolean\\"",
      "Type": "Choice",
    },
    "1__typeof input.num === \\"number\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap6",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.heap6",
                },
                Object {
                  "StringEquals": "number",
                  "Variable": "$.heap6",
                },
              ],
            },
          ],
          "Next": "assignTrue__1__typeof input.num === \\"number\\"",
        },
      ],
      "Default": "assignFalse__1__typeof input.num === \\"number\\"",
      "Type": "Choice",
    },
    "1__typeof input.obj === \\"object\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.heap9",
            },
            Object {
              "And": Array [
                Object {
                  "IsString": true,
                  "Variable": "$.heap9",
                },
                Object {
                  "StringEquals": "object",
                  "Variable": "$.heap9",
                },
              ],
            },
          ],
          "Next": "assignTrue__1__typeof input.obj === \\"object\\"",
        },
      ],
      "Default": "assignFalse__1__typeof input.obj === \\"object\\"",
      "Type": "Choice",
    },
    "Initialize Functionless Context": Object {
      "Next": "return {isString: typeof input.str === \\"string\\", stringType: typeof input.s",
      "Parameters": Object {
        "fnl_context": Object {
          "null": null,
        },
        "input.$": "$$.Execution.Input",
      },
      "ResultPath": "$",
      "Type": "Pass",
    },
    "assignFalse__1__return {isString: typeof input.str === \\"string\\", stringType": Object {
      "Next": "input.str",
      "Result": false,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignFalse__1__typeof input.bool === \\"boolean\\"": Object {
      "Next": "input.bool",
      "Result": false,
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignFalse__1__typeof input.num === \\"number\\"": Object {
      "Next": "input.num",
      "Result": false,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignFalse__1__typeof input.obj === \\"object\\"": Object {
      "Next": "input.obj",
      "Result": false,
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "assignTrue__1__return {isString: typeof input.str === \\"string\\", stringType:": Object {
      "Next": "input.str",
      "Result": true,
      "ResultPath": "$.heap1",
      "Type": "Pass",
    },
    "assignTrue__1__typeof input.bool === \\"boolean\\"": Object {
      "Next": "input.bool",
      "Result": true,
      "ResultPath": "$.heap4",
      "Type": "Pass",
    },
    "assignTrue__1__typeof input.num === \\"number\\"": Object {
      "Next": "input.num",
      "Result": true,
      "ResultPath": "$.heap7",
      "Type": "Pass",
    },
    "assignTrue__1__typeof input.obj === \\"object\\"": Object {
      "Next": "input.obj",
      "Result": true,
      "ResultPath": "$.heap10",
      "Type": "Pass",
    },
    "boolean__input.arr": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu",
      "Result": "boolean",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "boolean__input.bool": Object {
      "Next": "typeof input.num === \\"number\\"",
      "Result": "boolean",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "boolean__input.num": Object {
      "Next": "typeof input.obj === \\"object\\"",
      "Result": "boolean",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "boolean__input.obj": Object {
      "Next": "input.arr",
      "Result": "boolean",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "boolean__input.str": Object {
      "Next": "typeof input.bool === \\"boolean\\"",
      "Result": "boolean",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "boolean__return {isString: typeof input.str === \\"string\\", stringType: typeo": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1",
      "Result": "boolean",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "boolean__typeof input.bool === \\"boolean\\"": Object {
      "Next": "1__typeof input.bool === \\"boolean\\"",
      "Result": "boolean",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "boolean__typeof input.num === \\"number\\"": Object {
      "Next": "1__typeof input.num === \\"number\\"",
      "Result": "boolean",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "boolean__typeof input.obj === \\"object\\"": Object {
      "Next": "1__typeof input.obj === \\"object\\"",
      "Result": "boolean",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "input.arr": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.arr",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.arr",
            },
          ],
          "Next": "string__input.arr",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.arr",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.arr",
            },
          ],
          "Next": "boolean__input.arr",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.arr",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.arr",
            },
          ],
          "Next": "number__input.arr",
        },
        Object {
          "IsPresent": true,
          "Next": "object__input.arr",
          "Variable": "$.input.arr",
        },
      ],
      "Default": "undefined__input.arr",
      "Type": "Choice",
    },
    "input.bool": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "string__input.bool",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "boolean__input.bool",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "number__input.bool",
        },
        Object {
          "IsPresent": true,
          "Next": "object__input.bool",
          "Variable": "$.input.bool",
        },
      ],
      "Default": "undefined__input.bool",
      "Type": "Choice",
    },
    "input.num": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "string__input.num",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "boolean__input.num",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "number__input.num",
        },
        Object {
          "IsPresent": true,
          "Next": "object__input.num",
          "Variable": "$.input.num",
        },
      ],
      "Default": "undefined__input.num",
      "Type": "Choice",
    },
    "input.obj": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "string__input.obj",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "boolean__input.obj",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "number__input.obj",
        },
        Object {
          "IsPresent": true,
          "Next": "object__input.obj",
          "Variable": "$.input.obj",
        },
      ],
      "Default": "undefined__input.obj",
      "Type": "Choice",
    },
    "input.str": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "string__input.str",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "boolean__input.str",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "number__input.str",
        },
        Object {
          "IsPresent": true,
          "Next": "object__input.str",
          "Variable": "$.input.str",
        },
      ],
      "Default": "undefined__input.str",
      "Type": "Choice",
    },
    "number__input.arr": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu",
      "Result": "number",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "number__input.bool": Object {
      "Next": "typeof input.num === \\"number\\"",
      "Result": "number",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "number__input.num": Object {
      "Next": "typeof input.obj === \\"object\\"",
      "Result": "number",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "number__input.obj": Object {
      "Next": "input.arr",
      "Result": "number",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "number__input.str": Object {
      "Next": "typeof input.bool === \\"boolean\\"",
      "Result": "number",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "number__return {isString: typeof input.str === \\"string\\", stringType: typeof": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1",
      "Result": "number",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "number__typeof input.bool === \\"boolean\\"": Object {
      "Next": "1__typeof input.bool === \\"boolean\\"",
      "Result": "number",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "number__typeof input.num === \\"number\\"": Object {
      "Next": "1__typeof input.num === \\"number\\"",
      "Result": "number",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "number__typeof input.obj === \\"object\\"": Object {
      "Next": "1__typeof input.obj === \\"object\\"",
      "Result": "number",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "object__input.arr": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu",
      "Result": "object",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "object__input.bool": Object {
      "Next": "typeof input.num === \\"number\\"",
      "Result": "object",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "object__input.num": Object {
      "Next": "typeof input.obj === \\"object\\"",
      "Result": "object",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "object__input.obj": Object {
      "Next": "input.arr",
      "Result": "object",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "object__input.str": Object {
      "Next": "typeof input.bool === \\"boolean\\"",
      "Result": "object",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "object__return {isString: typeof input.str === \\"string\\", stringType: typeof": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1",
      "Result": "object",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "object__typeof input.bool === \\"boolean\\"": Object {
      "Next": "1__typeof input.bool === \\"boolean\\"",
      "Result": "object",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "object__typeof input.num === \\"number\\"": Object {
      "Next": "1__typeof input.num === \\"number\\"",
      "Result": "object",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "object__typeof input.obj === \\"object\\"": Object {
      "Next": "1__typeof input.obj === \\"object\\"",
      "Result": "object",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "return {isString: typeof input.str === \\"string\\", stringType: typeof input.s": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "string__return {isString: typeof input.str === \\"string\\", stringType: typeof",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "boolean__return {isString: typeof input.str === \\"string\\", stringType: typeo",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.str",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.str",
            },
          ],
          "Next": "number__return {isString: typeof input.str === \\"string\\", stringType: typeof",
        },
        Object {
          "IsPresent": true,
          "Next": "object__return {isString: typeof input.str === \\"string\\", stringType: typeof",
          "Variable": "$.input.str",
        },
      ],
      "Default": "undefined__return {isString: typeof input.str === \\"string\\", stringType: typ",
      "Type": "Choice",
    },
    "string__input.arr": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu",
      "Result": "string",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "string__input.bool": Object {
      "Next": "typeof input.num === \\"number\\"",
      "Result": "string",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "string__input.num": Object {
      "Next": "typeof input.obj === \\"object\\"",
      "Result": "string",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "string__input.obj": Object {
      "Next": "input.arr",
      "Result": "string",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "string__input.str": Object {
      "Next": "typeof input.bool === \\"boolean\\"",
      "Result": "string",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "string__return {isString: typeof input.str === \\"string\\", stringType: typeof": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1",
      "Result": "string",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "string__typeof input.bool === \\"boolean\\"": Object {
      "Next": "1__typeof input.bool === \\"boolean\\"",
      "Result": "string",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "string__typeof input.num === \\"number\\"": Object {
      "Next": "1__typeof input.num === \\"number\\"",
      "Result": "string",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "string__typeof input.obj === \\"object\\"": Object {
      "Next": "1__typeof input.obj === \\"object\\"",
      "Result": "string",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
    "typeof input.bool === \\"boolean\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "string__typeof input.bool === \\"boolean\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "boolean__typeof input.bool === \\"boolean\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.bool",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.bool",
            },
          ],
          "Next": "number__typeof input.bool === \\"boolean\\"",
        },
        Object {
          "IsPresent": true,
          "Next": "object__typeof input.bool === \\"boolean\\"",
          "Variable": "$.input.bool",
        },
      ],
      "Default": "undefined__typeof input.bool === \\"boolean\\"",
      "Type": "Choice",
    },
    "typeof input.num === \\"number\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "string__typeof input.num === \\"number\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "boolean__typeof input.num === \\"number\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.num",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.num",
            },
          ],
          "Next": "number__typeof input.num === \\"number\\"",
        },
        Object {
          "IsPresent": true,
          "Next": "object__typeof input.num === \\"number\\"",
          "Variable": "$.input.num",
        },
      ],
      "Default": "undefined__typeof input.num === \\"number\\"",
      "Type": "Choice",
    },
    "typeof input.obj === \\"object\\"": Object {
      "Choices": Array [
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsString": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "string__typeof input.obj === \\"object\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsBoolean": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "boolean__typeof input.obj === \\"object\\"",
        },
        Object {
          "And": Array [
            Object {
              "IsPresent": true,
              "Variable": "$.input.obj",
            },
            Object {
              "IsNumeric": true,
              "Variable": "$.input.obj",
            },
          ],
          "Next": "number__typeof input.obj === \\"object\\"",
        },
        Object {
          "IsPresent": true,
          "Next": "object__typeof input.obj === \\"object\\"",
          "Variable": "$.input.obj",
        },
      ],
      "Default": "undefined__typeof input.obj === \\"object\\"",
      "Type": "Choice",
    },
    "undefined__input.arr": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu",
      "Result": "undefined",
      "ResultPath": "$.heap12",
      "Type": "Pass",
    },
    "undefined__input.bool": Object {
      "Next": "typeof input.num === \\"number\\"",
      "Result": "undefined",
      "ResultPath": "$.heap5",
      "Type": "Pass",
    },
    "undefined__input.num": Object {
      "Next": "typeof input.obj === \\"object\\"",
      "Result": "undefined",
      "ResultPath": "$.heap8",
      "Type": "Pass",
    },
    "undefined__input.obj": Object {
      "Next": "input.arr",
      "Result": "undefined",
      "ResultPath": "$.heap11",
      "Type": "Pass",
    },
    "undefined__input.str": Object {
      "Next": "typeof input.bool === \\"boolean\\"",
      "Result": "undefined",
      "ResultPath": "$.heap2",
      "Type": "Pass",
    },
    "undefined__return {isString: typeof input.str === \\"string\\", stringType: typ": Object {
      "Next": "1__return {isString: typeof input.str === \\"string\\", stringType: typeof inpu 1",
      "Result": "undefined",
      "ResultPath": "$.heap0",
      "Type": "Pass",
    },
    "undefined__typeof input.bool === \\"boolean\\"": Object {
      "Next": "1__typeof input.bool === \\"boolean\\"",
      "Result": "undefined",
      "ResultPath": "$.heap3",
      "Type": "Pass",
    },
    "undefined__typeof input.num === \\"number\\"": Object {
      "Next": "1__typeof input.num === \\"number\\"",
      "Result": "undefined",
      "ResultPath": "$.heap6",
      "Type": "Pass",
    },
    "undefined__typeof input.obj === \\"object\\"": Object {
      "Next": "1__typeof input.obj === \\"object\\"",
      "Result": "undefined",
      "ResultPath": "$.heap9",
      "Type": "Pass",
    },
  },
}
`;

// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`api-gateway.ts 1`] = `
"[96mtest/test-files/api-gateway.ts[0m:[93m74[0m:[93m5[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m74[0m   },
[7m  [0m [91m    [0m
[7m75[0m   ($input) => {
[7m  [0m [91m~~~~~~~~~~~~~~~[0m
[7m76[0m     return $input.data;
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m77[0m   },
[7m  [0m [91m~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m89[0m:[93m20[0m - [91merror[0m[90m Functionless(10011): [0mAPI Gateway does not support spread assignment expressions

https://functionless.org/docs/error-codes#api-gateway-does-not-support-spread-assignment-expressions

[7m89[0m       Table: table,
[7m  [0m [91m                   [0m
[7m90[0m       ...$input.data,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m90[0m:[93m22[0m - [91merror[0m[90m Functionless(10010): [0mAPI Gateway does not supported computed property names

https://functionless.org/docs/error-codes#api-gateway-does-not-supported-computed-property-names

[7m90[0m       ...$input.data,
[7m  [0m [91m                     [0m
[7m91[0m       [$input.params(\\"param\\")]: null,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m114[0m:[93m11[0m - [91merror[0m[90m Functionless(10013): [0mAPI gateway response mapping template cannot call integration

https://functionless.org/docs/error-codes#api-gateway-response-mapping-template-cannot-call-integration

[7m114[0m     return $AWS.DynamoDB.GetItem({
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m115[0m       Table: table,
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m120[0m       },
[7m   [0m [91m~~~~~~~~[0m
[7m121[0m     });
[7m   [0m [91m~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m130[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m130[0m     const sfn = new StepFunction(stack, \\"\\", () => {});
[7m   [0m [91m               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m133[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m133[0m   () => {
[7m   [0m [91m         [0m
[7m134[0m     new StepFunction(stack, \\"\\", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m141[0m:[93m17[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m141[0m     const func = new Function<undefined, void>(stack, \\"\\", async () => {});
[7m   [0m [91m                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m144[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m144[0m   () => {
[7m   [0m [91m         [0m
[7m145[0m     new Function(stack, \\"\\", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m152[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m152[0m     const bus = new EventBus(stack, \\"\\");
[7m   [0m [91m               ~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m155[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m155[0m   () => {
[7m   [0m [91m         [0m
[7m156[0m     new EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m162[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m162[0m   async () => {
[7m   [0m [91m               [0m
[7m163[0m     new aws_events.EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m166[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m166[0m   () => {
[7m   [0m [91m         [0m
[7m167[0m     new aws_events.EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
"
`;

exports[`appsync.ts 1`] = `
"[96mtest/test-files/appsync.ts[0m:[93m49[0m:[93m5[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m49[0m   },
[7m  [0m [91m    [0m
[7m50[0m   // invalid - must be an inline function
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m51[0m   f
[7m  [0m [91m~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m61[0m:[93m5[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m 61[0m   },
[7m   [0m [91m    [0m
[7m 62[0m   // invalid - must be an inline function
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 65[0m       null
[7m   [0m [91m~~~~~~~~~~[0m
[7m 66[0m   )()
[7m   [0m [91m~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m82[0m:[93m58[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m 82[0m         { api, typeName: \\"Query\\", fieldName: \\"getPost\\" },
[7m   [0m [91m                                                         [0m
[7m 83[0m         // invalid - must be an inline function
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 86[0m             null
[7m   [0m [91m~~~~~~~~~~~~~~~~[0m
[7m 87[0m         )()
[7m   [0m [91m~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m108[0m:[93m14[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m108[0m     const c = func();
[7m   [0m [91m             ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m121[0m:[93m14[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m121[0m     const c = func();
[7m   [0m [91m             ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m135[0m:[93m11[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m135[0m     return func().then((x) => x);
[7m   [0m [91m          ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m147[0m:[93m11[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m147[0m     return func().catch((x) => x);
[7m   [0m [91m          ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m200[0m:[93m11[0m - [91merror[0m[90m Functionless(10017): [0mArrays of Integration must be immediately wrapped in Promise.all

https://functionless.org/docs/error-codes#arrays-of-integration-must-be-immediately-wrapped-in-promise.all

[7m200[0m     return [1, 2].map(async () => func());
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m212[0m:[93m14[0m - [91merror[0m[90m Functionless(10018): [0mAppsync does not support concurrent integration invocation or methods on the \`Promise\` api.

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m212[0m     const c = Promise.all([1, 2].map(async () => func()));
[7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m226[0m:[93m11[0m - [91merror[0m[90m Functionless(10018): [0mAppsync does not support concurrent integration invocation or methods on the \`Promise\` api.

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m226[0m     return Promise.all(c);
[7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m239[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m239[0m   async () => {
[7m   [0m [91m               [0m
[7m240[0m     new StepFunction(stack, \\"\\", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m251[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m251[0m   async () => {
[7m   [0m [91m               [0m
[7m252[0m     new Function(stack, \\"\\", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m263[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m263[0m   async () => {
[7m   [0m [91m               [0m
[7m264[0m     new EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m275[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m275[0m   async () => {
[7m   [0m [91m               [0m
[7m276[0m     new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m284[0m       () => {}
[7m   [0m [91m~~~~~~~~~~~~~~[0m
[7m285[0m     );
[7m   [0m [91m~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m280[0m:[93m13[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m280[0m         api: new GraphqlApi(stack, \\"\\", { name: \\"api\\" }),
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m296[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m296[0m   async () => {
[7m   [0m [91m               [0m
[7m297[0m     new aws_events.EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m314[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be deterministic

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-deterministic

[7m314[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m329[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be deterministic

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-deterministic

[7m329[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m344[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be deterministic

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-deterministic

[7m344[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m358[0m:[93m46[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be deterministic

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-deterministic

[7m358[0m     const c = $context.arguments.bool ? await func() : \\"x\\";
[7m   [0m [91m                                             ~~~~~~~[0m
"
`;

exports[`event-bus.ts 1`] = `
"[96mtest/test-files/event-bus.ts[0m:[93m16[0m:[93m22[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m16[0m bus.all().map(() => {
[7m  [0m [91m                     [0m
[7m17[0m   // eslint-disable-next-line @typescript-eslint/no-floating-promises
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m18[0m   bus.putEvents({ \\"detail-type\\": \\"detail\\", detail: {}, source: \\"\\" });
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m23[0m:[93m9[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m23[0m   return func();
[7m  [0m [91m        ~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m35[0m:[93m11[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m35[0m   return (func() as any) === \\"x\\";
[7m  [0m [91m          ~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m39[0m:[93m11[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m39[0m   return (func() as any) === \\"x\\";
[7m  [0m [91m          ~~~~~~[0m
"
`;

exports[`function.ts 1`] = `
"[96mtest/test-files/function.ts[0m:[93m35[0m:[93m51[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m35[0m new Function(stack, \\"event bus bus\\", async () => {
[7m  [0m [91m                                                  [0m
[7m36[0m   bus.resource.eventBusArn;
[7m  [0m [91m~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m39[0m:[93m50[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m39[0m new Function(stack, \\"sfn resource\\", async () => {
[7m  [0m [91m                                                 [0m
[7m40[0m   sfn.resource.stateMachineArn;
[7m  [0m [91m~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m43[0m:[93m51[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m43[0m new Function(stack, \\"func resource\\", async () => {
[7m  [0m [91m                                                  [0m
[7m44[0m   func.resource;
[7m  [0m [91m~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m47[0m:[93m52[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m47[0m new Function(stack, \\"table resource\\", async () => {
[7m  [0m [91m                                                   [0m
[7m48[0m   table.resource;
[7m  [0m [91m~~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m82[0m:[93m15[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m82[0m         return bus.resource;
[7m  [0m [91m              ~~~~[0m
[96mtest/test-files/function.ts[0m:[93m105[0m:[93m50[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m105[0m new Function(stack, \\"new resolver\\", async () => {
[7m   [0m [91m                                                 [0m
[7m106[0m   new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m114[0m     () => {}
[7m   [0m [91m~~~~~~~~~~~~[0m
[7m115[0m   );
[7m   [0m [91m~~~[0m
[96mtest/test-files/function.ts[0m:[93m110[0m:[93m11[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m110[0m       api: new GraphqlApi(stack, \\"\\", { name: \\"api\\" }),
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m118[0m:[93m50[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m118[0m new Function(stack, \\"cdk resource\\", async () => {
[7m   [0m [91m                                                 [0m
[7m119[0m   new aws_events.EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
"
`;

exports[`step-function.ts 1`] = `
"[96mtest/test-files/step-function.ts[0m:[93m11[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m11[0m new StepFunction(stack, \\"input.i + 2\\", (input: { i: number }) => input.i + 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m12[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m12[0m new StepFunction(stack, \\"input.i - 2\\", (input: { i: number }) => input.i - 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m14[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m14[0m new StepFunction(stack, \\"input.i / 2\\", (input: { i: number }) => input.i / 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m15[0m:[93m62[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m15[0m new StepFunction(stack, \\"-input.i\\", (input: { i: number }) => -input.i);
[7m  [0m [91m                                                             ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m20[0m:[93m14[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m20[0m     const a = input.i + 1;
[7m  [0m [91m             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m73[0m:[93m15[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-arithmetic-on-variables-in-step-function

[7m73[0m         return input.i + 1;
[7m  [0m [91m              ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m86[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m86[0m   const c = func();
[7m  [0m [91m           ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m91[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m91[0m   const c = func();
[7m  [0m [91m           ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m97[0m:[93m9[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m97[0m   return func().then((x) => x);
[7m  [0m [91m        ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m101[0m:[93m9[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m101[0m   return func().catch((x) => x);
[7m   [0m [91m        ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m124[0m:[93m9[0m - [91merror[0m[90m Functionless(10017): [0mArrays of Integration must be immediately wrapped in Promise.all

https://functionless.org/docs/error-codes#arrays-of-integration-must-be-immediately-wrapped-in-promise.all

[7m124[0m   return [1, 2].map(async () => func());
[7m   [0m [91m        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m128[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m128[0m   const c = Promise.all([1, 2].map(async () => func()));
[7m   [0m [91m           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m134[0m:[93m9[0m - [91merror[0m[90m Functionless(10018): [0mUnsupported use of Promises

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m134[0m   return Promise.all(c);
[7m   [0m [91m        ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m139[0m:[93m59[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m139[0m new StepFunction(stack, \\"new step function\\", async () => {
[7m   [0m [91m                                                          [0m
[7m140[0m   new StepFunction(stack, \\"\\", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m143[0m:[93m54[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m143[0m new StepFunction(stack, \\"new function\\", async () => {
[7m   [0m [91m                                                     [0m
[7m144[0m   new Function(stack, \\"\\", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m147[0m:[93m49[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m147[0m new StepFunction(stack, \\"new bus\\", async () => {
[7m   [0m [91m                                                [0m
[7m148[0m   new EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m151[0m:[93m54[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m151[0m new StepFunction(stack, \\"new resolver\\", async () => {
[7m   [0m [91m                                                     [0m
[7m152[0m   new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m160[0m     () => {}
[7m   [0m [91m~~~~~~~~~~~~[0m
[7m161[0m   );
[7m   [0m [91m~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m156[0m:[93m11[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m156[0m       api: new GraphqlApi(stack, \\"\\", { name: \\"api\\" }),
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m164[0m:[93m48[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m164[0m new StepFunction(stack, \\"cdk resource\\", () => {
[7m   [0m [91m                                               [0m
[7m165[0m   new aws_events.EventBus(stack, \\"\\");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
"
`;

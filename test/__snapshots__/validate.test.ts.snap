// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`api-gateway.ts 1`] = `
<<<<<<< HEAD
"[96mtest/test-files/api-gateway.ts[0m:[93m49[0m:[93m5[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m 49[0m   },
[7m   [0m [91m    [0m
[7m 50[0m   ($input) =>
[7m   [0m [91m~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 56[0m       },
[7m   [0m [91m~~~~~~~~[0m
[7m 57[0m     }),
[7m   [0m [91m~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m66[0m:[93m5[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m66[0m   },
[7m  [0m [91m    [0m
[7m67[0m   ($input) => {
[7m  [0m [91m~~~~~~~~~~~~~~~[0m
[7m68[0m     return $input.data;
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m69[0m   },
[7m  [0m [91m~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m80[0m:[93m34[0m - [91merror[0m[90m Functionless(10011): [0mAPI Gateway does not support spread assignment expressions
=======
"[96mtest/test-files/api-gateway.ts[0m:[93m80[0m:[93m34[0m - [91merror[0m[90m Functionless(10011): [0mAPI Gateway does not support spread assignment expressions
>>>>>>> main

https://functionless.org/docs/error-codes#api-gateway-does-not-support-spread-assignment-expressions

[7m80[0m     return table.attributes.get({
[7m  [0m [91m                                 [0m
[7m81[0m       ...$input.data,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m81[0m:[93m22[0m - [91merror[0m[90m Functionless(10010): [0mAPI Gateway does not supported computed property names

https://functionless.org/docs/error-codes#api-gateway-does-not-supported-computed-property-names

[7m81[0m       ...$input.data,
[7m  [0m [91m                     [0m
[7m82[0m       [$input.params("param")]: null,
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
<<<<<<< HEAD
[96mtest/test-files/api-gateway.ts[0m:[93m78[0m:[93m5[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m 78[0m   },
[7m   [0m [91m    [0m
[7m 79[0m   ($input) => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 83[0m     });
[7m   [0m [91m~~~~~~~[0m
[7m 84[0m   },
[7m   [0m [91m~~~[0m
=======
>>>>>>> main
[96mtest/test-files/api-gateway.ts[0m:[93m104[0m:[93m11[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: table

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m104[0m     return table.attributes.get({
[7m   [0m [91m          ~~~~~~[0m
<<<<<<< HEAD
[96mtest/test-files/api-gateway.ts[0m:[93m93[0m:[93m5[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m 93[0m   },
[7m   [0m [91m    [0m
[7m 94[0m   ($input) =>
[7m   [0m [91m~~~~~~~~~~~~~[0m
[7m...[0m 
[7m100[0m       },
[7m   [0m [91m~~~~~~~~[0m
[7m101[0m     }),
[7m   [0m [91m~~~~~~[0m
=======
>>>>>>> main
[96mtest/test-files/api-gateway.ts[0m:[93m119[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m119[0m     const sfn = new StepFunction(stack, "", () => {});
[7m   [0m [91m               ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m120[0m:[93m11[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m120[0m     return sfn({});
[7m   [0m [91m          ~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m122[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m122[0m   () => {
[7m   [0m [91m         [0m
[7m123[0m     new StepFunction(stack, "", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m123[0m:[93m8[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: StepFunction

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m123[0m     new StepFunction(stack, "", () => {});
[7m   [0m [91m       ~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m123[0m:[93m22[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: stack

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m123[0m     new StepFunction(stack, "", () => {});
[7m   [0m [91m                     ~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m130[0m:[93m17[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m130[0m     const func = new Function<undefined, void>(stack, "", async () => {});
[7m   [0m [91m                ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m131[0m:[93m11[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m131[0m     return func();
[7m   [0m [91m          ~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m133[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m133[0m   () => {
[7m   [0m [91m         [0m
[7m134[0m     new Function(stack, "", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m134[0m:[93m8[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: Function

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m134[0m     new Function(stack, "", async () => {});
[7m   [0m [91m       ~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m134[0m:[93m18[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: stack

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m134[0m     new Function(stack, "", async () => {});
[7m   [0m [91m                 ~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m141[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m141[0m     const bus = new EventBus(stack, "");
[7m   [0m [91m               ~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m144[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m144[0m   () => {
[7m   [0m [91m         [0m
[7m145[0m     new EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m145[0m:[93m8[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: EventBus

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m145[0m     new EventBus(stack, "");
[7m   [0m [91m       ~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m145[0m:[93m18[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: stack

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m145[0m     new EventBus(stack, "");
[7m   [0m [91m                 ~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m151[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m151[0m   async () => {
[7m   [0m [91m               [0m
[7m152[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m152[0m:[93m8[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: aws_events

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m152[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m       ~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m152[0m:[93m29[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: stack

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m152[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m                            ~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m155[0m:[93m10[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m155[0m   () => {
[7m   [0m [91m         [0m
[7m156[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m156[0m:[93m8[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: aws_events

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m156[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m       ~~~~~~~~~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m156[0m:[93m29[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: stack

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m156[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m                            ~~~~~[0m
<<<<<<< HEAD
[96mtest/test-files/api-gateway.ts[0m:[93m163[0m:[93m45[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m163[0m   { httpMethod: "ANY", resource: api.root },
[7m   [0m [91m                                            [0m
[7m164[0m   async () => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m171[0m     await table.attributes.get(event);
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m172[0m   },
[7m   [0m [91m~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m181[0m:[93m45[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m181[0m   { httpMethod: "ANY", resource: api.root },
[7m   [0m [91m                                            [0m
[7m182[0m   async () => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m187[0m     });
[7m   [0m [91m~~~~~~~[0m
[7m188[0m   },
[7m   [0m [91m~~~[0m
=======
>>>>>>> main
[96mtest/test-files/api-gateway.ts[0m:[93m203[0m:[93m10[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m203[0m     await x("");
[7m   [0m [91m         ~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m221[0m:[93m17[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: a

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m221[0m         id: { S: a },
[7m   [0m [91m                ~~[0m
<<<<<<< HEAD
[96mtest/test-files/api-gateway.ts[0m:[93m217[0m:[93m45[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m217[0m   { httpMethod: "ANY", resource: api.root },
[7m   [0m [91m                                            [0m
[7m218[0m   async () => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m223[0m     });
[7m   [0m [91m~~~~~~~[0m
[7m224[0m   },
[7m   [0m [91m~~~[0m
=======
>>>>>>> main
[96mtest/test-files/api-gateway.ts[0m:[93m240[0m:[93m11[0m - [91merror[0m[90m Functionless(10029): [0mApiGateway Unsupported Reference: a

https://functionless.org/docs/error-codes#apigateway-unsupported-reference

[7m240[0m     return a;
[7m   [0m [91m          ~~[0m
<<<<<<< HEAD
[96mtest/test-files/api-gateway.ts[0m:[93m231[0m:[93m45[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m231[0m   { httpMethod: "ANY", resource: api.root },
[7m   [0m [91m                                            [0m
[7m232[0m   async () => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m237[0m     });
[7m   [0m [91m~~~~~~~[0m
[7m238[0m   },
[7m   [0m [91m~~~[0m
[96mtest/test-files/api-gateway.ts[0m:[93m248[0m:[93m45[0m - [91merror[0m[90m Functionless(10003): [0mAwsMethod request must have exactly one integration call

https://functionless.org/docs/error-codes#awsmethod-request-must-have-exactly-one-integration-call

[7m248[0m   { httpMethod: "ANY", resource: api.root },
[7m   [0m [91m                                            [0m
[7m249[0m   async () => {
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m255[0m     });
[7m   [0m [91m~~~~~~~[0m
[7m256[0m   },
[7m   [0m [91m~~~[0m
=======
>>>>>>> main
[96mtest/test-files/api-gateway.ts[0m:[93m272[0m:[93m26[0m - [91merror[0m[90m Functionless(10012): [0mAPI Gateway Integration with EventBus.putEvents expects object literals with no computed properties

https://functionless.org/docs/error-codes#expected-an-object-literal

[7m272[0m     return bus.putEvents(x);
[7m   [0m [91m                         ~[0m
"
`;

exports[`appsync.ts 1`] = `
"[96mtest/test-files/appsync.ts[0m:[93m68[0m:[93m5[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m68[0m   },
[7m  [0m [91m    [0m
[7m69[0m   // invalid - must be an inline function
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m70[0m   f
[7m  [0m [91m~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m80[0m:[93m5[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m 80[0m   },
[7m   [0m [91m    [0m
[7m 81[0m   // invalid - must be an inline function
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m 84[0m       null
[7m   [0m [91m~~~~~~~~~~[0m
[7m 85[0m   )()
[7m   [0m [91m~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m101[0m:[93m58[0m - [91merror[0m[90m Functionless(10002): [0mArgument must be an inline Function

https://functionless.org/docs/error-codes#argument-must-be-an-inline-function

[7m101[0m         { api, typeName: "Query", fieldName: "getPost" },
[7m   [0m [91m                                                         [0m
[7m102[0m         // invalid - must be an inline function
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m105[0m             null
[7m   [0m [91m~~~~~~~~~~~~~~~~[0m
[7m106[0m         )()
[7m   [0m [91m~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m127[0m:[93m14[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m127[0m     const c = func();
[7m   [0m [91m             ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m140[0m:[93m14[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m140[0m     const c = func();
[7m   [0m [91m             ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m154[0m:[93m11[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m154[0m     return func().then((x) => x);
[7m   [0m [91m          ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m166[0m:[93m11[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m166[0m     return func().catch((x) => x);
[7m   [0m [91m          ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m219[0m:[93m11[0m - [91merror[0m[90m Functionless(10017): [0mArrays of Integration must be immediately wrapped in Promise.all

https://functionless.org/docs/error-codes#arrays-of-integration-must-be-immediately-wrapped-in-promise.all

[7m219[0m     return [1, 2].map(async () => func());
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m231[0m:[93m14[0m - [91merror[0m[90m Functionless(10018): [0mAppsync does not support concurrent integration invocation or methods on the \`Promise\` api.

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m231[0m     const c = Promise.all([1, 2].map(async () => func()));
[7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m245[0m:[93m11[0m - [91merror[0m[90m Functionless(10018): [0mAppsync does not support concurrent integration invocation or methods on the \`Promise\` api.

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m245[0m     return Promise.all(c);
[7m   [0m [91m          ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m258[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m258[0m   async () => {
[7m   [0m [91m               [0m
[7m259[0m     new StepFunction(stack, "", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m270[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m270[0m   async () => {
[7m   [0m [91m               [0m
[7m271[0m     new Function(stack, "", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m282[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m282[0m   async () => {
[7m   [0m [91m               [0m
[7m283[0m     new EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m294[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m294[0m   async () => {
[7m   [0m [91m               [0m
[7m295[0m     new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m303[0m       () => {}
[7m   [0m [91m~~~~~~~~~~~~~~[0m
[7m304[0m     );
[7m   [0m [91m~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m295[0m:[93m8[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: AppsyncResolver

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m295[0m     new AppsyncResolver(
[7m   [0m [91m       ~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m295[0m:[93m25[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: stack

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m295[0m     new AppsyncResolver(
[7m   [0m [91m                        [0m
[7m296[0m       stack,
[7m   [0m [91m~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m299[0m:[93m13[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m299[0m         api: new GraphqlApi(stack, "", { name: "api" }),
[7m   [0m [91m            ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m299[0m:[93m17[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: GraphqlApi

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m299[0m         api: new GraphqlApi(stack, "", { name: "api" }),
[7m   [0m [91m                ~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m299[0m:[93m29[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: stack

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m299[0m         api: new GraphqlApi(stack, "", { name: "api" }),
[7m   [0m [91m                            ~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m315[0m:[93m16[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m315[0m   async () => {
[7m   [0m [91m               [0m
[7m316[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m316[0m:[93m8[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: aws_events

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m316[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m       ~~~~~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m316[0m:[93m29[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: stack

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m316[0m     new aws_events.EventBus(stack, "");
[7m   [0m [91m                            ~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m333[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be unidirectional and defined statically

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-unidirectional-and-defined-statically

[7m333[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m348[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be unidirectional and defined statically

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-unidirectional-and-defined-statically

[7m348[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m363[0m:[93m12[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be unidirectional and defined statically

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-unidirectional-and-defined-statically

[7m363[0m       await func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m377[0m:[93m46[0m - [91merror[0m[90m Functionless(10020): [0mAppsync Integration invocations must be unidirectional and defined statically

https://functionless.org/docs/error-codes#appsync-integration-invocations-must-be-unidirectional-and-defined-statically

[7m377[0m     const c = $context.arguments.bool ? await func() : "x";
[7m   [0m [91m                                             ~~~~~~~[0m
[96mtest/test-files/appsync.ts[0m:[93m434[0m:[93m10[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m434[0m     await x();
[7m   [0m [91m         ~~[0m
[96mtest/test-files/appsync.ts[0m:[93m452[0m:[93m11[0m - [91merror[0m[90m Functionless(10028): [0mAppSync Unsupported Reference: a

https://functionless.org/docs/error-codes#appsync-unsupported-reference

[7m452[0m     return a;
[7m   [0m [91m          ~~[0m
"
`;

exports[`event-bus.ts 1`] = `
"[96mtest/test-files/event-bus.ts[0m:[93m16[0m:[93m22[0m - [91merror[0m[90m Functionless(10014): [0mEventBus Input Transformers do not support integrations

https://functionless.org/docs/error-codes#eventbus-input-transformers-do-not-support-integrations

[7m16[0m bus.all().map(() => {
[7m  [0m [91m                     [0m
[7m17[0m   // eslint-disable-next-line @typescript-eslint/no-floating-promises
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[7m18[0m   bus.putEvents({ "detail-type": "detail", detail: {}, source: "" });
[7m  [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m23[0m:[93m9[0m - [91merror[0m[90m Functionless(10014): [0mEventBus Input Transformers do not support integrations

https://functionless.org/docs/error-codes#eventbus-input-transformers-do-not-support-integrations

[7m23[0m   return func();
[7m  [0m [91m        ~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m35[0m:[93m11[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m35[0m   return (func() as any) === "x";
[7m  [0m [91m          ~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m39[0m:[93m11[0m - [91merror[0m[90m Functionless(10015): [0mEventBus Rules do not support integrations

https://functionless.org/docs/error-codes#eventbus-rules-do-not-support-integrations

[7m39[0m   return (func() as any) === "x";
[7m  [0m [91m          ~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m43[0m:[93m34[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m43[0m bus.when("rule", (event) => <any>event);
[7m  [0m [91m                                 ~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m44[0m:[93m28[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m44[0m bus.when("rule", (event) => event as any);
[7m  [0m [91m                           ~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m45[0m:[93m28[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m45[0m bus.when("rule", (event) => event.detail.a);
[7m  [0m [91m                           ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m46[0m:[93m30[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m46[0m bus.when("rule", (event) => !event.detail.a);
[7m  [0m [91m                             ~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m47[0m:[93m30[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m47[0m bus.when("rule", (event) => !event.detail.a || event.detail.b === "b");
[7m  [0m [91m                             ~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m48[0m:[93m56[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m48[0m bus.when("rule", (event) => event.detail.a === "b" || !event.detail.b);
[7m  [0m [91m                                                       ~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m49[0m:[93m28[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m49[0m bus.when("rule", (event) => event.detail.a && event.detail.b === "b");
[7m  [0m [91m                           ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m50[0m:[93m54[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m50[0m bus.when("rule", (event) => event.detail.a === "a" && event.detail.b);
[7m  [0m [91m                                                     ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m51[0m:[93m28[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m51[0m bus.when("rule", (event) => event.detail.a || event.detail.b === "b");
[7m  [0m [91m                           ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/event-bus.ts[0m:[93m52[0m:[93m54[0m - [91merror[0m[90m Functionless(10032): [0mEvent Bridge does not support a truthy comparison

https://functionless.org/docs/error-codes#event-bridge-does-not-support-a-truthy-comparison

[7m52[0m bus.when("rule", (event) => event.detail.a === "a" || event.detail.b);
[7m  [0m [91m                                                     ~~~~~~~~~~~~~~~[0m
"
`;

exports[`function.ts 1`] = `
"[96mtest/test-files/function.ts[0m:[93m35[0m:[93m51[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m35[0m new Function(stack, "event bus bus", async () => {
[7m  [0m [91m                                                  [0m
[7m36[0m   bus.resource.eventBusArn;
[7m  [0m [91m~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m39[0m:[93m50[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m39[0m new Function(stack, "sfn resource", async () => {
[7m  [0m [91m                                                 [0m
[7m40[0m   sfn.resource.stateMachineArn;
[7m  [0m [91m~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m43[0m:[93m51[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m43[0m new Function(stack, "func resource", async () => {
[7m  [0m [91m                                                  [0m
[7m44[0m   func.resource;
[7m  [0m [91m~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m47[0m:[93m52[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m47[0m new Function(stack, "table resource", async () => {
[7m  [0m [91m                                                   [0m
[7m48[0m   table.resource;
[7m  [0m [91m~~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m82[0m:[93m15[0m - [91merror[0m[90m Functionless(10009): [0mCannot use infrastructure Resource in Function closure

https://functionless.org/docs/error-codes#cannot-use-infrastructure-resource-in-function-closure

[7m82[0m         return bus.resource;
[7m  [0m [91m              ~~~~[0m
[96mtest/test-files/function.ts[0m:[93m105[0m:[93m50[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m105[0m new Function(stack, "new resolver", async () => {
[7m   [0m [91m                                                 [0m
[7m106[0m   new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m114[0m     () => {}
[7m   [0m [91m~~~~~~~~~~~~[0m
[7m115[0m   );
[7m   [0m [91m~~~[0m
[96mtest/test-files/function.ts[0m:[93m110[0m:[93m11[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m110[0m       api: new GraphqlApi(stack, "", { name: "api" }),
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m118[0m:[93m50[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m118[0m new Function(stack, "cdk resource", async () => {
[7m   [0m [91m                                                 [0m
[7m119[0m   new aws_events.EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/function.ts[0m:[93m151[0m:[93m8[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m151[0m   await x("");
[7m   [0m [91m       ~~[0m
"
`;

exports[`step-function.ts 1`] = `
"[96mtest/test-files/step-function.ts[0m:[93m34[0m:[93m65[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m34[0m new StepFunction(stack, "input.i + 2", (input: { i: number }) => input.i + 2);
[7m  [0m [93m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m35[0m:[93m65[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m35[0m new StepFunction(stack, "input.i - 2", (input: { i: number }) => input.i - 2);
[7m  [0m [93m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m36[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m36[0m new StepFunction(stack, "input.i * 2", (input: { i: number }) => input.i * 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m37[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m37[0m new StepFunction(stack, "input.i / 2", (input: { i: number }) => input.i / 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m38[0m:[93m65[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m38[0m new StepFunction(stack, "input.i % 2", (input: { i: number }) => input.i % 2);
[7m  [0m [91m                                                                ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m42[0m:[93m30[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m42[0m   (input: { i: number }) => (input.i += 2)
[7m  [0m [93m                             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m47[0m:[93m30[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m47[0m   (input: { i: number }) => (input.i *= 2)
[7m  [0m [91m                             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m52[0m:[93m30[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m52[0m   (input: { i: number }) => (input.i -= 2)
[7m  [0m [93m                             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m57[0m:[93m30[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m57[0m   (input: { i: number }) => (input.i /= 2)
[7m  [0m [91m                             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m62[0m:[93m30[0m - [91merror[0m[90m Functionless(10000): [0mCannot perform all arithmetic on variables in Step Function

https://functionless.org/docs/error-codes#cannot-perform-all-arithmetic-on-variables-in-step-function

[7m62[0m   (input: { i: number }) => (input.i %= 2)
[7m  [0m [91m                             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m64[0m:[93m63[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m64[0m new StepFunction(stack, "input.i++", (input: { i: number }) => input.i++);
[7m  [0m [93m                                                              ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m65[0m:[93m63[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m65[0m new StepFunction(stack, "++input.i", (input: { i: number }) => ++input.i);
[7m  [0m [93m                                                              ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m66[0m:[93m63[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m66[0m new StepFunction(stack, "input.i--", (input: { i: number }) => input.i--);
[7m  [0m [93m                                                              ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m67[0m:[93m63[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m67[0m new StepFunction(stack, "--input.i", (input: { i: number }) => --input.i);
[7m  [0m [93m                                                              ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m68[0m:[93m62[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m68[0m new StepFunction(stack, "-input.i", (input: { i: number }) => -input.i);
[7m  [0m [93m                                                             ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m73[0m:[93m14[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m73[0m     const a = input.i + 1;
[7m  [0m [93m             ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m128[0m:[93m15[0m - [93mwarning[0m[90m Functionless(10038): [0mStep Functions Arithmetic Only Supports Integers

https://functionless.org/docs/error-codes#step-functions-arithmetic-only-supports-integers

[7m128[0m         return input.i + 1;
[7m   [0m [93m              ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m137[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m137[0m   const c = func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m142[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m142[0m   const c = func();
[7m   [0m [91m           ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m148[0m:[93m9[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m148[0m   return func().then((x) => x);
[7m   [0m [91m        ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m152[0m:[93m9[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m152[0m   return func().catch((x) => x);
[7m   [0m [91m        ~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m175[0m:[93m9[0m - [91merror[0m[90m Functionless(10017): [0mArrays of Integration must be immediately wrapped in Promise.all

https://functionless.org/docs/error-codes#arrays-of-integration-must-be-immediately-wrapped-in-promise.all

[7m175[0m   return [1, 2].map(async () => func());
[7m   [0m [91m        ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m179[0m:[93m12[0m - [91merror[0m[90m Functionless(10016): [0mIntegration must be immediately awaited or returned

https://functionless.org/docs/error-codes#integration-must-be-immediately-awaited-or-returned

[7m179[0m   const c = Promise.all([1, 2].map(async () => func()));
[7m   [0m [91m           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m185[0m:[93m9[0m - [91merror[0m[90m Functionless(10018): [0mUnsupported use of Promises

https://functionless.org/docs/error-codes#unsupported-use-of-promises

[7m185[0m   return Promise.all(c);
[7m   [0m [91m        ~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m190[0m:[93m59[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found StepFunction.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m190[0m new StepFunction(stack, "new step function", async () => {
[7m   [0m [91m                                                          [0m
[7m191[0m   new StepFunction(stack, "", () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m194[0m:[93m54[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found Function.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m194[0m new StepFunction(stack, "new function", async () => {
[7m   [0m [91m                                                     [0m
[7m195[0m   new Function(stack, "", async () => {});
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m198[0m:[93m49[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m198[0m new StepFunction(stack, "new bus", async () => {
[7m   [0m [91m                                                [0m
[7m199[0m   new EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m202[0m:[93m54[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new resources in a runtime function, found AppsyncResolver.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m202[0m new StepFunction(stack, "new resolver", async () => {
[7m   [0m [91m                                                     [0m
[7m203[0m   new AppsyncResolver(
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~[0m
[7m...[0m 
[7m211[0m     () => {}
[7m   [0m [91m~~~~~~~~~~~~[0m
[7m212[0m   );
[7m   [0m [91m~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m207[0m:[93m11[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found GraphqlApi.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m207[0m       api: new GraphqlApi(stack, "", { name: "api" }),
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m215[0m:[93m48[0m - [91merror[0m[90m Functionless(10008): [0mCannot initialize new CDK resources in a runtime function, found EventBus.

https://functionless.org/docs/error-codes#unsupported-initialization-of-resources-in-a-runtime-closure

[7m215[0m new StepFunction(stack, "cdk resource", () => {
[7m   [0m [91m                                               [0m
[7m216[0m   new aws_events.EventBus(stack, "");
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m229[0m:[93m23[0m - [91merror[0m[90m Functionless(10023): [0mStepFunctions calls to EventBus putEvents must use object literals

https://functionless.org/docs/error-codes#stepfunctions-calls-to-eventbus-putevents-must-use-object-literals

[7m229[0m   await bus.putEvents(event);
[7m   [0m [91m                      ~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m236[0m:[93m69[0m - [91merror[0m[90m Functionless(10023): [0mStepFunctions calls to EventBus putEvents must use object literals

https://functionless.org/docs/error-codes#stepfunctions-calls-to-eventbus-putevents-must-use-object-literals

[7m236[0m   await bus.putEvents({ source: "", detail: {}, "detail-type": "" }, ...events);
[7m   [0m [91m                                                                    ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m245[0m:[93m23[0m - [91merror[0m[90m Functionless(10023): [0mStepFunctions calls to EventBus putEvents must use object literals

https://functionless.org/docs/error-codes#stepfunctions-calls-to-eventbus-putevents-must-use-object-literals

[7m245[0m   await bus.putEvents({ ...event });
[7m   [0m [91m                      ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m250[0m:[93m23[0m - [91merror[0m[90m Functionless(10023): [0mStepFunctions calls to EventBus putEvents must use object literals

https://functionless.org/docs/error-codes#stepfunctions-calls-to-eventbus-putevents-must-use-object-literals

[7m250[0m   await bus.putEvents({ [source]: "", detail: {}, "detail-type": "" });
[7m   [0m [91m                      ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m256[0m:[93m51[0m - [91merror[0m[90m Functionless(10023): [0mStepFunctions calls to EventBus putEvents must use object literals

https://functionless.org/docs/error-codes#stepfunctions-calls-to-eventbus-putevents-must-use-object-literals

[7m256[0m     { source: "", detail: {}, "detail-type": "" },
[7m   [0m [91m                                                  [0m
[7m257[0m     { [source]: "", detail: {}, "detail-type": "" }
[7m   [0m [91m~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m274[0m:[93m15[0m - [91merror[0m[90m Functionless(10024): [0mStepFunctions error cause must be a constant

https://functionless.org/docs/error-codes#stepfunctions-error-cause-must-be-a-constant

[7m274[0m   throw Error(input.arg);
[7m   [0m [91m              ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m302[0m:[93m28[0m - [91merror[0m[90m Functionless(10012): [0mExpected the first argument of $AWS.Lambda.Invoke to be an object literal.

https://functionless.org/docs/error-codes#expected-an-object-literal

[7m302[0m   await $AWS.Lambda.Invoke(event);
[7m   [0m [91m                           ~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m328[0m:[93m8[0m - [91merror[0m[90m Functionless(10019): [0mUnable to find reference out of application function

https://functionless.org/docs/error-codes#unable-to-find-reference-out-of-application-function

[7m328[0m   await x();
[7m   [0m [91m       ~~[0m
[96mtest/test-files/step-function.ts[0m:[93m361[0m:[93m12[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m361[0m   const x = undefined;
[7m   [0m [91m           ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m366[0m:[93m14[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m366[0m   const x = { y: undefined };
[7m   [0m [91m             ~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m366[0m:[93m14[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m366[0m   const x = { y: undefined };
[7m   [0m [91m             ~~[0m
[96mtest/test-files/step-function.ts[0m:[93m366[0m:[93m17[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m366[0m   const x = { y: undefined };
[7m   [0m [91m                ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m371[0m:[93m8[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m371[0m   const x = await funcUndefined();
[7m   [0m [91m       ~~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m371[0m:[93m8[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m371[0m   const x = await funcUndefined();
[7m   [0m [91m       ~~[0m
[96mtest/test-files/step-function.ts[0m:[93m371[0m:[93m12[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m371[0m   const x = await funcUndefined();
[7m   [0m [91m           ~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m372[0m:[93m9[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m372[0m   return x;
[7m   [0m [91m        ~~[0m
[96mtest/test-files/step-function.ts[0m:[93m376[0m:[93m11[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m376[0m   return [undefined];
[7m   [0m [91m          ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m380[0m:[93m16[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m380[0m   return true ? undefined : func();
[7m   [0m [91m               ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m388[0m:[93m11[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m388[0m   return { y: await funcUndefined() };
[7m   [0m [91m          ~~~~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m388[0m:[93m11[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m388[0m   return { y: await funcUndefined() };
[7m   [0m [91m          ~~[0m
[96mtest/test-files/step-function.ts[0m:[93m388[0m:[93m14[0m - [91merror[0m[90m Functionless(10022): [0mStep Functions does not support undefined

https://functionless.org/docs/error-codes#step-functions-does-not-support-undefined

[7m388[0m   return { y: await funcUndefined() };
[7m   [0m [91m             ~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m432[0m:[93m14[0m - [91merror[0m[90m Functionless(10025): [0mStepFunctions Invalid collection access

https://functionless.org/docs/error-codes#stepfunctions-invalid-collection-access

[7m432[0m   return obj[input.key];
[7m   [0m [91m             ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m504[0m:[93m11[0m - [91merror[0m[90m Functionless(10026): [0mStepFunction property names must be constant

https://functionless.org/docs/error-codes#stepfunction-property-names-must-be-constant

[7m504[0m   return {
[7m   [0m [91m          [0m
[7m505[0m     [input.key]: "",
[7m   [0m [91m~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m559[0m:[93m23[0m - [91merror[0m[90m Functionless(10024): [0mStepFunctions error cause must be a constant

https://functionless.org/docs/error-codes#stepfunctions-error-cause-must-be-a-constant

[7m559[0m       throw new Error(input.key);
[7m   [0m [91m                      ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m561[0m:[93m16[0m - [91merror[0m[90m Functionless(10030): [0mStepFunction throw must be Error or StepFunctionError class

https://functionless.org/docs/error-codes#stepfunction-throw-must-be-error-or-stepfunctionerror-class

[7m561[0m       throw new CustomError("error");
[7m   [0m [91m               ~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m564[0m:[93m35[0m - [91merror[0m[90m Functionless(10024): [0mStepFunctions error cause must be a constant

https://functionless.org/docs/error-codes#stepfunctions-error-cause-must-be-a-constant

[7m564[0m       throw new StepFunctionError(input.key, { reason: "reason" });
[7m   [0m [91m                                  ~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m567[0m:[93m47[0m - [91merror[0m[90m Functionless(10024): [0mStepFunctions error cause must be a constant

https://functionless.org/docs/error-codes#stepfunctions-error-cause-must-be-a-constant

[7m567[0m       throw new StepFunctionError("ErrorName", { reason: input.key });
[7m   [0m [91m                                              ~~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m569[0m:[93m47[0m - [91merror[0m[90m Functionless(10024): [0mStepFunctions error cause must be a constant

https://functionless.org/docs/error-codes#stepfunctions-error-cause-must-be-a-constant

[7m569[0m       throw new StepFunctionError("ErrorName", input.key);
[7m   [0m [91m                                              ~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m583[0m:[93m40[0m - [91merror[0m[90m Functionless(10033): [0mStepFunctions does not support destructuring object with rest

https://functionless.org/docs/error-codes#stepfunctions-does-not-support-destructuring-object-with-rest

[7m583[0m new StepFunction(stack, "sfn", async ({ ...rest }) => {
[7m   [0m [91m                                       ~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m587[0m:[93m10[0m - [91merror[0m[90m Functionless(10033): [0mStepFunctions does not support destructuring object with rest

https://functionless.org/docs/error-codes#stepfunctions-does-not-support-destructuring-object-with-rest

[7m587[0m   const { ...rest } = input;
[7m   [0m [91m         ~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m616[0m:[93m20[0m - [91merror[0m[90m Functionless(10027): [0mthe callback argument of filter, forEach, and map must be a function or arrow expression, found: Identifier

https://functionless.org/docs/error-codes#invalid-input

[7m616[0m   [1, 2, 3].filter(someFunctionReference);
[7m   [0m [91m                   ~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m617[0m:[93m17[0m - [91merror[0m[90m Functionless(10027): [0mthe callback argument of filter, forEach, and map must be a function or arrow expression, found: Identifier

https://functionless.org/docs/error-codes#invalid-input

[7m617[0m   [1, 2, 3].map(someFunctionReference);
[7m   [0m [91m                ~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m618[0m:[93m21[0m - [91merror[0m[90m Functionless(10027): [0mthe callback argument of filter, forEach, and map must be a function or arrow expression, found: Identifier

https://functionless.org/docs/error-codes#invalid-input

[7m618[0m   [1, 2, 3].forEach(someFunctionReference);
[7m   [0m [91m                    ~~~~~~~~~~~~~~~~~~~~~[0m
[96mtest/test-files/step-function.ts[0m:[93m657[0m:[93m7[0m - [93mwarning[0m[90m Functionless(10035): [0mString constants should be used to access objects. Other types may fail at runtime.

https://functionless.org/docs/error-codes#stepfunctions-mismatched-index-type.

[7m657[0m   obj[1];
[7m   [0m [93m      ~[0m
[96mtest/test-files/step-function.ts[0m:[93m660[0m:[93m7[0m - [93mwarning[0m[90m Functionless(10035): [0mNumeric constants should be used to access arrays. Other types may fail at runtime.

https://functionless.org/docs/error-codes#stepfunctions-mismatched-index-type.

[7m660[0m   arr["0"];
[7m   [0m [93m      ~~~[0m
"
`;

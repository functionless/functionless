"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.dispatch = exports.registerCommand = void 0;
const commander_1 = require("commander");
const registry = {};
function registerCommand(definition) {
    registry[definition.resourceKind] = definition;
}
exports.registerCommand = registerCommand;
async function dispatch(resourceKind, resourceDetail) {
    const found = registry[resourceKind];
    const command = new commander_1.Command();
    if (found) {
        found.handler(command, found.resourceKind, resourceDetail);
    }
    command.parse([process.argv[0], ...process.argv.slice(2)]);
}
exports.dispatch = dispatch;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbWFuZC1wcm92aWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9jb21tYW5kLXByb3ZpZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLHlDQUFvQztBQVdwQyxNQUFNLFFBQVEsR0FFVixFQUFFLENBQUM7QUFFUCxTQUFnQixlQUFlLENBQUMsVUFBNkI7SUFDM0QsUUFBUSxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsR0FBRyxVQUFVLENBQUM7QUFDakQsQ0FBQztBQUZELDBDQUVDO0FBRU0sS0FBSyxVQUFVLFFBQVEsQ0FDNUIsWUFBb0IsRUFDcEIsY0FBbUM7SUFFbkMsTUFBTSxLQUFLLEdBQUcsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3JDLE1BQU0sT0FBTyxHQUFHLElBQUksbUJBQU8sRUFBRSxDQUFDO0lBRTlCLElBQUksS0FBSyxFQUFFO1FBQ1QsS0FBSyxDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsS0FBSyxDQUFDLFlBQVksRUFBRSxjQUFjLENBQUMsQ0FBQztLQUM1RDtJQUNELE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBRSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO0FBQzlELENBQUM7QUFYRCw0QkFXQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFN0YWNrUmVzb3VyY2VEZXRhaWwgfSBmcm9tIFwiYXdzLXNkay9jbGllbnRzL2Nsb3VkZm9ybWF0aW9uXCI7XG5pbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcImNvbW1hbmRlclwiO1xuXG5pbnRlcmZhY2UgQ29tbWFuZERlZmluaXRpb248S2luZCBleHRlbmRzIHN0cmluZyA9IHN0cmluZz4ge1xuICByZXNvdXJjZUtpbmQ6IEtpbmQ7XG4gIGhhbmRsZXI6IChcbiAgICBjb21tYW5kOiBDb21tYW5kLFxuICAgIHJlc291cmNlS2luZDogS2luZCxcbiAgICBkZXRhaWxzOiBTdGFja1Jlc291cmNlRGV0YWlsXG4gICkgPT4gdm9pZDtcbn1cblxuY29uc3QgcmVnaXN0cnk6IHtcbiAgW2tpbmQgaW4gc3RyaW5nXTogQ29tbWFuZERlZmluaXRpb247XG59ID0ge307XG5cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlckNvbW1hbmQoZGVmaW5pdGlvbjogQ29tbWFuZERlZmluaXRpb24pIHtcbiAgcmVnaXN0cnlbZGVmaW5pdGlvbi5yZXNvdXJjZUtpbmRdID0gZGVmaW5pdGlvbjtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc3BhdGNoKFxuICByZXNvdXJjZUtpbmQ6IHN0cmluZyxcbiAgcmVzb3VyY2VEZXRhaWw6IFN0YWNrUmVzb3VyY2VEZXRhaWxcbikge1xuICBjb25zdCBmb3VuZCA9IHJlZ2lzdHJ5W3Jlc291cmNlS2luZF07XG4gIGNvbnN0IGNvbW1hbmQgPSBuZXcgQ29tbWFuZCgpO1xuXG4gIGlmIChmb3VuZCkge1xuICAgIGZvdW5kLmhhbmRsZXIoY29tbWFuZCwgZm91bmQucmVzb3VyY2VLaW5kLCByZXNvdXJjZURldGFpbCk7XG4gIH1cbiAgY29tbWFuZC5wYXJzZShbcHJvY2Vzcy5hcmd2WzBdISwgLi4ucHJvY2Vzcy5hcmd2LnNsaWNlKDIpXSk7XG59XG4iXX0=